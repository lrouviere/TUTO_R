<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapitre 3 Manipuler les données avec dplyr | Introduction à R</title>
  <meta name="description" content="Chapitre 3 Manipuler les données avec dplyr | Introduction à R" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapitre 3 Manipuler les données avec dplyr | Introduction à R" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapitre 3 Manipuler les données avec dplyr | Introduction à R" />
  
  
  

<meta name="author" content="Laurent Rouvière" />


<meta name="date" content="2020-06-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="objetsR.html"/>
<link rel="next" href="ggplot2.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/amcharts-3.21.13/amcharts.js"></script>
<script src="libs/ramcharts_base-binding-2.1.13/ramcharts_base.js"></script>
<script src="libs/amcharts_type_serial-3.20.18/serial.js"></script>
<script src="libs/amcharts_themes_light.js-3.20.18/light.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.3/leaflet-providers-plugin.js"></script>
<link href="libs/vis-4.20.1/vis.css" rel="stylesheet" />
<script src="libs/vis-4.20.1/vis.min.js"></script>
<script src="libs/visNetwork-binding-2.0.9/visNetwork.js"></script>
<script src="libs/FileSaver-1.1.20151003/FileSaver.min.js"></script>
<script src="libs/Blob-1.0/Blob.js"></script>
<script src="libs/canvas-toBlob-1.0/canvas-toBlob.js"></script>
<script src="libs/html2canvas-0.5.0/html2canvas.js"></script>
<script src="libs/jspdf-1.3.2/jspdf.debug.js"></script>
<link href="libs/jquery-sparkline-2.1.2/jquery.sparkline.css" rel="stylesheet" />
<script src="libs/jquery-sparkline-2.1.2/jquery.sparkline.js"></script>
<script src="libs/sparkline-binding-2.0/sparkline.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="/Users/laurent/Dropbox/FICHIERS_STYLE/style_bdown.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction à R<br> <br> L. Rouvière</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Présentation</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#r-script"><i class="fa fa-check"></i><b>1.1</b> R Script</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#packages"><i class="fa fa-check"></i><b>1.2</b> Packages</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#markdown"><i class="fa fa-check"></i><b>1.3</b> Markdown</a><ul>
<li class="chapter" data-level="1.3.1" data-path="intro.html"><a href="intro.html#syntaxe"><i class="fa fa-check"></i><b>1.3.1</b> Syntaxe</a></li>
<li class="chapter" data-level="1.3.2" data-path="intro.html"><a href="intro.html#les-chunks"><i class="fa fa-check"></i><b>1.3.2</b> Les chunks</a></li>
<li class="chapter" data-level="1.3.3" data-path="intro.html"><a href="intro.html#notebook"><i class="fa fa-check"></i><b>1.3.3</b> Notebook</a></li>
<li class="chapter" data-level="1.3.4" data-path="intro.html"><a href="intro.html#diaporama-r"><i class="fa fa-check"></i><b>1.3.4</b> Diaporama R</a></li>
<li class="chapter" data-level="1.3.5" data-path="intro.html"><a href="intro.html#exemples-de-styles-de-documents-markdown"><i class="fa fa-check"></i><b>1.3.5</b> Exemples de styles de documents markdown</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="objetsR.html"><a href="objetsR.html"><i class="fa fa-check"></i><b>2</b> Les objets R</a><ul>
<li class="chapter" data-level="2.1" data-path="objetsR.html"><a href="objetsR.html#création-dobjets"><i class="fa fa-check"></i><b>2.1</b> Création d’objets</a><ul>
<li class="chapter" data-level="2.1.1" data-path="objetsR.html"><a href="objetsR.html#numérique"><i class="fa fa-check"></i><b>2.1.1</b> Numérique</a></li>
<li class="chapter" data-level="2.1.2" data-path="objetsR.html"><a href="objetsR.html#caractère"><i class="fa fa-check"></i><b>2.1.2</b> Caractère</a></li>
<li class="chapter" data-level="2.1.3" data-path="objetsR.html"><a href="objetsR.html#facteur"><i class="fa fa-check"></i><b>2.1.3</b> Facteur</a></li>
<li class="chapter" data-level="2.1.4" data-path="objetsR.html"><a href="objetsR.html#logique-booléen"><i class="fa fa-check"></i><b>2.1.4</b> Logique (Booléen)</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="objetsR.html"><a href="objetsR.html#vecteur"><i class="fa fa-check"></i><b>2.2</b> Vecteur</a><ul>
<li class="chapter" data-level="2.2.1" data-path="objetsR.html"><a href="objetsR.html#sélectionner-une-partie-dun-vecteur"><i class="fa fa-check"></i><b>2.2.1</b> Sélectionner une partie d’un vecteur</a></li>
<li class="chapter" data-level="2.2.2" data-path="objetsR.html"><a href="objetsR.html#opérations-sur-les-vecteurs"><i class="fa fa-check"></i><b>2.2.2</b> Opérations sur les vecteurs</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="objetsR.html"><a href="objetsR.html#matrices"><i class="fa fa-check"></i><b>2.3</b> Matrices</a></li>
<li class="chapter" data-level="2.4" data-path="objetsR.html"><a href="objetsR.html#listes"><i class="fa fa-check"></i><b>2.4</b> Listes</a></li>
<li class="chapter" data-level="2.5" data-path="objetsR.html"><a href="objetsR.html#dataframe"><i class="fa fa-check"></i><b>2.5</b> Dataframe</a></li>
<li class="chapter" data-level="2.6" data-path="objetsR.html"><a href="objetsR.html#quelques-fonctions-importantes"><i class="fa fa-check"></i><b>2.6</b> Quelques fonctions importantes</a></li>
<li class="chapter" data-level="2.7" data-path="objetsR.html"><a href="objetsR.html#exercices-complémentaires"><i class="fa fa-check"></i><b>2.7</b> Exercices complémentaires</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>3</b> Manipuler les données avec dplyr</a><ul>
<li class="chapter" data-level="3.1" data-path="dplyr.html"><a href="dplyr.html#importer-des-données"><i class="fa fa-check"></i><b>3.1</b> Importer des données</a></li>
<li class="chapter" data-level="3.2" data-path="dplyr.html"><a href="dplyr.html#le-package-dplyr"><i class="fa fa-check"></i><b>3.2</b> Le package dplyr</a><ul>
<li class="chapter" data-level="3.2.1" data-path="dplyr.html"><a href="dplyr.html#les-principaux-verbres-dplyr"><i class="fa fa-check"></i><b>3.2.1</b> Les principaux verbres dplyr</a></li>
<li class="chapter" data-level="3.2.2" data-path="dplyr.html"><a href="dplyr.html#les-verbes-summarize-et-groub_by"><i class="fa fa-check"></i><b>3.2.2</b> Les verbes <code>summarize</code> et <code>groub_by</code></a></li>
<li class="chapter" data-level="3.2.3" data-path="dplyr.html"><a href="dplyr.html#assembler-des-verbes-avec-lopérateur-de-chainage"><i class="fa fa-check"></i><b>3.2.3</b> Assembler des verbes avec l’opérateur de chainage <code>%&gt;%</code></a></li>
<li class="chapter" data-level="3.2.4" data-path="dplyr.html"><a href="dplyr.html#quelques-exercices"><i class="fa fa-check"></i><b>3.2.4</b> Quelques exercices</a></li>
<li class="chapter" data-level="3.2.5" data-path="dplyr.html"><a href="dplyr.html#compléments-tidy-data-avec-tidyr"><i class="fa fa-check"></i><b>3.2.5</b> Compléments : Tidy data avec tidyr</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>4</b> Visualisation avec ggplot2</a><ul>
<li class="chapter" data-level="4.1" data-path="ggplot2.html"><a href="ggplot2.html#fonctions-graphiques-conventionnelles"><i class="fa fa-check"></i><b>4.1</b> Fonctions graphiques conventionnelles</a><ul>
<li class="chapter" data-level="4.1.1" data-path="ggplot2.html"><a href="ggplot2.html#la-fonction-plot"><i class="fa fa-check"></i><b>4.1.1</b> La fonction <strong>plot</strong></a></li>
<li class="chapter" data-level="4.1.2" data-path="ggplot2.html"><a href="ggplot2.html#graphes-interactifs-avec-ramcharts"><i class="fa fa-check"></i><b>4.1.2</b> Graphes interactifs avec rAmCharts</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="ggplot2.html"><a href="ggplot2.html#la-grammaire-ggplot2"><i class="fa fa-check"></i><b>4.2</b> La grammaire <strong>ggplot2</strong></a><ul>
<li class="chapter" data-level="4.2.1" data-path="ggplot2.html"><a href="ggplot2.html#premiers-graphes-ggplot2"><i class="fa fa-check"></i><b>4.2.1</b> Premiers graphes <code>ggplot2</code></a></li>
<li class="chapter" data-level="4.2.2" data-path="ggplot2.html"><a href="ggplot2.html#data-et-aesthetics"><i class="fa fa-check"></i><b>4.2.2</b> Data et aesthetics</a></li>
<li class="chapter" data-level="4.2.3" data-path="ggplot2.html"><a href="ggplot2.html#geometrics"><i class="fa fa-check"></i><b>4.2.3</b> <code>Geometrics</code></a></li>
<li class="chapter" data-level="4.2.4" data-path="ggplot2.html"><a href="ggplot2.html#statistics"><i class="fa fa-check"></i><b>4.2.4</b> <code>Statistics</code></a></li>
<li class="chapter" data-level="4.2.5" data-path="ggplot2.html"><a href="ggplot2.html#scales"><i class="fa fa-check"></i><b>4.2.5</b> <code>Scales</code></a></li>
<li class="chapter" data-level="4.2.6" data-path="ggplot2.html"><a href="ggplot2.html#group-et-facets"><i class="fa fa-check"></i><b>4.2.6</b> <code>Group et facets</code></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="ggplot2.html"><a href="ggplot2.html#compléments"><i class="fa fa-check"></i><b>4.3</b> Compléments</a></li>
<li class="chapter" data-level="4.4" data-path="ggplot2.html"><a href="ggplot2.html#quelques-exercices-supplémentaires"><i class="fa fa-check"></i><b>4.4</b> Quelques exercices supplémentaires</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="leaflet.html"><a href="leaflet.html"><i class="fa fa-check"></i><b>5</b> Faire des cartes interactives avec leaflet</a><ul>
<li class="chapter" data-level="5.1" data-path="leaflet.html"><a href="leaflet.html#présentation-de-leaflet"><i class="fa fa-check"></i><b>5.1</b> Présentation de leaflet</a></li>
<li class="chapter" data-level="5.2" data-path="leaflet.html"><a href="leaflet.html#challenge-visualisation-des-stations-velib-à-paris"><i class="fa fa-check"></i><b>5.2</b> Challenge : Visualisation des stations velib à Paris</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="faire-de-la-régression-sur-r.html"><a href="faire-de-la-régression-sur-r.html"><i class="fa fa-check"></i><b>6</b> Faire de la régression sur R</a><ul>
<li class="chapter" data-level="6.1" data-path="faire-de-la-régression-sur-r.html"><a href="faire-de-la-régression-sur-r.html#modèle-linéaire-fonctions-lm-et-predict"><i class="fa fa-check"></i><b>6.1</b> Modèle linéaire : fonctions lm et predict</a></li>
<li class="chapter" data-level="6.2" data-path="faire-de-la-régression-sur-r.html"><a href="faire-de-la-régression-sur-r.html#sélection-de-variables"><i class="fa fa-check"></i><b>6.2</b> Sélection de variables</a></li>
<li class="chapter" data-level="6.3" data-path="faire-de-la-régression-sur-r.html"><a href="faire-de-la-régression-sur-r.html#régression-logistique-et-arbre"><i class="fa fa-check"></i><b>6.3</b> Régression logistique et arbre</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="références.html"><a href="références.html"><i class="fa fa-check"></i>Références</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction à R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="dplyr" class="section level1">
<h1><span class="header-section-number">Chapitre 3</span> Manipuler les données avec dplyr</h1>
<p>Les données sont souvent le point de départ d’une étude statistique. Elles sont généralement d’abord stockées dans des fichiers (txt, xls, csv) et une des premières étapes est d’amener ces données dans <strong>R</strong> et de les affecter à un objet de type <strong>dataframe</strong>. Il est par conséquent très important connaître et maîtriser les opérations qui permettent de réaliser ces importations. Nous présentons tout d’abord quelques fonctions qui permettent de faire ces importations avant de présenter le package <strong>dplyr</strong> qui offre une syntaxe claire pour manipuler des données (correctement importées).</p>
<div id="importer-des-données" class="section level2">
<h2><span class="header-section-number">3.1</span> Importer des données</h2>
<p>Les fonction <strong>read.table</strong> et <strong>read.csv</strong> sont les fonctions standards de <em>R</em> pour importer des données à partir de fichiers <em>.txt</em> ou <em>.csv</em>. Il est important de bien gérer le <code>chemin du répertoire</code>ou se trouve le fichier. On peut le spécifier explicitement ou utiliser des fonctions comme <strong>file.path</strong> :</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="dplyr.html#cb68-1"></a><span class="op">&gt;</span><span class="st"> </span>path &lt;-<span class="st"> </span><span class="kw">file.path</span>(<span class="st">&quot;data/&quot;</span>, <span class="st">&quot;piscines.csv&quot;</span>) <span class="co">#premier : répertoire, deuxième : fichier</span></span>
<span id="cb68-2"><a href="dplyr.html#cb68-2"></a><span class="op">&gt;</span><span class="st"> </span>piscines &lt;-<span class="st"> </span><span class="kw">read.csv</span>(path)</span>
<span id="cb68-3"><a href="dplyr.html#cb68-3"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">class</span>(piscines)</span>
<span id="cb68-4"><a href="dplyr.html#cb68-4"></a>[<span class="dv">1</span>] <span class="st">&quot;data.frame&quot;</span></span>
<span id="cb68-5"><a href="dplyr.html#cb68-5"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(piscines)</span>
<span id="cb68-6"><a href="dplyr.html#cb68-6"></a>     Name             Address             Latitude        Longitude    </span>
<span id="cb68-7"><a href="dplyr.html#cb68-7"></a> Length<span class="op">:</span><span class="dv">20</span>          Length<span class="op">:</span><span class="dv">20</span>          Min.   <span class="op">:-</span><span class="fl">27.61</span>   Min.   <span class="op">:</span><span class="fl">152.9</span>  </span>
<span id="cb68-8"><a href="dplyr.html#cb68-8"></a> Class <span class="op">:</span>character   Class <span class="op">:</span>character   1st Qu.<span class="op">:-</span><span class="fl">27.55</span>   1st Qu.<span class="op">:</span><span class="fl">153.0</span>  </span>
<span id="cb68-9"><a href="dplyr.html#cb68-9"></a> Mode  <span class="op">:</span>character   Mode  <span class="op">:</span>character   Median <span class="op">:-</span><span class="fl">27.49</span>   Median <span class="op">:</span><span class="fl">153.0</span>  </span>
<span id="cb68-10"><a href="dplyr.html#cb68-10"></a>                                       Mean   <span class="op">:-</span><span class="fl">27.49</span>   Mean   <span class="op">:</span><span class="fl">153.0</span>  </span>
<span id="cb68-11"><a href="dplyr.html#cb68-11"></a>                                       3rd Qu.<span class="op">:-</span><span class="fl">27.45</span>   3rd Qu.<span class="op">:</span><span class="fl">153.1</span>  </span>
<span id="cb68-12"><a href="dplyr.html#cb68-12"></a>                                       Max.   <span class="op">:-</span><span class="fl">27.31</span>   Max.   <span class="op">:</span><span class="fl">153.2</span>  </span></code></pre></div>
<p>Il existe plusieurs <strong>options importantes</strong> dans <strong>read.csv</strong>, notamment</p>
<ul>
<li><strong>sep</strong> : le caractère de séparation (espace, virgule…)</li>
<li><strong>dec</strong> : le caractère pour le séparateur décimal (vigule, point…)</li>
<li><strong>header</strong> : logique pour indiquer si le nom des variables est spécifié à la première ligne du fichier</li>
<li><strong>row.names</strong> : vecteurs des identifiants (si besoin)</li>
<li><strong>na.strings</strong> : vecteur de caractères pour repérer les données manquantes.</li>
<li>…</li>
</ul>
<p>Le package <strong>readr</strong> du tidyverse propose d’autres fonctions comme <strong>read_csv</strong> ou <strong>read_delim</strong>. Il n’y a pas de différences énormes avec les fonctions standards, les objets créés sont des <strong>tibbles</strong> et plus des <strong>dataframes</strong> (même si les tibbles sont des dataframes…). Par exemple</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="dplyr.html#cb69-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(readr)</span>
<span id="cb69-2"><a href="dplyr.html#cb69-2"></a><span class="op">&gt;</span><span class="st"> </span>piscines &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/piscines.csv&quot;</span>)</span>
<span id="cb69-3"><a href="dplyr.html#cb69-3"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(piscines)</span>
<span id="cb69-4"><a href="dplyr.html#cb69-4"></a>     Name             Address             Latitude        Longitude    </span>
<span id="cb69-5"><a href="dplyr.html#cb69-5"></a> Length<span class="op">:</span><span class="dv">20</span>          Length<span class="op">:</span><span class="dv">20</span>          Min.   <span class="op">:-</span><span class="fl">27.61</span>   Min.   <span class="op">:</span><span class="fl">152.9</span>  </span>
<span id="cb69-6"><a href="dplyr.html#cb69-6"></a> Class <span class="op">:</span>character   Class <span class="op">:</span>character   1st Qu.<span class="op">:-</span><span class="fl">27.55</span>   1st Qu.<span class="op">:</span><span class="fl">153.0</span>  </span>
<span id="cb69-7"><a href="dplyr.html#cb69-7"></a> Mode  <span class="op">:</span>character   Mode  <span class="op">:</span>character   Median <span class="op">:-</span><span class="fl">27.49</span>   Median <span class="op">:</span><span class="fl">153.0</span>  </span>
<span id="cb69-8"><a href="dplyr.html#cb69-8"></a>                                       Mean   <span class="op">:-</span><span class="fl">27.49</span>   Mean   <span class="op">:</span><span class="fl">153.0</span>  </span>
<span id="cb69-9"><a href="dplyr.html#cb69-9"></a>                                       3rd Qu.<span class="op">:-</span><span class="fl">27.45</span>   3rd Qu.<span class="op">:</span><span class="fl">153.1</span>  </span>
<span id="cb69-10"><a href="dplyr.html#cb69-10"></a>                                       Max.   <span class="op">:-</span><span class="fl">27.31</span>   Max.   <span class="op">:</span><span class="fl">153.2</span>  </span>
<span id="cb69-11"><a href="dplyr.html#cb69-11"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">class</span>(piscines)</span>
<span id="cb69-12"><a href="dplyr.html#cb69-12"></a>[<span class="dv">1</span>] <span class="st">&quot;spec_tbl_df&quot;</span> <span class="st">&quot;tbl_df&quot;</span>      <span class="st">&quot;tbl&quot;</span>         <span class="st">&quot;data.frame&quot;</span> </span></code></pre></div>
<p>Enfin si on n’est pas très à l’aise avec ces fonctions, on pourra utiliser le bouton <code>Import Dataset</code> qui se trouve dans l’onglet <code>Environment</code> de <strong>RStudio</strong>. Cette manière de procéder fonctionne pour des jeux de données simples, si les bases de données contient trop de spécificités on devra souvent utiliser les fonctions avec les bonnes options.</p>

<div class="exercise">
<span id="exr:exo-import1" class="exercise"><strong>Exercice 3.1  (Importation d’un jeu de données)  </strong></span>
</div>

<ol style="list-style-type: decimal">
<li><p>Importer les données qui se trouvent dans le fichier <em>mydata.csv</em>. On utilisera la fonction <strong>read.csv</strong> avec les options par défaut.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="dplyr.html#cb70-1"></a><span class="op">&gt;</span><span class="st"> </span>data1 &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/mydata.csv&quot;</span>)</span>
<span id="cb70-2"><a href="dplyr.html#cb70-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(data1)</span>
<span id="cb70-3"><a href="dplyr.html#cb70-3"></a> surname.height.weight.feet_size.sex</span>
<span id="cb70-4"><a href="dplyr.html#cb70-4"></a> Length<span class="op">:</span><span class="dv">3</span>                           </span>
<span id="cb70-5"><a href="dplyr.html#cb70-5"></a> Class <span class="op">:</span>character                   </span>
<span id="cb70-6"><a href="dplyr.html#cb70-6"></a> Mode  <span class="op">:</span>character                   </span></code></pre></div></li>
<li><p>Importer <strong>correctement</strong> les données qui se trouvent dans le fichier <em>mydata.csv</em> (utiliser <em>sep</em>, <em>dec</em> et <em>row.names</em>).</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="dplyr.html#cb71-1"></a><span class="op">&gt;</span><span class="st"> </span>data1 &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/mydata.csv&quot;</span>,<span class="dt">sep=</span><span class="st">&quot;;&quot;</span>,<span class="dt">dec=</span><span class="kw">c</span>(<span class="st">&quot;.&quot;</span>),<span class="dt">row.names =</span> <span class="dv">1</span>)</span>
<span id="cb71-2"><a href="dplyr.html#cb71-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(data1)</span>
<span id="cb71-3"><a href="dplyr.html#cb71-3"></a>     height          weight        feet_size         sex           </span>
<span id="cb71-4"><a href="dplyr.html#cb71-4"></a> Min.   <span class="op">:</span><span class="fl">158.0</span>   Min.   <span class="op">:</span><span class="fl">72.00</span>   Min.   <span class="op">:</span><span class="fl">8.000</span>   Length<span class="op">:</span><span class="dv">3</span>          </span>
<span id="cb71-5"><a href="dplyr.html#cb71-5"></a> 1st Qu.<span class="op">:</span><span class="fl">166.8</span>   1st Qu.<span class="op">:</span><span class="fl">75.00</span>   1st Qu.<span class="op">:</span><span class="fl">8.250</span>   Class <span class="op">:</span>character  </span>
<span id="cb71-6"><a href="dplyr.html#cb71-6"></a> Median <span class="op">:</span><span class="fl">175.5</span>   Median <span class="op">:</span><span class="fl">78.00</span>   Median <span class="op">:</span><span class="fl">8.500</span>   Mode  <span class="op">:</span>character  </span>
<span id="cb71-7"><a href="dplyr.html#cb71-7"></a> Mean   <span class="op">:</span><span class="fl">172.5</span>   Mean   <span class="op">:</span><span class="fl">76.67</span>   Mean   <span class="op">:</span><span class="fl">8.667</span>                     </span>
<span id="cb71-8"><a href="dplyr.html#cb71-8"></a> 3rd Qu.<span class="op">:</span><span class="fl">179.8</span>   3rd Qu.<span class="op">:</span><span class="fl">79.00</span>   3rd Qu.<span class="op">:</span><span class="fl">9.000</span>                     </span>
<span id="cb71-9"><a href="dplyr.html#cb71-9"></a> Max.   <span class="op">:</span><span class="fl">184.0</span>   Max.   <span class="op">:</span><span class="fl">80.00</span>   Max.   <span class="op">:</span><span class="fl">9.500</span>                     </span></code></pre></div></li>
<li><p>Importer les données qui se trouvent dans le fichier <em>mydata2.csv</em>.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="dplyr.html#cb72-1"></a><span class="op">&gt;</span><span class="st"> </span>data2 &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/mydata2.csv&quot;</span>)</span>
<span id="cb72-2"><a href="dplyr.html#cb72-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(data2)</span>
<span id="cb72-3"><a href="dplyr.html#cb72-3"></a> height.weight.size.sex</span>
<span id="cb72-4"><a href="dplyr.html#cb72-4"></a> Length<span class="op">:</span><span class="dv">4</span>              </span>
<span id="cb72-5"><a href="dplyr.html#cb72-5"></a> Class <span class="op">:</span>character      </span>
<span id="cb72-6"><a href="dplyr.html#cb72-6"></a> Mode  <span class="op">:</span>character      </span></code></pre></div></li>
<li><p>Ce fichier contient des données manquantes (identifiées par un point). A l’aide de <strong>na.strings</strong>, refaire l’importation en identifiant les données manquantes.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="dplyr.html#cb73-1"></a><span class="op">&gt;</span><span class="st"> </span>data2 &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/mydata2.csv&quot;</span>,<span class="dt">sep=</span><span class="st">&quot;&quot;</span>,<span class="dt">na.strings =</span> <span class="st">&quot;.&quot;</span>)</span>
<span id="cb73-2"><a href="dplyr.html#cb73-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(data2)</span>
<span id="cb73-3"><a href="dplyr.html#cb73-3"></a>     height          weight           size          sex           </span>
<span id="cb73-4"><a href="dplyr.html#cb73-4"></a> Min.   <span class="op">:</span><span class="fl">175.5</span>   Min.   <span class="op">:</span><span class="fl">72.00</span>   Min.   <span class="op">:</span><span class="fl">7.00</span>   Length<span class="op">:</span><span class="dv">4</span>          </span>
<span id="cb73-5"><a href="dplyr.html#cb73-5"></a> 1st Qu.<span class="op">:</span><span class="fl">176.8</span>   1st Qu.<span class="op">:</span><span class="fl">75.00</span>   1st Qu.<span class="op">:</span><span class="fl">7.75</span>   Class <span class="op">:</span>character  </span>
<span id="cb73-6"><a href="dplyr.html#cb73-6"></a> Median <span class="op">:</span><span class="fl">178.0</span>   Median <span class="op">:</span><span class="fl">78.00</span>   Median <span class="op">:</span><span class="fl">8.25</span>   Mode  <span class="op">:</span>character  </span>
<span id="cb73-7"><a href="dplyr.html#cb73-7"></a> Mean   <span class="op">:</span><span class="fl">179.2</span>   Mean   <span class="op">:</span><span class="fl">76.67</span>   Mean   <span class="op">:</span><span class="fl">8.25</span>                     </span>
<span id="cb73-8"><a href="dplyr.html#cb73-8"></a> 3rd Qu.<span class="op">:</span><span class="fl">181.0</span>   3rd Qu.<span class="op">:</span><span class="fl">79.00</span>   3rd Qu.<span class="op">:</span><span class="fl">8.75</span>                     </span>
<span id="cb73-9"><a href="dplyr.html#cb73-9"></a> Max.   <span class="op">:</span><span class="fl">184.0</span>   Max.   <span class="op">:</span><span class="fl">80.00</span>   Max.   <span class="op">:</span><span class="fl">9.50</span>                     </span>
<span id="cb73-10"><a href="dplyr.html#cb73-10"></a> NA<span class="st">&#39;s   :1       NA&#39;</span>s   <span class="op">:</span><span class="dv">1</span>                                        </span></code></pre></div></li>
<li><p>Changer les <strong>levels</strong> de la variable <code>sex</code> en <strong>woman</strong> et <strong>man</strong> (on pourra utiliser la fonction <strong>levels</strong>).</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="dplyr.html#cb74-1"></a><span class="op">&gt;</span><span class="st"> </span>data22 &lt;-<span class="st"> </span>data2</span></code></pre></div></li>
</ol>
<ul>
<li><p>1ère façon :</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="dplyr.html#cb75-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">levels</span>(data2<span class="op">$</span>sex) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;woman&quot;</span>,<span class="st">&quot;man&quot;</span>)</span>
<span id="cb75-2"><a href="dplyr.html#cb75-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(data2)</span>
<span id="cb75-3"><a href="dplyr.html#cb75-3"></a>     height          weight           size          sex           </span>
<span id="cb75-4"><a href="dplyr.html#cb75-4"></a> Min.   <span class="op">:</span><span class="fl">175.5</span>   Min.   <span class="op">:</span><span class="fl">72.00</span>   Min.   <span class="op">:</span><span class="fl">7.00</span>   Length<span class="op">:</span><span class="dv">4</span>          </span>
<span id="cb75-5"><a href="dplyr.html#cb75-5"></a> 1st Qu.<span class="op">:</span><span class="fl">176.8</span>   1st Qu.<span class="op">:</span><span class="fl">75.00</span>   1st Qu.<span class="op">:</span><span class="fl">7.75</span>   Class <span class="op">:</span>character  </span>
<span id="cb75-6"><a href="dplyr.html#cb75-6"></a> Median <span class="op">:</span><span class="fl">178.0</span>   Median <span class="op">:</span><span class="fl">78.00</span>   Median <span class="op">:</span><span class="fl">8.25</span>   Mode  <span class="op">:</span>character  </span>
<span id="cb75-7"><a href="dplyr.html#cb75-7"></a> Mean   <span class="op">:</span><span class="fl">179.2</span>   Mean   <span class="op">:</span><span class="fl">76.67</span>   Mean   <span class="op">:</span><span class="fl">8.25</span>                     </span>
<span id="cb75-8"><a href="dplyr.html#cb75-8"></a> 3rd Qu.<span class="op">:</span><span class="fl">181.0</span>   3rd Qu.<span class="op">:</span><span class="fl">79.00</span>   3rd Qu.<span class="op">:</span><span class="fl">8.75</span>                     </span>
<span id="cb75-9"><a href="dplyr.html#cb75-9"></a> Max.   <span class="op">:</span><span class="fl">184.0</span>   Max.   <span class="op">:</span><span class="fl">80.00</span>   Max.   <span class="op">:</span><span class="fl">9.50</span>                     </span>
<span id="cb75-10"><a href="dplyr.html#cb75-10"></a> NA<span class="st">&#39;s   :1       NA&#39;</span>s   <span class="op">:</span><span class="dv">1</span>                                        </span></code></pre></div></li>
<li><p>2ème façon avec <strong>recode_factor</strong></p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="dplyr.html#cb76-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(tidyverse)</span>
<span id="cb76-2"><a href="dplyr.html#cb76-2"></a><span class="op">&gt;</span><span class="st"> </span>data22<span class="op">$</span>sex &lt;-<span class="st"> </span><span class="kw">recode_factor</span>(data2<span class="op">$</span>sex,<span class="st">&quot;F&quot;</span>=<span class="st">&quot;woman&quot;</span>,<span class="st">&quot;M&quot;</span>=<span class="st">&quot;man&quot;</span>)</span>
<span id="cb76-3"><a href="dplyr.html#cb76-3"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summary</span>(data22)</span>
<span id="cb76-4"><a href="dplyr.html#cb76-4"></a>     height          weight           size         sex   </span>
<span id="cb76-5"><a href="dplyr.html#cb76-5"></a> Min.   <span class="op">:</span><span class="fl">175.5</span>   Min.   <span class="op">:</span><span class="fl">72.00</span>   Min.   <span class="op">:</span><span class="fl">7.00</span>   woman<span class="op">:</span><span class="dv">1</span>  </span>
<span id="cb76-6"><a href="dplyr.html#cb76-6"></a> 1st Qu.<span class="op">:</span><span class="fl">176.8</span>   1st Qu.<span class="op">:</span><span class="fl">75.00</span>   1st Qu.<span class="op">:</span><span class="fl">7.75</span>   man  <span class="op">:</span><span class="dv">3</span>  </span>
<span id="cb76-7"><a href="dplyr.html#cb76-7"></a> Median <span class="op">:</span><span class="fl">178.0</span>   Median <span class="op">:</span><span class="fl">78.00</span>   Median <span class="op">:</span><span class="fl">8.25</span>            </span>
<span id="cb76-8"><a href="dplyr.html#cb76-8"></a> Mean   <span class="op">:</span><span class="fl">179.2</span>   Mean   <span class="op">:</span><span class="fl">76.67</span>   Mean   <span class="op">:</span><span class="fl">8.25</span>            </span>
<span id="cb76-9"><a href="dplyr.html#cb76-9"></a> 3rd Qu.<span class="op">:</span><span class="fl">181.0</span>   3rd Qu.<span class="op">:</span><span class="fl">79.00</span>   3rd Qu.<span class="op">:</span><span class="fl">8.75</span>            </span>
<span id="cb76-10"><a href="dplyr.html#cb76-10"></a> Max.   <span class="op">:</span><span class="fl">184.0</span>   Max.   <span class="op">:</span><span class="fl">80.00</span>   Max.   <span class="op">:</span><span class="fl">9.50</span>            </span>
<span id="cb76-11"><a href="dplyr.html#cb76-11"></a> NA<span class="st">&#39;s   :1       NA&#39;</span>s   <span class="op">:</span><span class="dv">1</span>                               </span></code></pre></div></li>
</ul>

<div class="exercise">
<span id="exr:exo-import2" class="exercise"><strong>Exercice 3.2  (Jointure de tables)  </strong></span>
</div>

<p>On considère les 3 jeux de données suivants, au format <strong>tibble</strong> :</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="dplyr.html#cb77-1"></a><span class="op">&gt;</span><span class="st"> </span>df1 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">name=</span><span class="kw">c</span>(<span class="st">&quot;Mary&quot;</span>,<span class="st">&quot;Peter&quot;</span>,<span class="st">&quot;John&quot;</span>,<span class="st">&quot;July&quot;</span>),<span class="dt">age=</span><span class="kw">c</span>(<span class="dv">18</span>,<span class="dv">25</span>,<span class="dv">21</span>,<span class="dv">43</span>))</span>
<span id="cb77-2"><a href="dplyr.html#cb77-2"></a><span class="op">&gt;</span><span class="st"> </span>df2 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">name=</span><span class="kw">c</span>(<span class="st">&quot;Zac&quot;</span>,<span class="st">&quot;Julian&quot;</span>),<span class="dt">age=</span><span class="kw">c</span>(<span class="dv">23</span>,<span class="dv">48</span>))</span>
<span id="cb77-3"><a href="dplyr.html#cb77-3"></a><span class="op">&gt;</span><span class="st"> </span>df3 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">size=</span><span class="kw">c</span>(<span class="dv">154</span>,<span class="dv">178</span>,<span class="dv">182</span>,<span class="dv">134</span>,<span class="dv">142</span>),<span class="dt">name1=</span><span class="kw">c</span>(<span class="st">&quot;Peter&quot;</span>,<span class="st">&quot;Mary&quot;</span>,<span class="st">&quot;July&quot;</span>,<span class="st">&quot;John&quot;</span>,<span class="st">&quot;stef&quot;</span>))</span>
<span id="cb77-4"><a href="dplyr.html#cb77-4"></a><span class="op">&gt;</span><span class="st"> </span>df1</span>
<span id="cb77-5"><a href="dplyr.html#cb77-5"></a><span class="co"># A tibble: 4 x 2</span></span>
<span id="cb77-6"><a href="dplyr.html#cb77-6"></a>  name    age</span>
<span id="cb77-7"><a href="dplyr.html#cb77-7"></a>  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb77-8"><a href="dplyr.html#cb77-8"></a><span class="dv">1</span> Mary     <span class="dv">18</span></span>
<span id="cb77-9"><a href="dplyr.html#cb77-9"></a><span class="dv">2</span> Peter    <span class="dv">25</span></span>
<span id="cb77-10"><a href="dplyr.html#cb77-10"></a><span class="dv">3</span> John     <span class="dv">21</span></span>
<span id="cb77-11"><a href="dplyr.html#cb77-11"></a><span class="dv">4</span> July     <span class="dv">43</span></span>
<span id="cb77-12"><a href="dplyr.html#cb77-12"></a><span class="op">&gt;</span><span class="st"> </span>df2</span>
<span id="cb77-13"><a href="dplyr.html#cb77-13"></a><span class="co"># A tibble: 2 x 2</span></span>
<span id="cb77-14"><a href="dplyr.html#cb77-14"></a>  name     age</span>
<span id="cb77-15"><a href="dplyr.html#cb77-15"></a>  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb77-16"><a href="dplyr.html#cb77-16"></a><span class="dv">1</span> Zac       <span class="dv">23</span></span>
<span id="cb77-17"><a href="dplyr.html#cb77-17"></a><span class="dv">2</span> Julian    <span class="dv">48</span></span>
<span id="cb77-18"><a href="dplyr.html#cb77-18"></a><span class="op">&gt;</span><span class="st"> </span>df3</span>
<span id="cb77-19"><a href="dplyr.html#cb77-19"></a><span class="co"># A tibble: 5 x 2</span></span>
<span id="cb77-20"><a href="dplyr.html#cb77-20"></a>   size name1</span>
<span id="cb77-21"><a href="dplyr.html#cb77-21"></a>  <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>chr<span class="op">&gt;</span></span>
<span id="cb77-22"><a href="dplyr.html#cb77-22"></a><span class="dv">1</span>   <span class="dv">154</span> Peter</span>
<span id="cb77-23"><a href="dplyr.html#cb77-23"></a><span class="dv">2</span>   <span class="dv">178</span> Mary </span>
<span id="cb77-24"><a href="dplyr.html#cb77-24"></a><span class="dv">3</span>   <span class="dv">182</span> July </span>
<span id="cb77-25"><a href="dplyr.html#cb77-25"></a><span class="dv">4</span>   <span class="dv">134</span> John </span>
<span id="cb77-26"><a href="dplyr.html#cb77-26"></a><span class="dv">5</span>   <span class="dv">142</span> stef </span></code></pre></div>
<p>On souhaite assembler ces tables en utilisant les <em>fonctions de jointure</em> du <strong>tidyverse</strong> (<strong>left_join</strong>, <strong>full_join</strong> par exemple). On pourra consulter la cheatsheet <strong>Data transformation with dplyr</strong> (<em>help -&gt; cheatsheets -&gt; …</em>).</p>
<ol style="list-style-type: decimal">
<li><p>Assembler <code>df1</code> avec <code>df2</code> en utilisant <strong>bind_rows</strong> et calculer la moyenne de la variable <code>age</code>. On appellera <code>df</code> cette nouvelle table.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="dplyr.html#cb78-1"></a><span class="op">&gt;</span><span class="st"> </span>df &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(df1,df2)</span>
<span id="cb78-2"><a href="dplyr.html#cb78-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">mean</span>(df<span class="op">$</span>age)</span>
<span id="cb78-3"><a href="dplyr.html#cb78-3"></a>[<span class="dv">1</span>] <span class="fl">29.66667</span></span></code></pre></div></li>
<li><p>Assembler <code>df</code> avec <code>df3</code> en utilisant <strong>full_join</strong>.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="dplyr.html#cb79-1"></a><span class="op">&gt;</span><span class="st"> </span>a1 &lt;-<span class="st"> </span><span class="kw">full_join</span>(df,df3,<span class="dt">by=</span><span class="kw">c</span>(<span class="st">&quot;name&quot;</span>=<span class="st">&quot;name1&quot;</span>))</span>
<span id="cb79-2"><a href="dplyr.html#cb79-2"></a><span class="op">&gt;</span><span class="st"> </span>a1</span>
<span id="cb79-3"><a href="dplyr.html#cb79-3"></a><span class="co"># A tibble: 7 x 3</span></span>
<span id="cb79-4"><a href="dplyr.html#cb79-4"></a>  name     age  size</span>
<span id="cb79-5"><a href="dplyr.html#cb79-5"></a>  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb79-6"><a href="dplyr.html#cb79-6"></a><span class="dv">1</span> Mary      <span class="dv">18</span>   <span class="dv">178</span></span>
<span id="cb79-7"><a href="dplyr.html#cb79-7"></a><span class="dv">2</span> Peter     <span class="dv">25</span>   <span class="dv">154</span></span>
<span id="cb79-8"><a href="dplyr.html#cb79-8"></a><span class="dv">3</span> John      <span class="dv">21</span>   <span class="dv">134</span></span>
<span id="cb79-9"><a href="dplyr.html#cb79-9"></a><span class="dv">4</span> July      <span class="dv">43</span>   <span class="dv">182</span></span>
<span id="cb79-10"><a href="dplyr.html#cb79-10"></a><span class="dv">5</span> Zac       <span class="dv">23</span>    <span class="ot">NA</span></span>
<span id="cb79-11"><a href="dplyr.html#cb79-11"></a><span class="dv">6</span> Julian    <span class="dv">48</span>    <span class="ot">NA</span></span>
<span id="cb79-12"><a href="dplyr.html#cb79-12"></a><span class="dv">7</span> stef      <span class="ot">NA</span>   <span class="dv">142</span></span></code></pre></div></li>
<li><p>Faire la même chose avec <strong>inner_join</strong>.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="dplyr.html#cb80-1"></a><span class="op">&gt;</span><span class="st"> </span>a2 &lt;-<span class="st"> </span><span class="kw">inner_join</span>(df,df3,<span class="dt">by=</span><span class="kw">c</span>(<span class="st">&quot;name&quot;</span>=<span class="st">&quot;name1&quot;</span>))</span>
<span id="cb80-2"><a href="dplyr.html#cb80-2"></a><span class="op">&gt;</span><span class="st"> </span>a2</span>
<span id="cb80-3"><a href="dplyr.html#cb80-3"></a><span class="co"># A tibble: 4 x 3</span></span>
<span id="cb80-4"><a href="dplyr.html#cb80-4"></a>  name    age  size</span>
<span id="cb80-5"><a href="dplyr.html#cb80-5"></a>  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb80-6"><a href="dplyr.html#cb80-6"></a><span class="dv">1</span> Mary     <span class="dv">18</span>   <span class="dv">178</span></span>
<span id="cb80-7"><a href="dplyr.html#cb80-7"></a><span class="dv">2</span> Peter    <span class="dv">25</span>   <span class="dv">154</span></span>
<span id="cb80-8"><a href="dplyr.html#cb80-8"></a><span class="dv">3</span> John     <span class="dv">21</span>   <span class="dv">134</span></span>
<span id="cb80-9"><a href="dplyr.html#cb80-9"></a><span class="dv">4</span> July     <span class="dv">43</span>   <span class="dv">182</span></span></code></pre></div></li>
<li><p>Expliquer les différences entre <strong>full_join</strong> et <strong>inner_join</strong>.</p>
<p><strong>inner_join</strong> retient uniquement les individus pour lesquels <code>age</code> <strong>et</strong> <code>size</code> ont été observés. <strong>full_join</strong> garde tous les individus, des <strong>NA</strong> sont ajoutées lorsque la variable n’est pas observée.</p></li>
</ol>
</div>
<div id="le-package-dplyr" class="section level2">
<h2><span class="header-section-number">3.2</span> Le package dplyr</h2>
<p><strong>dplyr</strong> est un package du <code>tidyverse</code> qui permet de faciliter la manipulation des données. Il propose une <strong>syntaxe claire</strong> (basée sur une <code>grammaire</code>) pour manipuler les données. On pourra trouver des informations <a href="https://spark.rstudio.com/dplyr.html">ici</a> ou sur la <a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">cheatsheet</a>.</p>
<p>Nous avons vu quelques opérations standards pour manipuler les données. Par exemple, on peut obtenir les <strong>Longitude</strong> et <strong>Latitude</strong> des piscines ayant une <em>Longitude</em> supérieure à 153 avec</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="dplyr.html#cb81-1"></a><span class="op">&gt;</span><span class="st"> </span>piscines[piscines<span class="op">$</span>Longitude<span class="op">&gt;</span><span class="dv">153</span>,<span class="kw">c</span>(<span class="st">&quot;Longitude&quot;</span>,<span class="st">&quot;Latitude&quot;</span>)]</span>
<span id="cb81-2"><a href="dplyr.html#cb81-2"></a><span class="co"># A tibble: 16 x 2</span></span>
<span id="cb81-3"><a href="dplyr.html#cb81-3"></a>   Longitude Latitude</span>
<span id="cb81-4"><a href="dplyr.html#cb81-4"></a>       <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb81-5"><a href="dplyr.html#cb81-5"></a><span class="st"> </span><span class="dv">1</span>      <span class="fl">153.</span>    <span class="fl">-27.6</span></span>
<span id="cb81-6"><a href="dplyr.html#cb81-6"></a> <span class="dv">2</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb81-7"><a href="dplyr.html#cb81-7"></a> <span class="dv">3</span>      <span class="fl">153.</span>    <span class="fl">-27.4</span></span>
<span id="cb81-8"><a href="dplyr.html#cb81-8"></a> <span class="dv">4</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb81-9"><a href="dplyr.html#cb81-9"></a> <span class="dv">5</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb81-10"><a href="dplyr.html#cb81-10"></a> <span class="dv">6</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb81-11"><a href="dplyr.html#cb81-11"></a> <span class="dv">7</span>      <span class="fl">153.</span>    <span class="fl">-27.6</span></span>
<span id="cb81-12"><a href="dplyr.html#cb81-12"></a> <span class="dv">8</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb81-13"><a href="dplyr.html#cb81-13"></a> <span class="dv">9</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb81-14"><a href="dplyr.html#cb81-14"></a><span class="dv">10</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb81-15"><a href="dplyr.html#cb81-15"></a><span class="dv">11</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb81-16"><a href="dplyr.html#cb81-16"></a><span class="dv">12</span>      <span class="fl">153.</span>    <span class="fl">-27.4</span></span>
<span id="cb81-17"><a href="dplyr.html#cb81-17"></a><span class="dv">13</span>      <span class="fl">153.</span>    <span class="fl">-27.6</span></span>
<span id="cb81-18"><a href="dplyr.html#cb81-18"></a><span class="dv">14</span>      <span class="fl">153.</span>    <span class="fl">-27.3</span></span>
<span id="cb81-19"><a href="dplyr.html#cb81-19"></a><span class="dv">15</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb81-20"><a href="dplyr.html#cb81-20"></a><span class="dv">16</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span></code></pre></div>
<p><strong>dplyr</strong> propose de faire la même chose avec une syntaxe plus claire</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="dplyr.html#cb82-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(tidyverse) <span class="co">#ou library(dplyr)</span></span>
<span id="cb82-2"><a href="dplyr.html#cb82-2"></a><span class="op">&gt;</span><span class="st"> </span>piscines <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(Longitude,Latitude) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Longitude<span class="op">&gt;</span><span class="dv">153</span>)</span>
<span id="cb82-3"><a href="dplyr.html#cb82-3"></a><span class="co"># A tibble: 16 x 2</span></span>
<span id="cb82-4"><a href="dplyr.html#cb82-4"></a>   Longitude Latitude</span>
<span id="cb82-5"><a href="dplyr.html#cb82-5"></a>       <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb82-6"><a href="dplyr.html#cb82-6"></a><span class="st"> </span><span class="dv">1</span>      <span class="fl">153.</span>    <span class="fl">-27.6</span></span>
<span id="cb82-7"><a href="dplyr.html#cb82-7"></a> <span class="dv">2</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb82-8"><a href="dplyr.html#cb82-8"></a> <span class="dv">3</span>      <span class="fl">153.</span>    <span class="fl">-27.4</span></span>
<span id="cb82-9"><a href="dplyr.html#cb82-9"></a> <span class="dv">4</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb82-10"><a href="dplyr.html#cb82-10"></a> <span class="dv">5</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb82-11"><a href="dplyr.html#cb82-11"></a> <span class="dv">6</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb82-12"><a href="dplyr.html#cb82-12"></a> <span class="dv">7</span>      <span class="fl">153.</span>    <span class="fl">-27.6</span></span>
<span id="cb82-13"><a href="dplyr.html#cb82-13"></a> <span class="dv">8</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb82-14"><a href="dplyr.html#cb82-14"></a> <span class="dv">9</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb82-15"><a href="dplyr.html#cb82-15"></a><span class="dv">10</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb82-16"><a href="dplyr.html#cb82-16"></a><span class="dv">11</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb82-17"><a href="dplyr.html#cb82-17"></a><span class="dv">12</span>      <span class="fl">153.</span>    <span class="fl">-27.4</span></span>
<span id="cb82-18"><a href="dplyr.html#cb82-18"></a><span class="dv">13</span>      <span class="fl">153.</span>    <span class="fl">-27.6</span></span>
<span id="cb82-19"><a href="dplyr.html#cb82-19"></a><span class="dv">14</span>      <span class="fl">153.</span>    <span class="fl">-27.3</span></span>
<span id="cb82-20"><a href="dplyr.html#cb82-20"></a><span class="dv">15</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb82-21"><a href="dplyr.html#cb82-21"></a><span class="dv">16</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span></code></pre></div>
<p>Le code est plus efficace et facile à lire.</p>
<p><strong>dplyr</strong> propose une <code>grammaire</code> dont les principaux <code>verbes</code> sont :</p>
<ul>
<li><strong>select()</strong> : selectionner des colonnes (variables)</li>
<li><strong>filter()</strong> : filter des lignes (individus)</li>
<li><strong>arrange()</strong> : ordonner des lignes</li>
<li><strong>mutate()</strong> : créer des nouvelles colonnes (nouvelles variables)</li>
<li><strong>summarise()</strong> : calculer des résumés numériques (ou résumés statistiques)</li>
<li><strong>group_by()</strong> : effectuer des opérations pour des groupes d’individus</li>
</ul>
<p>Nous les présentons dans la partie suivante.</p>
<div id="les-principaux-verbres-dplyr" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Les principaux verbres dplyr</h3>
<div id="le-verbe-select" class="section level4 unnumbered">
<h4>Le verbe <code>select()</code></h4>
<p>Il permet de sélectionner des variables (colonnes) :</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="dplyr.html#cb83-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">select</span>(df, VAR1, VAR2, ...)</span></code></pre></div>
<p>Par exemple,</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="dplyr.html#cb84-1"></a><span class="op">&gt;</span><span class="st"> </span>coord &lt;-<span class="st"> </span><span class="kw">select</span>(piscines, Latitude, Longitude)</span>
<span id="cb84-2"><a href="dplyr.html#cb84-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(piscines, <span class="dt">n=</span><span class="dv">2</span>)</span>
<span id="cb84-3"><a href="dplyr.html#cb84-3"></a><span class="co"># A tibble: 2 x 4</span></span>
<span id="cb84-4"><a href="dplyr.html#cb84-4"></a>  Name                       Address                          Latitude Longitude</span>
<span id="cb84-5"><a href="dplyr.html#cb84-5"></a>  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">                      </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">                               </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb84-6"><a href="dplyr.html#cb84-6"></a><span class="dv">1</span> Acacia Ridge Leisure Cent… <span class="dv">1391</span> Beaudesert Road, Acacia Ri…    <span class="fl">-27.6</span>      <span class="fl">153.</span></span>
<span id="cb84-7"><a href="dplyr.html#cb84-7"></a><span class="dv">2</span> Bellbowrie Pool            Sugarwood Street, Bellbowrie        <span class="fl">-27.6</span>      <span class="fl">153.</span></span>
<span id="cb84-8"><a href="dplyr.html#cb84-8"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(coord, <span class="dt">n=</span><span class="dv">2</span>)</span>
<span id="cb84-9"><a href="dplyr.html#cb84-9"></a><span class="co"># A tibble: 2 x 2</span></span>
<span id="cb84-10"><a href="dplyr.html#cb84-10"></a>  Latitude Longitude</span>
<span id="cb84-11"><a href="dplyr.html#cb84-11"></a>     <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb84-12"><a href="dplyr.html#cb84-12"></a><span class="dv">1</span>    <span class="fl">-27.6</span>      <span class="fl">153.</span></span>
<span id="cb84-13"><a href="dplyr.html#cb84-13"></a><span class="dv">2</span>    <span class="fl">-27.6</span>      <span class="fl">153.</span></span></code></pre></div>
<p>On peut utiliser les <strong>helper functions</strong> (<strong>begins_with</strong>, <strong>end_with</strong>, <strong>contains</strong>, <strong>matches</strong>) pour des sélections plus précises basées sur le nom des variables.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="dplyr.html#cb85-1"></a><span class="op">&gt;</span><span class="st"> </span>coord &lt;-<span class="st"> </span><span class="kw">select</span>(piscines, <span class="kw">ends_with</span>(<span class="st">&quot;tude&quot;</span>))</span>
<span id="cb85-2"><a href="dplyr.html#cb85-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(coord, <span class="dt">n=</span><span class="dv">2</span>)</span>
<span id="cb85-3"><a href="dplyr.html#cb85-3"></a><span class="co"># A tibble: 2 x 2</span></span>
<span id="cb85-4"><a href="dplyr.html#cb85-4"></a>  Latitude Longitude</span>
<span id="cb85-5"><a href="dplyr.html#cb85-5"></a>     <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb85-6"><a href="dplyr.html#cb85-6"></a><span class="dv">1</span>    <span class="fl">-27.6</span>      <span class="fl">153.</span></span>
<span id="cb85-7"><a href="dplyr.html#cb85-7"></a><span class="dv">2</span>    <span class="fl">-27.6</span>      <span class="fl">153.</span></span></code></pre></div>
</div>
<div id="le-verbe-mutate" class="section level4 unnumbered">
<h4>Le verbe <code>mutate()</code></h4>
<p>Il permet de créer des nouvelles variables</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="dplyr.html#cb86-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">mutate</span>(df, <span class="dt">NEW.VAR =</span> <span class="kw">expression</span>(VAR1, VAR2, ...))</span></code></pre></div>
<p>Par exemple</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="dplyr.html#cb87-1"></a><span class="op">&gt;</span><span class="st"> </span>df &lt;-<span class="st"> </span><span class="kw">mutate</span>(piscines, <span class="dt">phrase=</span><span class="kw">paste</span>(<span class="st">&quot;Swimming pool&quot;</span>, Name, <span class="st">&quot;is located at the address&quot;</span>, Address))</span>
<span id="cb87-2"><a href="dplyr.html#cb87-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">select</span>(df,phrase)</span>
<span id="cb87-3"><a href="dplyr.html#cb87-3"></a><span class="co"># A tibble: 20 x 1</span></span>
<span id="cb87-4"><a href="dplyr.html#cb87-4"></a>   phrase                                                                       </span>
<span id="cb87-5"><a href="dplyr.html#cb87-5"></a>   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">                                                                        </span></span>
<span id="cb87-6"><a href="dplyr.html#cb87-6"></a><span class="st"> </span><span class="dv">1</span> Swimming pool Acacia Ridge Leisure Centre is located at the address <span class="dv">1391</span> Bea…</span>
<span id="cb87-7"><a href="dplyr.html#cb87-7"></a> <span class="dv">2</span> Swimming pool Bellbowrie Pool is located at the address Sugarwood Street, Be…</span>
<span id="cb87-8"><a href="dplyr.html#cb87-8"></a> <span class="dv">3</span> Swimming pool Carole Park is located at the address Cnr Boundary Road and Wa…</span>
<span id="cb87-9"><a href="dplyr.html#cb87-9"></a> <span class="dv">4</span> Swimming pool Centenary <span class="kw">Pool</span> (inner City) is located at the address <span class="dv">400</span> Greg…</span>
<span id="cb87-10"><a href="dplyr.html#cb87-10"></a> <span class="dv">5</span> Swimming pool Chermside Pool is located at the address <span class="dv">375</span> Hamilton Road, Ch…</span>
<span id="cb87-11"><a href="dplyr.html#cb87-11"></a> <span class="dv">6</span> Swimming pool Colmslie <span class="kw">Pool</span> (Morningside) is located at the address <span class="dv">400</span> Lytt…</span>
<span id="cb87-12"><a href="dplyr.html#cb87-12"></a> <span class="dv">7</span> Swimming pool Spring Hill <span class="kw">Baths</span> (inner City) is located at the address <span class="dv">14</span> To…</span>
<span id="cb87-13"><a href="dplyr.html#cb87-13"></a> <span class="dv">8</span> Swimming pool Dunlop Park <span class="kw">Pool</span> (Corinda) is located at the address <span class="dv">794</span> Oxley…</span>
<span id="cb87-14"><a href="dplyr.html#cb87-14"></a> <span class="dv">9</span> Swimming pool Fortitude Valley Pool is located at the address <span class="dv">432</span> Wickham St…</span>
<span id="cb87-15"><a href="dplyr.html#cb87-15"></a><span class="dv">10</span> Swimming pool Hibiscus Sports <span class="kw">Complex</span> (upper MtGravatt) is located at the ad…</span>
<span id="cb87-16"><a href="dplyr.html#cb87-16"></a><span class="dv">11</span> Swimming pool Ithaca <span class="kw">Pool</span> ( Paddington) is located at the address <span class="dv">131</span> Caxton…</span>
<span id="cb87-17"><a href="dplyr.html#cb87-17"></a><span class="dv">12</span> Swimming pool Jindalee Pool is located at the address <span class="dv">11</span> Yallambee Road, Jin…</span>
<span id="cb87-18"><a href="dplyr.html#cb87-18"></a><span class="dv">13</span> Swimming pool Manly Pool is located at the address <span class="dv">1</span> Fairlead Crescent, Manly</span>
<span id="cb87-19"><a href="dplyr.html#cb87-19"></a><span class="dv">14</span> Swimming pool Mt Gravatt East Aquatic Centre is located at the address Cnr w…</span>
<span id="cb87-20"><a href="dplyr.html#cb87-20"></a><span class="dv">15</span> Swimming pool Musgrave Park <span class="kw">Pool</span> (South Brisbane) is located at the address …</span>
<span id="cb87-21"><a href="dplyr.html#cb87-21"></a><span class="dv">16</span> Swimming pool Newmarket Pool is located at the address <span class="dv">71</span> Alderson Stret, Ne…</span>
<span id="cb87-22"><a href="dplyr.html#cb87-22"></a><span class="dv">17</span> Swimming pool Runcorn Pool is located at the address <span class="dv">37</span> Bonemill Road, Runco…</span>
<span id="cb87-23"><a href="dplyr.html#cb87-23"></a><span class="dv">18</span> Swimming pool Sandgate Pool is located at the address <span class="dv">231</span> Flinders Parade, S…</span>
<span id="cb87-24"><a href="dplyr.html#cb87-24"></a><span class="dv">19</span> Swimming pool Langlands Parks <span class="kw">Pool</span> (Stones Corner) is located at the address…</span>
<span id="cb87-25"><a href="dplyr.html#cb87-25"></a><span class="dv">20</span> Swimming pool Yeronga Park Pool is located at the address <span class="dv">81</span> School Road, Ye…</span></code></pre></div>
<p>On peut également créer plusieurs variables avec un seul <strong>mutate</strong> :</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="dplyr.html#cb88-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">mutate</span>(piscines,</span>
<span id="cb88-2"><a href="dplyr.html#cb88-2"></a><span class="op">+</span><span class="st">        </span><span class="dt">phrase =</span> <span class="kw">paste</span>(<span class="st">&quot;Swimming pool&quot;</span>, Name, <span class="st">&quot;is located at the address&quot;</span>, Address),</span>
<span id="cb88-3"><a href="dplyr.html#cb88-3"></a><span class="op">+</span><span class="st">        </span><span class="dt">unused =</span> Longitude <span class="op">+</span><span class="st"> </span>Latitude</span>
<span id="cb88-4"><a href="dplyr.html#cb88-4"></a><span class="op">+</span><span class="st"> </span>)</span>
<span id="cb88-5"><a href="dplyr.html#cb88-5"></a><span class="co"># A tibble: 20 x 6</span></span>
<span id="cb88-6"><a href="dplyr.html#cb88-6"></a>   Name          Address         Latitude Longitude phrase                unused</span>
<span id="cb88-7"><a href="dplyr.html#cb88-7"></a>   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">         </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">              </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">                  </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb88-8"><a href="dplyr.html#cb88-8"></a><span class="st"> </span><span class="dv">1</span> Acacia Ridge… <span class="dv">1391</span> Beaudeser…    <span class="fl">-27.6</span>      <span class="fl">153.</span> Swimming pool Acacia…   <span class="fl">125.</span></span>
<span id="cb88-9"><a href="dplyr.html#cb88-9"></a> <span class="dv">2</span> Bellbowrie P… Sugarwood Stre…    <span class="fl">-27.6</span>      <span class="fl">153.</span> Swimming pool Bellbo…   <span class="fl">125.</span></span>
<span id="cb88-10"><a href="dplyr.html#cb88-10"></a> <span class="dv">3</span> Carole Park   Cnr Boundary R…    <span class="fl">-27.6</span>      <span class="fl">153.</span> Swimming pool Carole…   <span class="fl">125.</span></span>
<span id="cb88-11"><a href="dplyr.html#cb88-11"></a> <span class="dv">4</span> Centenary Po… <span class="dv">400</span> Gregory Te…    <span class="fl">-27.5</span>      <span class="fl">153.</span> Swimming pool Centen…   <span class="fl">126.</span></span>
<span id="cb88-12"><a href="dplyr.html#cb88-12"></a> <span class="dv">5</span> Chermside Po… <span class="dv">375</span> Hamilton R…    <span class="fl">-27.4</span>      <span class="fl">153.</span> Swimming pool Cherms…   <span class="fl">126.</span></span>
<span id="cb88-13"><a href="dplyr.html#cb88-13"></a> <span class="dv">6</span> Colmslie Poo… <span class="dv">400</span> Lytton Roa…    <span class="fl">-27.5</span>      <span class="fl">153.</span> Swimming pool Colmsl…   <span class="fl">126.</span></span>
<span id="cb88-14"><a href="dplyr.html#cb88-14"></a> <span class="dv">7</span> Spring Hill … <span class="dv">14</span> Torrington …    <span class="fl">-27.5</span>      <span class="fl">153.</span> Swimming pool Spring…   <span class="fl">126.</span></span>
<span id="cb88-15"><a href="dplyr.html#cb88-15"></a> <span class="dv">8</span> Dunlop Park … <span class="dv">794</span> Oxley Road…    <span class="fl">-27.5</span>      <span class="fl">153.</span> Swimming pool Dunlop…   <span class="fl">125.</span></span>
<span id="cb88-16"><a href="dplyr.html#cb88-16"></a> <span class="dv">9</span> Fortitude Va… <span class="dv">432</span> Wickham St…    <span class="fl">-27.5</span>      <span class="fl">153.</span> Swimming pool Fortit…   <span class="fl">126.</span></span>
<span id="cb88-17"><a href="dplyr.html#cb88-17"></a><span class="dv">10</span> Hibiscus Spo… <span class="dv">90</span> Klumpp Road…    <span class="fl">-27.6</span>      <span class="fl">153.</span> Swimming pool Hibisc…   <span class="fl">126.</span></span>
<span id="cb88-18"><a href="dplyr.html#cb88-18"></a><span class="dv">11</span> Ithaca Pool … <span class="dv">131</span> Caxton Str…    <span class="fl">-27.5</span>      <span class="fl">153.</span> Swimming pool Ithaca…   <span class="fl">126.</span></span>
<span id="cb88-19"><a href="dplyr.html#cb88-19"></a><span class="dv">12</span> Jindalee Pool <span class="dv">11</span> Yallambee R…    <span class="fl">-27.5</span>      <span class="fl">153.</span> Swimming pool Jindal…   <span class="fl">125.</span></span>
<span id="cb88-20"><a href="dplyr.html#cb88-20"></a><span class="dv">13</span> Manly Pool    <span class="dv">1</span> Fairlead Cre…    <span class="fl">-27.5</span>      <span class="fl">153.</span> Swimming pool Manly …   <span class="fl">126.</span></span>
<span id="cb88-21"><a href="dplyr.html#cb88-21"></a><span class="dv">14</span> Mt Gravatt E… Cnr wecker Roa…    <span class="fl">-27.5</span>      <span class="fl">153.</span> Swimming pool Mt Gra…   <span class="fl">126.</span></span>
<span id="cb88-22"><a href="dplyr.html#cb88-22"></a><span class="dv">15</span> Musgrave Par… <span class="dv">100</span> Edmonstone…    <span class="fl">-27.5</span>      <span class="fl">153.</span> Swimming pool Musgra…   <span class="fl">126.</span></span>
<span id="cb88-23"><a href="dplyr.html#cb88-23"></a><span class="dv">16</span> Newmarket Po… <span class="dv">71</span> Alderson St…    <span class="fl">-27.4</span>      <span class="fl">153.</span> Swimming pool Newmar…   <span class="fl">126.</span></span>
<span id="cb88-24"><a href="dplyr.html#cb88-24"></a><span class="dv">17</span> Runcorn Pool  <span class="dv">37</span> Bonemill Ro…    <span class="fl">-27.6</span>      <span class="fl">153.</span> Swimming pool Runcor…   <span class="fl">125.</span></span>
<span id="cb88-25"><a href="dplyr.html#cb88-25"></a><span class="dv">18</span> Sandgate Pool <span class="dv">231</span> Flinders P…    <span class="fl">-27.3</span>      <span class="fl">153.</span> Swimming pool Sandga…   <span class="fl">126.</span></span>
<span id="cb88-26"><a href="dplyr.html#cb88-26"></a><span class="dv">19</span> Langlands Pa… <span class="dv">5</span> Panitya Stre…    <span class="fl">-27.5</span>      <span class="fl">153.</span> Swimming pool Langla…   <span class="fl">126.</span></span>
<span id="cb88-27"><a href="dplyr.html#cb88-27"></a><span class="dv">20</span> Yeronga Park… <span class="dv">81</span> School Road…    <span class="fl">-27.5</span>      <span class="fl">153.</span> Swimming pool Yerong…   <span class="fl">125.</span></span></code></pre></div>
</div>
<div id="le-verbe-filter" class="section level4 unnumbered">
<h4>Le verbe <code>filter()</code></h4>
<p>Il permet de sélectionner des individus (lignes) :</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="dplyr.html#cb89-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">filter</span>(df, TEST)</span></code></pre></div>
<p>Par exemple</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="dplyr.html#cb90-1"></a><span class="op">&gt;</span><span class="st"> </span>p1 &lt;-<span class="st"> </span><span class="kw">filter</span>(piscines, Longitude<span class="op">&gt;</span><span class="fl">153.02</span>)</span>
<span id="cb90-2"><a href="dplyr.html#cb90-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">select</span>(p1,Longitude)</span>
<span id="cb90-3"><a href="dplyr.html#cb90-3"></a><span class="co"># A tibble: 12 x 1</span></span>
<span id="cb90-4"><a href="dplyr.html#cb90-4"></a>   Longitude</span>
<span id="cb90-5"><a href="dplyr.html#cb90-5"></a>       <span class="op">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb90-6"><a href="dplyr.html#cb90-6"></a><span class="st"> </span><span class="dv">1</span>      <span class="fl">153.</span></span>
<span id="cb90-7"><a href="dplyr.html#cb90-7"></a> <span class="dv">2</span>      <span class="fl">153.</span></span>
<span id="cb90-8"><a href="dplyr.html#cb90-8"></a> <span class="dv">3</span>      <span class="fl">153.</span></span>
<span id="cb90-9"><a href="dplyr.html#cb90-9"></a> <span class="dv">4</span>      <span class="fl">153.</span></span>
<span id="cb90-10"><a href="dplyr.html#cb90-10"></a> <span class="dv">5</span>      <span class="fl">153.</span></span>
<span id="cb90-11"><a href="dplyr.html#cb90-11"></a> <span class="dv">6</span>      <span class="fl">153.</span></span>
<span id="cb90-12"><a href="dplyr.html#cb90-12"></a> <span class="dv">7</span>      <span class="fl">153.</span></span>
<span id="cb90-13"><a href="dplyr.html#cb90-13"></a> <span class="dv">8</span>      <span class="fl">153.</span></span>
<span id="cb90-14"><a href="dplyr.html#cb90-14"></a> <span class="dv">9</span>      <span class="fl">153.</span></span>
<span id="cb90-15"><a href="dplyr.html#cb90-15"></a><span class="dv">10</span>      <span class="fl">153.</span></span>
<span id="cb90-16"><a href="dplyr.html#cb90-16"></a><span class="dv">11</span>      <span class="fl">153.</span></span>
<span id="cb90-17"><a href="dplyr.html#cb90-17"></a><span class="dv">12</span>      <span class="fl">153.</span></span></code></pre></div>
<p>ou (on sélectionne les piscines dont le nom contient <strong>Pool</strong>)</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="dplyr.html#cb91-1"></a><span class="op">&gt;</span><span class="st"> </span>df &lt;-<span class="st"> </span><span class="kw">filter</span>(piscines, <span class="op">!</span><span class="kw">grepl</span>(<span class="st">&quot;Pool&quot;</span>, Name))</span>
<span id="cb91-2"><a href="dplyr.html#cb91-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">select</span>(df,Name)</span>
<span id="cb91-3"><a href="dplyr.html#cb91-3"></a><span class="co"># A tibble: 5 x 1</span></span>
<span id="cb91-4"><a href="dplyr.html#cb91-4"></a>  Name                                     </span>
<span id="cb91-5"><a href="dplyr.html#cb91-5"></a>  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">                                    </span></span>
<span id="cb91-6"><a href="dplyr.html#cb91-6"></a><span class="dv">1</span> Acacia Ridge Leisure Centre              </span>
<span id="cb91-7"><a href="dplyr.html#cb91-7"></a><span class="dv">2</span> Carole Park                              </span>
<span id="cb91-8"><a href="dplyr.html#cb91-8"></a><span class="dv">3</span> Spring Hill <span class="kw">Baths</span> (inner City)           </span>
<span id="cb91-9"><a href="dplyr.html#cb91-9"></a><span class="dv">4</span> Hibiscus Sports <span class="kw">Complex</span> (upper MtGravatt)</span>
<span id="cb91-10"><a href="dplyr.html#cb91-10"></a><span class="dv">5</span> Mt Gravatt East Aquatic Centre           </span></code></pre></div>
<p>ou (on sélectionne les piscines avec une longitude plus grande que 153.02 <strong>ou</strong> une latitude plus petite que -27.488)</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="dplyr.html#cb92-1"></a><span class="op">&gt;</span><span class="st"> </span>p2 &lt;-<span class="st"> </span><span class="kw">filter</span>(piscines, Longitude<span class="op">&gt;</span><span class="fl">153.02</span> <span class="op">|</span><span class="st"> </span>Latitude <span class="op">&lt;</span><span class="st"> </span><span class="fl">-27.488</span>)</span>
<span id="cb92-2"><a href="dplyr.html#cb92-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">select</span>(p2, Longitude, Latitude)</span>
<span id="cb92-3"><a href="dplyr.html#cb92-3"></a><span class="co"># A tibble: 17 x 2</span></span>
<span id="cb92-4"><a href="dplyr.html#cb92-4"></a>   Longitude Latitude</span>
<span id="cb92-5"><a href="dplyr.html#cb92-5"></a>       <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb92-6"><a href="dplyr.html#cb92-6"></a><span class="st"> </span><span class="dv">1</span>      <span class="fl">153.</span>    <span class="fl">-27.6</span></span>
<span id="cb92-7"><a href="dplyr.html#cb92-7"></a> <span class="dv">2</span>      <span class="fl">153.</span>    <span class="fl">-27.6</span></span>
<span id="cb92-8"><a href="dplyr.html#cb92-8"></a> <span class="dv">3</span>      <span class="fl">153.</span>    <span class="fl">-27.6</span></span>
<span id="cb92-9"><a href="dplyr.html#cb92-9"></a> <span class="dv">4</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb92-10"><a href="dplyr.html#cb92-10"></a> <span class="dv">5</span>      <span class="fl">153.</span>    <span class="fl">-27.4</span></span>
<span id="cb92-11"><a href="dplyr.html#cb92-11"></a> <span class="dv">6</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb92-12"><a href="dplyr.html#cb92-12"></a> <span class="dv">7</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb92-13"><a href="dplyr.html#cb92-13"></a> <span class="dv">8</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb92-14"><a href="dplyr.html#cb92-14"></a> <span class="dv">9</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb92-15"><a href="dplyr.html#cb92-15"></a><span class="dv">10</span>      <span class="fl">153.</span>    <span class="fl">-27.6</span></span>
<span id="cb92-16"><a href="dplyr.html#cb92-16"></a><span class="dv">11</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb92-17"><a href="dplyr.html#cb92-17"></a><span class="dv">12</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb92-18"><a href="dplyr.html#cb92-18"></a><span class="dv">13</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb92-19"><a href="dplyr.html#cb92-19"></a><span class="dv">14</span>      <span class="fl">153.</span>    <span class="fl">-27.6</span></span>
<span id="cb92-20"><a href="dplyr.html#cb92-20"></a><span class="dv">15</span>      <span class="fl">153.</span>    <span class="fl">-27.3</span></span>
<span id="cb92-21"><a href="dplyr.html#cb92-21"></a><span class="dv">16</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span>
<span id="cb92-22"><a href="dplyr.html#cb92-22"></a><span class="dv">17</span>      <span class="fl">153.</span>    <span class="fl">-27.5</span></span></code></pre></div>
<p>On peut également utiliser la fonction <strong>slice</strong> pour choisir des individus à partir de leurs indices :</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="dplyr.html#cb93-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">slice</span>(piscines,<span class="dv">5</span><span class="op">:</span><span class="dv">8</span>)</span>
<span id="cb93-2"><a href="dplyr.html#cb93-2"></a><span class="co"># A tibble: 4 x 4</span></span>
<span id="cb93-3"><a href="dplyr.html#cb93-3"></a>  Name                         Address                        Latitude Longitude</span>
<span id="cb93-4"><a href="dplyr.html#cb93-4"></a>  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">                        </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">                             </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb93-5"><a href="dplyr.html#cb93-5"></a><span class="dv">1</span> Chermside Pool               <span class="dv">375</span> Hamilton Road, Chermside      <span class="fl">-27.4</span>      <span class="fl">153.</span></span>
<span id="cb93-6"><a href="dplyr.html#cb93-6"></a><span class="dv">2</span> Colmslie <span class="kw">Pool</span> (Morningside)  <span class="dv">400</span> Lytton Road, Morningside      <span class="fl">-27.5</span>      <span class="fl">153.</span></span>
<span id="cb93-7"><a href="dplyr.html#cb93-7"></a><span class="dv">3</span> Spring Hill <span class="kw">Baths</span> (inner Ci… <span class="dv">14</span> Torrington Street, Springh…    <span class="fl">-27.5</span>      <span class="fl">153.</span></span>
<span id="cb93-8"><a href="dplyr.html#cb93-8"></a><span class="dv">4</span> Dunlop Park <span class="kw">Pool</span> (Corinda)   <span class="dv">794</span> Oxley Road, Corinda           <span class="fl">-27.5</span>      <span class="fl">153.</span></span></code></pre></div>
</div>
<div id="le-verbe-arrange" class="section level4 unnumbered">
<h4>Le verbe <code>arrange()</code></h4>
<p>Il permet d’ordonner les individus en fonction d’une variable</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="dplyr.html#cb94-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">arrange</span>(df, VAR) <span class="co">#tri croissant</span></span></code></pre></div>
<p>ou</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="dplyr.html#cb95-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">arrange</span>(df, <span class="kw">desc</span>(VAR)) <span class="co">#tri décroissant</span></span></code></pre></div>
<p>Par exemple</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="dplyr.html#cb96-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">arrange</span>(piscines, Longitude)</span>
<span id="cb96-2"><a href="dplyr.html#cb96-2"></a><span class="co"># A tibble: 20 x 4</span></span>
<span id="cb96-3"><a href="dplyr.html#cb96-3"></a>   Name                         Address                       Latitude Longitude</span>
<span id="cb96-4"><a href="dplyr.html#cb96-4"></a>   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">                        </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">                            </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb96-5"><a href="dplyr.html#cb96-5"></a><span class="st"> </span><span class="dv">1</span> Bellbowrie Pool              Sugarwood Street, Bellbowrie     <span class="fl">-27.6</span>      <span class="fl">153.</span></span>
<span id="cb96-6"><a href="dplyr.html#cb96-6"></a> <span class="dv">2</span> Carole Park                  Cnr Boundary Road and Waterf…    <span class="fl">-27.6</span>      <span class="fl">153.</span></span>
<span id="cb96-7"><a href="dplyr.html#cb96-7"></a> <span class="dv">3</span> Jindalee Pool                <span class="dv">11</span> Yallambee Road, Jindalee      <span class="fl">-27.5</span>      <span class="fl">153.</span></span>
<span id="cb96-8"><a href="dplyr.html#cb96-8"></a> <span class="dv">4</span> Dunlop Park <span class="kw">Pool</span> (Corinda)   <span class="dv">794</span> Oxley Road, Corinda          <span class="fl">-27.5</span>      <span class="fl">153.</span></span>
<span id="cb96-9"><a href="dplyr.html#cb96-9"></a> <span class="dv">5</span> Newmarket Pool               <span class="dv">71</span> Alderson Stret, Newmarket     <span class="fl">-27.4</span>      <span class="fl">153.</span></span>
<span id="cb96-10"><a href="dplyr.html#cb96-10"></a> <span class="dv">6</span> Ithaca <span class="kw">Pool</span> ( Paddington)    <span class="dv">131</span> Caxton Street, Paddington    <span class="fl">-27.5</span>      <span class="fl">153.</span></span>
<span id="cb96-11"><a href="dplyr.html#cb96-11"></a> <span class="dv">7</span> Musgrave Park <span class="kw">Pool</span> (South B… <span class="dv">100</span> Edmonstone Street, South…    <span class="fl">-27.5</span>      <span class="fl">153.</span></span>
<span id="cb96-12"><a href="dplyr.html#cb96-12"></a> <span class="dv">8</span> Yeronga Park Pool            <span class="dv">81</span> School Road, Yeronga          <span class="fl">-27.5</span>      <span class="fl">153.</span></span>
<span id="cb96-13"><a href="dplyr.html#cb96-13"></a> <span class="dv">9</span> Spring Hill <span class="kw">Baths</span> (inner Ci… <span class="dv">14</span> Torrington Street, Spring…    <span class="fl">-27.5</span>      <span class="fl">153.</span></span>
<span id="cb96-14"><a href="dplyr.html#cb96-14"></a><span class="dv">10</span> Centenary <span class="kw">Pool</span> (inner City)  <span class="dv">400</span> Gregory Terrace, Spring …    <span class="fl">-27.5</span>      <span class="fl">153.</span></span>
<span id="cb96-15"><a href="dplyr.html#cb96-15"></a><span class="dv">11</span> Acacia Ridge Leisure Centre  <span class="dv">1391</span> Beaudesert Road, Acacia…    <span class="fl">-27.6</span>      <span class="fl">153.</span></span>
<span id="cb96-16"><a href="dplyr.html#cb96-16"></a><span class="dv">12</span> Chermside Pool               <span class="dv">375</span> Hamilton Road, Chermside     <span class="fl">-27.4</span>      <span class="fl">153.</span></span>
<span id="cb96-17"><a href="dplyr.html#cb96-17"></a><span class="dv">13</span> Fortitude Valley Pool        <span class="dv">432</span> Wickham Street, Fortitud…    <span class="fl">-27.5</span>      <span class="fl">153.</span></span>
<span id="cb96-18"><a href="dplyr.html#cb96-18"></a><span class="dv">14</span> Langlands Parks <span class="kw">Pool</span> (Stone… <span class="dv">5</span> Panitya Street, Stones Cor…    <span class="fl">-27.5</span>      <span class="fl">153.</span></span>
<span id="cb96-19"><a href="dplyr.html#cb96-19"></a><span class="dv">15</span> Sandgate Pool                <span class="dv">231</span> Flinders Parade, Sandgate    <span class="fl">-27.3</span>      <span class="fl">153.</span></span>
<span id="cb96-20"><a href="dplyr.html#cb96-20"></a><span class="dv">16</span> Hibiscus Sports <span class="kw">Complex</span> (up… <span class="dv">90</span> Klumpp Road, Upper Mount …    <span class="fl">-27.6</span>      <span class="fl">153.</span></span>
<span id="cb96-21"><a href="dplyr.html#cb96-21"></a><span class="dv">17</span> Runcorn Pool                 <span class="dv">37</span> Bonemill Road, Runcorn        <span class="fl">-27.6</span>      <span class="fl">153.</span></span>
<span id="cb96-22"><a href="dplyr.html#cb96-22"></a><span class="dv">18</span> Colmslie <span class="kw">Pool</span> (Morningside)  <span class="dv">400</span> Lytton Road, Morningside     <span class="fl">-27.5</span>      <span class="fl">153.</span></span>
<span id="cb96-23"><a href="dplyr.html#cb96-23"></a><span class="dv">19</span> Mt Gravatt East Aquatic Cen… Cnr wecker Road and Newnham …    <span class="fl">-27.5</span>      <span class="fl">153.</span></span>
<span id="cb96-24"><a href="dplyr.html#cb96-24"></a><span class="dv">20</span> Manly Pool                   <span class="dv">1</span> Fairlead Crescent, Manly       <span class="fl">-27.5</span>      <span class="fl">153.</span></span></code></pre></div>
<p>ou</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="dplyr.html#cb97-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">arrange</span>(piscines, <span class="kw">desc</span>(Longitude))</span>
<span id="cb97-2"><a href="dplyr.html#cb97-2"></a><span class="co"># A tibble: 20 x 4</span></span>
<span id="cb97-3"><a href="dplyr.html#cb97-3"></a>   Name                         Address                       Latitude Longitude</span>
<span id="cb97-4"><a href="dplyr.html#cb97-4"></a>   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">                        </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">                            </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb97-5"><a href="dplyr.html#cb97-5"></a><span class="st"> </span><span class="dv">1</span> Manly Pool                   <span class="dv">1</span> Fairlead Crescent, Manly       <span class="fl">-27.5</span>      <span class="fl">153.</span></span>
<span id="cb97-6"><a href="dplyr.html#cb97-6"></a> <span class="dv">2</span> Mt Gravatt East Aquatic Cen… Cnr wecker Road and Newnham …    <span class="fl">-27.5</span>      <span class="fl">153.</span></span>
<span id="cb97-7"><a href="dplyr.html#cb97-7"></a> <span class="dv">3</span> Colmslie <span class="kw">Pool</span> (Morningside)  <span class="dv">400</span> Lytton Road, Morningside     <span class="fl">-27.5</span>      <span class="fl">153.</span></span>
<span id="cb97-8"><a href="dplyr.html#cb97-8"></a> <span class="dv">4</span> Runcorn Pool                 <span class="dv">37</span> Bonemill Road, Runcorn        <span class="fl">-27.6</span>      <span class="fl">153.</span></span>
<span id="cb97-9"><a href="dplyr.html#cb97-9"></a> <span class="dv">5</span> Hibiscus Sports <span class="kw">Complex</span> (up… <span class="dv">90</span> Klumpp Road, Upper Mount …    <span class="fl">-27.6</span>      <span class="fl">153.</span></span>
<span id="cb97-10"><a href="dplyr.html#cb97-10"></a> <span class="dv">6</span> Sandgate Pool                <span class="dv">231</span> Flinders Parade, Sandgate    <span class="fl">-27.3</span>      <span class="fl">153.</span></span>
<span id="cb97-11"><a href="dplyr.html#cb97-11"></a> <span class="dv">7</span> Langlands Parks <span class="kw">Pool</span> (Stone… <span class="dv">5</span> Panitya Street, Stones Cor…    <span class="fl">-27.5</span>      <span class="fl">153.</span></span>
<span id="cb97-12"><a href="dplyr.html#cb97-12"></a> <span class="dv">8</span> Fortitude Valley Pool        <span class="dv">432</span> Wickham Street, Fortitud…    <span class="fl">-27.5</span>      <span class="fl">153.</span></span>
<span id="cb97-13"><a href="dplyr.html#cb97-13"></a> <span class="dv">9</span> Chermside Pool               <span class="dv">375</span> Hamilton Road, Chermside     <span class="fl">-27.4</span>      <span class="fl">153.</span></span>
<span id="cb97-14"><a href="dplyr.html#cb97-14"></a><span class="dv">10</span> Acacia Ridge Leisure Centre  <span class="dv">1391</span> Beaudesert Road, Acacia…    <span class="fl">-27.6</span>      <span class="fl">153.</span></span>
<span id="cb97-15"><a href="dplyr.html#cb97-15"></a><span class="dv">11</span> Centenary <span class="kw">Pool</span> (inner City)  <span class="dv">400</span> Gregory Terrace, Spring …    <span class="fl">-27.5</span>      <span class="fl">153.</span></span>
<span id="cb97-16"><a href="dplyr.html#cb97-16"></a><span class="dv">12</span> Spring Hill <span class="kw">Baths</span> (inner Ci… <span class="dv">14</span> Torrington Street, Spring…    <span class="fl">-27.5</span>      <span class="fl">153.</span></span>
<span id="cb97-17"><a href="dplyr.html#cb97-17"></a><span class="dv">13</span> Yeronga Park Pool            <span class="dv">81</span> School Road, Yeronga          <span class="fl">-27.5</span>      <span class="fl">153.</span></span>
<span id="cb97-18"><a href="dplyr.html#cb97-18"></a><span class="dv">14</span> Musgrave Park <span class="kw">Pool</span> (South B… <span class="dv">100</span> Edmonstone Street, South…    <span class="fl">-27.5</span>      <span class="fl">153.</span></span>
<span id="cb97-19"><a href="dplyr.html#cb97-19"></a><span class="dv">15</span> Ithaca <span class="kw">Pool</span> ( Paddington)    <span class="dv">131</span> Caxton Street, Paddington    <span class="fl">-27.5</span>      <span class="fl">153.</span></span>
<span id="cb97-20"><a href="dplyr.html#cb97-20"></a><span class="dv">16</span> Newmarket Pool               <span class="dv">71</span> Alderson Stret, Newmarket     <span class="fl">-27.4</span>      <span class="fl">153.</span></span>
<span id="cb97-21"><a href="dplyr.html#cb97-21"></a><span class="dv">17</span> Dunlop Park <span class="kw">Pool</span> (Corinda)   <span class="dv">794</span> Oxley Road, Corinda          <span class="fl">-27.5</span>      <span class="fl">153.</span></span>
<span id="cb97-22"><a href="dplyr.html#cb97-22"></a><span class="dv">18</span> Jindalee Pool                <span class="dv">11</span> Yallambee Road, Jindalee      <span class="fl">-27.5</span>      <span class="fl">153.</span></span>
<span id="cb97-23"><a href="dplyr.html#cb97-23"></a><span class="dv">19</span> Carole Park                  Cnr Boundary Road and Waterf…    <span class="fl">-27.6</span>      <span class="fl">153.</span></span>
<span id="cb97-24"><a href="dplyr.html#cb97-24"></a><span class="dv">20</span> Bellbowrie Pool              Sugarwood Street, Bellbowrie     <span class="fl">-27.6</span>      <span class="fl">153.</span></span></code></pre></div>
</div>
</div>
<div id="les-verbes-summarize-et-groub_by" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Les verbes <code>summarize</code> et <code>groub_by</code></h3>
<p>Les verbes précédents permettent de manipuler les données en sélectionnant des individus ou variables essentiellement. Ces deux nouveaux verbes vont permettre de calculer des indicateurs statistiques sur un jeu de données.</p>
<div id="le-verbe-summarize-ou-summarise" class="section level4 unnumbered">
<h4>Le verbe <code>summarize</code> (ou <code>summarise</code>)</h4>
<p>Il permet de créer des nouveaux jeux de données qui contiennent des résumés statistiques du jeu de données initial comme la moyenne, variance, médiane de variables. Par exemple</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="dplyr.html#cb98-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summarise</span>(piscines,</span>
<span id="cb98-2"><a href="dplyr.html#cb98-2"></a><span class="op">+</span><span class="st">           </span><span class="dt">mean_long =</span> <span class="kw">mean</span>(Longitude),</span>
<span id="cb98-3"><a href="dplyr.html#cb98-3"></a><span class="op">+</span><span class="st">           </span><span class="dt">med_lat =</span> <span class="kw">median</span>(Latitude),</span>
<span id="cb98-4"><a href="dplyr.html#cb98-4"></a><span class="op">+</span><span class="st">           </span><span class="dt">min_lat =</span> <span class="kw">min</span>(Latitude),</span>
<span id="cb98-5"><a href="dplyr.html#cb98-5"></a><span class="op">+</span><span class="st">           </span><span class="dt">sum_long =</span> <span class="kw">sum</span>(Longitude)</span>
<span id="cb98-6"><a href="dplyr.html#cb98-6"></a><span class="op">+</span><span class="st"> </span>)</span>
<span id="cb98-7"><a href="dplyr.html#cb98-7"></a><span class="co"># A tibble: 1 x 4</span></span>
<span id="cb98-8"><a href="dplyr.html#cb98-8"></a>  mean_long med_lat min_lat sum_long</span>
<span id="cb98-9"><a href="dplyr.html#cb98-9"></a>      <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb98-10"><a href="dplyr.html#cb98-10"></a><span class="dv">1</span>      <span class="fl">153.</span>   <span class="fl">-27.5</span>   <span class="fl">-27.6</span>    <span class="fl">3061.</span></span></code></pre></div>
<p><strong>dplyr</strong> contient également les fonction suivantes (souvent utilisées en statistique) :</p>
<ol style="list-style-type: decimal">
<li><code>n()</code> : nombre de lignes (individus d’un jeu de données).</li>
<li><code>n_distinct()</code> : nombre d’éléments distincts dans un vecteur.</li>
<li><code>fisrt()</code> et <code>last()</code> : premier et dernier élément d’un vecteur.</li>
</ol>
<p>Par exemple, on obtient le nombre de piscines dans le jeu de données, et la longitude de la dernière piscine avec</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="dplyr.html#cb99-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summarise</span>(piscines,<span class="kw">n</span>())</span>
<span id="cb99-2"><a href="dplyr.html#cb99-2"></a><span class="co"># A tibble: 1 x 1</span></span>
<span id="cb99-3"><a href="dplyr.html#cb99-3"></a>  <span class="st">`</span><span class="dt">n()</span><span class="st">`</span></span>
<span id="cb99-4"><a href="dplyr.html#cb99-4"></a>  <span class="op">&lt;</span>int<span class="op">&gt;</span></span>
<span id="cb99-5"><a href="dplyr.html#cb99-5"></a><span class="dv">1</span>    <span class="dv">20</span></span>
<span id="cb99-6"><a href="dplyr.html#cb99-6"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summarise</span>(piscines,<span class="kw">last</span>(Longitude))</span>
<span id="cb99-7"><a href="dplyr.html#cb99-7"></a><span class="co"># A tibble: 1 x 1</span></span>
<span id="cb99-8"><a href="dplyr.html#cb99-8"></a>  <span class="st">`</span><span class="dt">last(Longitude)</span><span class="st">`</span></span>
<span id="cb99-9"><a href="dplyr.html#cb99-9"></a>              <span class="op">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb99-10"><a href="dplyr.html#cb99-10"></a><span class="dv">1</span>              <span class="fl">153.</span></span></code></pre></div>
<p>On peut aussi utiliser <strong>summarise_all</strong>, <strong>summarise_at</strong> qui vont permettre de répéter les mêmes opérations sur plusieurs variables. Par exemple</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="dplyr.html#cb100-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summarise_at</span>(piscines,<span class="dv">3</span><span class="op">:</span><span class="dv">4</span>,mean)</span>
<span id="cb100-2"><a href="dplyr.html#cb100-2"></a><span class="co"># A tibble: 1 x 2</span></span>
<span id="cb100-3"><a href="dplyr.html#cb100-3"></a>  Latitude Longitude</span>
<span id="cb100-4"><a href="dplyr.html#cb100-4"></a>     <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb100-5"><a href="dplyr.html#cb100-5"></a><span class="dv">1</span>    <span class="fl">-27.5</span>      <span class="fl">153.</span></span></code></pre></div>
</div>
<div id="regrouper-des-données-avec-group_by" class="section level4 unnumbered">
<h4>Regrouper des données avec ‘Group_by’</h4>
<p><strong>group_by</strong> permet d’appliquer une ou des opérations à des groupes de données (ou d’individus). Par exemple, imaginons que l’on souhaite calculer les longitudes moyennes des piscines scindées en 2 groupes : faible et large latitude. On créé d’abord une variable <strong>lat_dis</strong> qui permet d’identifier les latitudes (faible ou large) :</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="dplyr.html#cb101-1"></a><span class="op">&gt;</span><span class="st"> </span>lat_mean &lt;-<span class="st"> </span>piscines <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="kw">mean</span>(Latitude))</span>
<span id="cb101-2"><a href="dplyr.html#cb101-2"></a><span class="op">&gt;</span><span class="st"> </span>pisc1 &lt;-<span class="st"> </span>piscines <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">lat_dis=</span><span class="kw">factor</span>(Latitude<span class="op">&gt;</span><span class="kw">as.numeric</span>(lat_mean)))</span>
<span id="cb101-3"><a href="dplyr.html#cb101-3"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">levels</span>(pisc1<span class="op">$</span>lat_dis) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Low&quot;</span>,<span class="st">&quot;High&quot;</span>)</span></code></pre></div>
<p>Il reste maintenant à utiliser <strong>group_by</strong> pour obtenir les longitudes moyennes des 2 groupes :</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="dplyr.html#cb102-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summarise</span>(<span class="kw">group_by</span>(pisc1,lat_dis),<span class="dt">mean_long=</span><span class="kw">mean</span>(Longitude))</span>
<span id="cb102-2"><a href="dplyr.html#cb102-2"></a><span class="co"># A tibble: 2 x 2</span></span>
<span id="cb102-3"><a href="dplyr.html#cb102-3"></a>  lat_dis mean_long</span>
<span id="cb102-4"><a href="dplyr.html#cb102-4"></a>  <span class="op">&lt;</span>fct<span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb102-5"><a href="dplyr.html#cb102-5"></a><span class="dv">1</span> Low          <span class="fl">153.</span></span>
<span id="cb102-6"><a href="dplyr.html#cb102-6"></a><span class="dv">2</span> High         <span class="fl">153.</span></span></code></pre></div>
</div>
</div>
<div id="assembler-des-verbes-avec-lopérateur-de-chainage" class="section level3">
<h3><span class="header-section-number">3.2.3</span> Assembler des verbes avec l’opérateur de chainage <code>%&gt;%</code></h3>
<p>Un des principaux intérêts de <strong>dplyr</strong> est bien entendu d’utiliser plusieurs verbes pour arriver au résultat souhaité. C’est ce qui est fait plus haut et nous observons que la syntaxe n’est pas facile à lire. Le package propose un <strong>opérateur de chainage</strong> ou <strong>pipe opérateur</strong> qui permet de rentre cette syntaxe plus lisible. Cet opérateur consiste à décomposer le code étape par étape et à relier ces étapes par le symbole <code>%&gt;%</code>. On peut par exemple réécrire l’exemple précédent avec :</p>
<ol style="list-style-type: decimal">
<li><p>Le jeu de données</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="dplyr.html#cb103-1"></a><span class="op">&gt;</span><span class="st"> </span>pisc1</span></code></pre></div></li>
<li><p>Étape <code>group_by</code></p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="dplyr.html#cb104-1"></a><span class="op">&gt;</span><span class="st"> </span>pisc1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(lat_dis)</span></code></pre></div></li>
<li><p>Étape <code>summarise</code></p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="dplyr.html#cb105-1"></a><span class="op">&gt;</span><span class="st"> </span>pisc1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(lat_dis) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="dt">mean_long=</span><span class="kw">mean</span>(Longitude))</span>
<span id="cb105-2"><a href="dplyr.html#cb105-2"></a><span class="co"># A tibble: 2 x 2</span></span>
<span id="cb105-3"><a href="dplyr.html#cb105-3"></a>  lat_dis mean_long</span>
<span id="cb105-4"><a href="dplyr.html#cb105-4"></a>  <span class="op">&lt;</span>fct<span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb105-5"><a href="dplyr.html#cb105-5"></a><span class="dv">1</span> Low          <span class="fl">153.</span></span>
<span id="cb105-6"><a href="dplyr.html#cb105-6"></a><span class="dv">2</span> High         <span class="fl">153.</span></span></code></pre></div>
<p>qui donne le résultat souhaité.</p></li>
</ol>
<p>Cet opérateur peut être utilisé pour toutes les fonctions <strong>R</strong>. Il revient à considérer comme premier argument du terme à droite du pipe le terme à gauche de ce dernier. Par exemple</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="dplyr.html#cb106-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">mean</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</span>
<span id="cb106-2"><a href="dplyr.html#cb106-2"></a>[<span class="dv">1</span>] <span class="fl">5.5</span></span>
<span id="cb106-3"><a href="dplyr.html#cb106-3"></a><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span> <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mean</span>()</span>
<span id="cb106-4"><a href="dplyr.html#cb106-4"></a>[<span class="dv">1</span>] <span class="fl">5.5</span></span></code></pre></div>
<p>Il est recommandé d’utiliser cet opérateur lorsque on chaîne les verbes <strong>dplyr</strong>, la syntaxe est beaucoup plus claire.</p>
</div>
<div id="quelques-exercices" class="section level3">
<h3><span class="header-section-number">3.2.4</span> Quelques exercices</h3>

<div class="exercise">
<span id="exr:exo-dplyr-iris" class="exercise"><strong>Exercice 3.3  (Dplyr sur les iris de Fisher)  </strong></span>
</div>

<p>On considère le jeu de données <strong>iris</strong></p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="dplyr.html#cb107-1"></a><span class="op">&gt;</span><span class="st"> </span>iris &lt;-<span class="st"> </span>iris <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as_tibble</span>()</span></code></pre></div>
<p>Répondre aux questions suivantes en utilisant les verbes <strong>dplyr</strong> et l’opérateur <code>%&gt;%</code>.</p>
<ol style="list-style-type: decimal">
<li><p>Sélectionner les variables <code>Petal.Width</code> et <code>Species</code>.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="dplyr.html#cb108-1"></a><span class="op">&gt;</span><span class="st"> </span>iris <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(Petal.Width,Species)</span>
<span id="cb108-2"><a href="dplyr.html#cb108-2"></a><span class="co"># A tibble: 150 x 2</span></span>
<span id="cb108-3"><a href="dplyr.html#cb108-3"></a>   Petal.Width Species</span>
<span id="cb108-4"><a href="dplyr.html#cb108-4"></a>         <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>fct<span class="op">&gt;</span><span class="st">  </span></span>
<span id="cb108-5"><a href="dplyr.html#cb108-5"></a><span class="st"> </span><span class="dv">1</span>         <span class="fl">0.2</span> setosa </span>
<span id="cb108-6"><a href="dplyr.html#cb108-6"></a> <span class="dv">2</span>         <span class="fl">0.2</span> setosa </span>
<span id="cb108-7"><a href="dplyr.html#cb108-7"></a> <span class="dv">3</span>         <span class="fl">0.2</span> setosa </span>
<span id="cb108-8"><a href="dplyr.html#cb108-8"></a> <span class="dv">4</span>         <span class="fl">0.2</span> setosa </span>
<span id="cb108-9"><a href="dplyr.html#cb108-9"></a> <span class="dv">5</span>         <span class="fl">0.2</span> setosa </span>
<span id="cb108-10"><a href="dplyr.html#cb108-10"></a> <span class="dv">6</span>         <span class="fl">0.4</span> setosa </span>
<span id="cb108-11"><a href="dplyr.html#cb108-11"></a> <span class="dv">7</span>         <span class="fl">0.3</span> setosa </span>
<span id="cb108-12"><a href="dplyr.html#cb108-12"></a> <span class="dv">8</span>         <span class="fl">0.2</span> setosa </span>
<span id="cb108-13"><a href="dplyr.html#cb108-13"></a> <span class="dv">9</span>         <span class="fl">0.2</span> setosa </span>
<span id="cb108-14"><a href="dplyr.html#cb108-14"></a><span class="dv">10</span>         <span class="fl">0.1</span> setosa </span>
<span id="cb108-15"><a href="dplyr.html#cb108-15"></a><span class="co"># … with 140 more rows</span></span></code></pre></div></li>
<li><p>Construire une table qui contient uniquement les iris d’espèce <code>versicolor</code> ou <code>virginica</code> (on pourra utiliser le symbole <code>|</code> pour la condition <strong>ou</strong>).</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="dplyr.html#cb109-1"></a><span class="op">&gt;</span><span class="st"> </span>iris <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Species<span class="op">==</span><span class="st">&quot;versicolor&quot;</span> <span class="op">|</span><span class="st"> </span>Species<span class="op">==</span><span class="st">&quot;virginica&quot;</span>)</span>
<span id="cb109-2"><a href="dplyr.html#cb109-2"></a><span class="co"># A tibble: 100 x 6</span></span>
<span id="cb109-3"><a href="dplyr.html#cb109-3"></a>   Sepal.Length Sepal.Width Petal.Length Petal.Width Species    sum.petal</span>
<span id="cb109-4"><a href="dplyr.html#cb109-4"></a>          <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">        </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>fct<span class="op">&gt;</span><span class="st">          </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb109-5"><a href="dplyr.html#cb109-5"></a><span class="st"> </span><span class="dv">1</span>          <span class="dv">7</span>           <span class="fl">3.2</span>          <span class="fl">4.7</span>         <span class="fl">1.4</span> versicolor      <span class="fl">6.1</span> </span>
<span id="cb109-6"><a href="dplyr.html#cb109-6"></a> <span class="dv">2</span>          <span class="fl">6.4</span>         <span class="fl">3.2</span>          <span class="fl">4.5</span>         <span class="fl">1.5</span> versicolor      <span class="dv">6</span>   </span>
<span id="cb109-7"><a href="dplyr.html#cb109-7"></a> <span class="dv">3</span>          <span class="fl">6.9</span>         <span class="fl">3.1</span>          <span class="fl">4.9</span>         <span class="fl">1.5</span> versicolor      <span class="fl">6.4</span> </span>
<span id="cb109-8"><a href="dplyr.html#cb109-8"></a> <span class="dv">4</span>          <span class="fl">5.5</span>         <span class="fl">2.3</span>          <span class="dv">4</span>           <span class="fl">1.3</span> versicolor      <span class="fl">5.3</span> </span>
<span id="cb109-9"><a href="dplyr.html#cb109-9"></a> <span class="dv">5</span>          <span class="fl">6.5</span>         <span class="fl">2.8</span>          <span class="fl">4.6</span>         <span class="fl">1.5</span> versicolor      <span class="fl">6.1</span> </span>
<span id="cb109-10"><a href="dplyr.html#cb109-10"></a> <span class="dv">6</span>          <span class="fl">5.7</span>         <span class="fl">2.8</span>          <span class="fl">4.5</span>         <span class="fl">1.3</span> versicolor      <span class="fl">5.8</span> </span>
<span id="cb109-11"><a href="dplyr.html#cb109-11"></a> <span class="dv">7</span>          <span class="fl">6.3</span>         <span class="fl">3.3</span>          <span class="fl">4.7</span>         <span class="fl">1.6</span> versicolor      <span class="fl">6.3</span> </span>
<span id="cb109-12"><a href="dplyr.html#cb109-12"></a> <span class="dv">8</span>          <span class="fl">4.9</span>         <span class="fl">2.4</span>          <span class="fl">3.3</span>         <span class="dv">1</span>   versicolor      <span class="fl">4.3</span> </span>
<span id="cb109-13"><a href="dplyr.html#cb109-13"></a> <span class="dv">9</span>          <span class="fl">6.6</span>         <span class="fl">2.9</span>          <span class="fl">4.6</span>         <span class="fl">1.3</span> versicolor      <span class="fl">5.90</span></span>
<span id="cb109-14"><a href="dplyr.html#cb109-14"></a><span class="dv">10</span>          <span class="fl">5.2</span>         <span class="fl">2.7</span>          <span class="fl">3.9</span>         <span class="fl">1.4</span> versicolor      <span class="fl">5.3</span> </span>
<span id="cb109-15"><a href="dplyr.html#cb109-15"></a><span class="co"># … with 90 more rows</span></span></code></pre></div></li>
<li><p>Calculer le nombre d’iris de l’espèce <code>setosa</code> en utilisant <strong>summarise</strong>.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="dplyr.html#cb110-1"></a><span class="op">&gt;</span><span class="st"> </span>iris <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Species<span class="op">==</span><span class="st">&quot;setosa&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="kw">n</span>())</span>
<span id="cb110-2"><a href="dplyr.html#cb110-2"></a><span class="co"># A tibble: 1 x 1</span></span>
<span id="cb110-3"><a href="dplyr.html#cb110-3"></a>  <span class="st">`</span><span class="dt">n()</span><span class="st">`</span></span>
<span id="cb110-4"><a href="dplyr.html#cb110-4"></a>  <span class="op">&lt;</span>int<span class="op">&gt;</span></span>
<span id="cb110-5"><a href="dplyr.html#cb110-5"></a><span class="dv">1</span>    <span class="dv">50</span></span></code></pre></div></li>
<li><p>Calculer la moyenne de la variable <code>Petal Width</code> pour les iris de l’espèce <code>versicolor</code>.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="dplyr.html#cb111-1"></a><span class="op">&gt;</span><span class="st"> </span>iris <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Species<span class="op">==</span><span class="st">&quot;versicolor&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb111-2"><a href="dplyr.html#cb111-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">summarise</span>(<span class="dt">Mean_PW=</span><span class="kw">mean</span>(Petal.Width))</span>
<span id="cb111-3"><a href="dplyr.html#cb111-3"></a><span class="co"># A tibble: 1 x 1</span></span>
<span id="cb111-4"><a href="dplyr.html#cb111-4"></a>  Mean_PW</span>
<span id="cb111-5"><a href="dplyr.html#cb111-5"></a>    <span class="op">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb111-6"><a href="dplyr.html#cb111-6"></a><span class="dv">1</span>    <span class="fl">1.33</span></span></code></pre></div></li>
<li><p>Ajouter dans le jeu de données la variable <code>Sum_Petal</code> qui correspond à la somme de <code>Petal.Width</code> et <code>Sepal.Width</code>.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="dplyr.html#cb112-1"></a><span class="op">&gt;</span><span class="st"> </span>iris1 &lt;-<span class="st"> </span>iris</span>
<span id="cb112-2"><a href="dplyr.html#cb112-2"></a><span class="op">&gt;</span><span class="st"> </span>iris1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">Sum_Petal=</span>Petal.Width<span class="op">+</span>Sepal.Width)</span>
<span id="cb112-3"><a href="dplyr.html#cb112-3"></a><span class="co"># A tibble: 150 x 7</span></span>
<span id="cb112-4"><a href="dplyr.html#cb112-4"></a>   Sepal.Length Sepal.Width Petal.Length Petal.Width Species sum.petal Sum_Petal</span>
<span id="cb112-5"><a href="dplyr.html#cb112-5"></a>          <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">        </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>fct<span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb112-6"><a href="dplyr.html#cb112-6"></a><span class="st"> </span><span class="dv">1</span>          <span class="fl">5.1</span>         <span class="fl">3.5</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span> setosa       <span class="fl">1.60</span>       <span class="fl">3.7</span></span>
<span id="cb112-7"><a href="dplyr.html#cb112-7"></a> <span class="dv">2</span>          <span class="fl">4.9</span>         <span class="dv">3</span>            <span class="fl">1.4</span>         <span class="fl">0.2</span> setosa       <span class="fl">1.60</span>       <span class="fl">3.2</span></span>
<span id="cb112-8"><a href="dplyr.html#cb112-8"></a> <span class="dv">3</span>          <span class="fl">4.7</span>         <span class="fl">3.2</span>          <span class="fl">1.3</span>         <span class="fl">0.2</span> setosa       <span class="fl">1.5</span>        <span class="fl">3.4</span></span>
<span id="cb112-9"><a href="dplyr.html#cb112-9"></a> <span class="dv">4</span>          <span class="fl">4.6</span>         <span class="fl">3.1</span>          <span class="fl">1.5</span>         <span class="fl">0.2</span> setosa       <span class="fl">1.7</span>        <span class="fl">3.3</span></span>
<span id="cb112-10"><a href="dplyr.html#cb112-10"></a> <span class="dv">5</span>          <span class="dv">5</span>           <span class="fl">3.6</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span> setosa       <span class="fl">1.60</span>       <span class="fl">3.8</span></span>
<span id="cb112-11"><a href="dplyr.html#cb112-11"></a> <span class="dv">6</span>          <span class="fl">5.4</span>         <span class="fl">3.9</span>          <span class="fl">1.7</span>         <span class="fl">0.4</span> setosa       <span class="fl">2.1</span>        <span class="fl">4.3</span></span>
<span id="cb112-12"><a href="dplyr.html#cb112-12"></a> <span class="dv">7</span>          <span class="fl">4.6</span>         <span class="fl">3.4</span>          <span class="fl">1.4</span>         <span class="fl">0.3</span> setosa       <span class="fl">1.7</span>        <span class="fl">3.7</span></span>
<span id="cb112-13"><a href="dplyr.html#cb112-13"></a> <span class="dv">8</span>          <span class="dv">5</span>           <span class="fl">3.4</span>          <span class="fl">1.5</span>         <span class="fl">0.2</span> setosa       <span class="fl">1.7</span>        <span class="fl">3.6</span></span>
<span id="cb112-14"><a href="dplyr.html#cb112-14"></a> <span class="dv">9</span>          <span class="fl">4.4</span>         <span class="fl">2.9</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span> setosa       <span class="fl">1.60</span>       <span class="fl">3.1</span></span>
<span id="cb112-15"><a href="dplyr.html#cb112-15"></a><span class="dv">10</span>          <span class="fl">4.9</span>         <span class="fl">3.1</span>          <span class="fl">1.5</span>         <span class="fl">0.1</span> setosa       <span class="fl">1.6</span>        <span class="fl">3.2</span></span>
<span id="cb112-16"><a href="dplyr.html#cb112-16"></a><span class="co"># … with 140 more rows</span></span></code></pre></div></li>
<li><p>Calculer la moyenne et la variance de la variable <code>Sepal.Length</code> pour chaque espèce (on pourra utiliser <strong>group_by</strong>).</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="dplyr.html#cb113-1"></a><span class="op">&gt;</span><span class="st"> </span>iris <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(Species) <span class="op">%&gt;%</span></span>
<span id="cb113-2"><a href="dplyr.html#cb113-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">summarise</span>(<span class="dt">mean_PL=</span><span class="kw">mean</span>(Petal.Length),<span class="dt">var_PL=</span><span class="kw">var</span>(Petal.Length)) <span class="op">%&gt;%</span></span>
<span id="cb113-3"><a href="dplyr.html#cb113-3"></a><span class="op">+</span><span class="st">   </span><span class="kw">mutate</span>(<span class="dt">var_PL=</span><span class="kw">round</span>(var_PL,<span class="dv">3</span>))</span>
<span id="cb113-4"><a href="dplyr.html#cb113-4"></a><span class="co"># A tibble: 3 x 3</span></span>
<span id="cb113-5"><a href="dplyr.html#cb113-5"></a>  Species    mean_PL var_PL</span>
<span id="cb113-6"><a href="dplyr.html#cb113-6"></a>  <span class="op">&lt;</span>fct<span class="op">&gt;</span><span class="st">        </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb113-7"><a href="dplyr.html#cb113-7"></a><span class="dv">1</span> setosa        <span class="fl">1.46</span>  <span class="fl">0.03</span> </span>
<span id="cb113-8"><a href="dplyr.html#cb113-8"></a><span class="dv">2</span> versicolor    <span class="fl">4.26</span>  <span class="fl">0.221</span></span>
<span id="cb113-9"><a href="dplyr.html#cb113-9"></a><span class="dv">3</span> virginica     <span class="fl">5.55</span>  <span class="fl">0.305</span></span></code></pre></div></li>
</ol>

<div class="exercise">
<span id="exr:exo-dplyr-hflights" class="exercise"><strong>Exercice 3.4  (Trafic aérien aux USA)  </strong></span>
</div>

<p>On considère la table <strong>hflights</strong> qui contient des informations sur les vols au départ des aéroports Houston airports IAH (George Bush Intercontinental) et HOU (Houston Hobby):</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="dplyr.html#cb114-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(hflights)</span>
<span id="cb114-2"><a href="dplyr.html#cb114-2"></a><span class="op">&gt;</span><span class="st"> </span>hflights &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(hflights)</span></code></pre></div>
<p>La variable <code>Unique Carrier</code> renseigne sur la compagnie du vol. On recode cette variable afin que la compagnie soit plus explicite :</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="dplyr.html#cb115-1"></a><span class="op">&gt;</span><span class="st"> </span>lut1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;AA&quot;</span> =<span class="st"> &quot;American&quot;</span>, <span class="st">&quot;AS&quot;</span> =<span class="st"> &quot;Alaska&quot;</span>, <span class="st">&quot;B6&quot;</span> =<span class="st"> &quot;JetBlue&quot;</span>, <span class="st">&quot;CO&quot;</span> =<span class="st"> &quot;Continental&quot;</span>,</span>
<span id="cb115-2"><a href="dplyr.html#cb115-2"></a><span class="op">+</span><span class="st">          &quot;DL&quot;</span> =<span class="st"> &quot;Delta&quot;</span>, <span class="st">&quot;OO&quot;</span> =<span class="st"> &quot;SkyWest&quot;</span>, <span class="st">&quot;UA&quot;</span> =<span class="st"> &quot;United&quot;</span>, <span class="st">&quot;US&quot;</span> =<span class="st"> &quot;US_Airways&quot;</span>, </span>
<span id="cb115-3"><a href="dplyr.html#cb115-3"></a><span class="op">+</span><span class="st">          &quot;WN&quot;</span> =<span class="st"> &quot;Southwest&quot;</span>, <span class="st">&quot;EV&quot;</span> =<span class="st"> &quot;Atlantic_Southeast&quot;</span>, <span class="st">&quot;F9&quot;</span> =<span class="st"> &quot;Frontier&quot;</span>, </span>
<span id="cb115-4"><a href="dplyr.html#cb115-4"></a><span class="op">+</span><span class="st">          &quot;FL&quot;</span> =<span class="st"> &quot;AirTran&quot;</span>, <span class="st">&quot;MQ&quot;</span> =<span class="st"> &quot;American_Eagle&quot;</span>, <span class="st">&quot;XE&quot;</span> =<span class="st"> &quot;ExpressJet&quot;</span>, <span class="st">&quot;YV&quot;</span> =<span class="st"> &quot;Mesa&quot;</span>)</span></code></pre></div>
<p>On fait de même pour la variable <code>CancellationCode</code> :</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="dplyr.html#cb116-1"></a><span class="op">&gt;</span><span class="st"> </span>lut2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;A&quot;</span> =<span class="st"> &quot;carrier&quot;</span>, <span class="st">&quot;B&quot;</span> =<span class="st"> &quot;weather&quot;</span>, <span class="st">&quot;C&quot;</span> =<span class="st"> &quot;FFA&quot;</span>, <span class="st">&quot;D&quot;</span> =<span class="st"> &quot;security&quot;</span>, <span class="st">&quot;E&quot;</span> =<span class="st"> &quot;not cancelled&quot;</span>)</span></code></pre></div>
<p>On effectue maintenant les changements dans la table pour obtenir une nouvelle version de <strong>hflights</strong> :</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="dplyr.html#cb117-1"></a><span class="op">&gt;</span><span class="st"> </span>hflights1 &lt;-<span class="st"> </span>hflights</span>
<span id="cb117-2"><a href="dplyr.html#cb117-2"></a><span class="op">&gt;</span><span class="st"> </span>hflights1<span class="op">$</span>UniqueCarrier &lt;-<span class="st"> </span>lut1[hflights1<span class="op">$</span>UniqueCarrier]</span>
<span id="cb117-3"><a href="dplyr.html#cb117-3"></a><span class="op">&gt;</span><span class="st"> </span>hflights1<span class="op">$</span>CancellationCode[hflights1<span class="op">$</span>CancellationCode<span class="op">==</span><span class="st">&quot;&quot;</span>] &lt;-<span class="st"> &quot;Z&quot;</span></span>
<span id="cb117-4"><a href="dplyr.html#cb117-4"></a><span class="op">&gt;</span><span class="st"> </span>hflights1<span class="op">$</span>CancellationCode &lt;-<span class="st"> </span>lut2[hflights1<span class="op">$</span>CancellationCode]</span></code></pre></div>
<p>A partir de maintenant, on travaille avec <strong>hflights1</strong>.</p>
<ol style="list-style-type: decimal">
<li><p>Sélectionner les variables qui se situent entre <code>Origin</code> et <code>Cancelled</code> de différentes façons.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="dplyr.html#cb118-1"></a><span class="op">&gt;</span><span class="st"> </span>ind &lt;-<span class="st"> </span><span class="kw">match</span>(<span class="kw">c</span>(<span class="st">&quot;Origin&quot;</span>,<span class="st">&quot;Cancelled&quot;</span>),<span class="kw">names</span>(hflights1))</span>
<span id="cb118-2"><a href="dplyr.html#cb118-2"></a><span class="op">&gt;</span><span class="st"> </span>hflights1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="kw">seq</span>(ind[<span class="dv">1</span>],ind[<span class="dv">2</span>]))</span>
<span id="cb118-3"><a href="dplyr.html#cb118-3"></a><span class="co"># A tibble: 227,496 x 6</span></span>
<span id="cb118-4"><a href="dplyr.html#cb118-4"></a>   Origin Dest  Distance TaxiIn TaxiOut Cancelled</span>
<span id="cb118-5"><a href="dplyr.html#cb118-5"></a>   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>int<span class="op">&gt;</span></span>
<span id="cb118-6"><a href="dplyr.html#cb118-6"></a><span class="st"> </span><span class="dv">1</span> IAH    DFW        <span class="dv">224</span>      <span class="dv">7</span>      <span class="dv">13</span>         <span class="dv">0</span></span>
<span id="cb118-7"><a href="dplyr.html#cb118-7"></a> <span class="dv">2</span> IAH    DFW        <span class="dv">224</span>      <span class="dv">6</span>       <span class="dv">9</span>         <span class="dv">0</span></span>
<span id="cb118-8"><a href="dplyr.html#cb118-8"></a> <span class="dv">3</span> IAH    DFW        <span class="dv">224</span>      <span class="dv">5</span>      <span class="dv">17</span>         <span class="dv">0</span></span>
<span id="cb118-9"><a href="dplyr.html#cb118-9"></a> <span class="dv">4</span> IAH    DFW        <span class="dv">224</span>      <span class="dv">9</span>      <span class="dv">22</span>         <span class="dv">0</span></span>
<span id="cb118-10"><a href="dplyr.html#cb118-10"></a> <span class="dv">5</span> IAH    DFW        <span class="dv">224</span>      <span class="dv">9</span>       <span class="dv">9</span>         <span class="dv">0</span></span>
<span id="cb118-11"><a href="dplyr.html#cb118-11"></a> <span class="dv">6</span> IAH    DFW        <span class="dv">224</span>      <span class="dv">6</span>      <span class="dv">13</span>         <span class="dv">0</span></span>
<span id="cb118-12"><a href="dplyr.html#cb118-12"></a> <span class="dv">7</span> IAH    DFW        <span class="dv">224</span>     <span class="dv">12</span>      <span class="dv">15</span>         <span class="dv">0</span></span>
<span id="cb118-13"><a href="dplyr.html#cb118-13"></a> <span class="dv">8</span> IAH    DFW        <span class="dv">224</span>      <span class="dv">7</span>      <span class="dv">12</span>         <span class="dv">0</span></span>
<span id="cb118-14"><a href="dplyr.html#cb118-14"></a> <span class="dv">9</span> IAH    DFW        <span class="dv">224</span>      <span class="dv">8</span>      <span class="dv">22</span>         <span class="dv">0</span></span>
<span id="cb118-15"><a href="dplyr.html#cb118-15"></a><span class="dv">10</span> IAH    DFW        <span class="dv">224</span>      <span class="dv">6</span>      <span class="dv">19</span>         <span class="dv">0</span></span>
<span id="cb118-16"><a href="dplyr.html#cb118-16"></a><span class="co"># … with 227,486 more rows</span></span>
<span id="cb118-17"><a href="dplyr.html#cb118-17"></a><span class="op">&gt;</span><span class="st"> </span><span class="co">#ou</span></span>
<span id="cb118-18"><a href="dplyr.html#cb118-18"></a><span class="er">&gt;</span><span class="st"> </span>hflights1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(Origin<span class="op">:</span>Cancelled) </span>
<span id="cb118-19"><a href="dplyr.html#cb118-19"></a><span class="co"># A tibble: 227,496 x 6</span></span>
<span id="cb118-20"><a href="dplyr.html#cb118-20"></a>   Origin Dest  Distance TaxiIn TaxiOut Cancelled</span>
<span id="cb118-21"><a href="dplyr.html#cb118-21"></a>   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>int<span class="op">&gt;</span></span>
<span id="cb118-22"><a href="dplyr.html#cb118-22"></a><span class="st"> </span><span class="dv">1</span> IAH    DFW        <span class="dv">224</span>      <span class="dv">7</span>      <span class="dv">13</span>         <span class="dv">0</span></span>
<span id="cb118-23"><a href="dplyr.html#cb118-23"></a> <span class="dv">2</span> IAH    DFW        <span class="dv">224</span>      <span class="dv">6</span>       <span class="dv">9</span>         <span class="dv">0</span></span>
<span id="cb118-24"><a href="dplyr.html#cb118-24"></a> <span class="dv">3</span> IAH    DFW        <span class="dv">224</span>      <span class="dv">5</span>      <span class="dv">17</span>         <span class="dv">0</span></span>
<span id="cb118-25"><a href="dplyr.html#cb118-25"></a> <span class="dv">4</span> IAH    DFW        <span class="dv">224</span>      <span class="dv">9</span>      <span class="dv">22</span>         <span class="dv">0</span></span>
<span id="cb118-26"><a href="dplyr.html#cb118-26"></a> <span class="dv">5</span> IAH    DFW        <span class="dv">224</span>      <span class="dv">9</span>       <span class="dv">9</span>         <span class="dv">0</span></span>
<span id="cb118-27"><a href="dplyr.html#cb118-27"></a> <span class="dv">6</span> IAH    DFW        <span class="dv">224</span>      <span class="dv">6</span>      <span class="dv">13</span>         <span class="dv">0</span></span>
<span id="cb118-28"><a href="dplyr.html#cb118-28"></a> <span class="dv">7</span> IAH    DFW        <span class="dv">224</span>     <span class="dv">12</span>      <span class="dv">15</span>         <span class="dv">0</span></span>
<span id="cb118-29"><a href="dplyr.html#cb118-29"></a> <span class="dv">8</span> IAH    DFW        <span class="dv">224</span>      <span class="dv">7</span>      <span class="dv">12</span>         <span class="dv">0</span></span>
<span id="cb118-30"><a href="dplyr.html#cb118-30"></a> <span class="dv">9</span> IAH    DFW        <span class="dv">224</span>      <span class="dv">8</span>      <span class="dv">22</span>         <span class="dv">0</span></span>
<span id="cb118-31"><a href="dplyr.html#cb118-31"></a><span class="dv">10</span> IAH    DFW        <span class="dv">224</span>      <span class="dv">6</span>      <span class="dv">19</span>         <span class="dv">0</span></span>
<span id="cb118-32"><a href="dplyr.html#cb118-32"></a><span class="co"># … with 227,486 more rows</span></span></code></pre></div></li>
<li><p>Sélectionner les variables <code>DepTime</code>, <code>ArrTime</code>, <code>ActualElapsedTime</code>, <code>AirTime</code>, <code>ArrDelay</code> and <code>DepDelay</code>. On pourra remarquer que toutes ces variables contiennent les chaines de caractère <code>Time</code> et <code>Delay</code> et utiliser la <em>helper function</em> <strong>contains()</strong>.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="dplyr.html#cb119-1"></a><span class="op">&gt;</span><span class="st"> </span>hflights1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="kw">contains</span>(<span class="st">&quot;Time&quot;</span>),<span class="kw">contains</span>(<span class="st">&quot;Delay&quot;</span>))</span>
<span id="cb119-2"><a href="dplyr.html#cb119-2"></a><span class="co"># A tibble: 227,496 x 6</span></span>
<span id="cb119-3"><a href="dplyr.html#cb119-3"></a>   DepTime ArrTime ActualElapsedTime AirTime ArrDelay DepDelay</span>
<span id="cb119-4"><a href="dplyr.html#cb119-4"></a>     <span class="op">&lt;</span>int<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">             </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>int<span class="op">&gt;</span></span>
<span id="cb119-5"><a href="dplyr.html#cb119-5"></a><span class="st"> </span><span class="dv">1</span>    <span class="dv">1400</span>    <span class="dv">1500</span>                <span class="dv">60</span>      <span class="dv">40</span>      <span class="dv">-10</span>        <span class="dv">0</span></span>
<span id="cb119-6"><a href="dplyr.html#cb119-6"></a> <span class="dv">2</span>    <span class="dv">1401</span>    <span class="dv">1501</span>                <span class="dv">60</span>      <span class="dv">45</span>       <span class="dv">-9</span>        <span class="dv">1</span></span>
<span id="cb119-7"><a href="dplyr.html#cb119-7"></a> <span class="dv">3</span>    <span class="dv">1352</span>    <span class="dv">1502</span>                <span class="dv">70</span>      <span class="dv">48</span>       <span class="dv">-8</span>       <span class="dv">-8</span></span>
<span id="cb119-8"><a href="dplyr.html#cb119-8"></a> <span class="dv">4</span>    <span class="dv">1403</span>    <span class="dv">1513</span>                <span class="dv">70</span>      <span class="dv">39</span>        <span class="dv">3</span>        <span class="dv">3</span></span>
<span id="cb119-9"><a href="dplyr.html#cb119-9"></a> <span class="dv">5</span>    <span class="dv">1405</span>    <span class="dv">1507</span>                <span class="dv">62</span>      <span class="dv">44</span>       <span class="dv">-3</span>        <span class="dv">5</span></span>
<span id="cb119-10"><a href="dplyr.html#cb119-10"></a> <span class="dv">6</span>    <span class="dv">1359</span>    <span class="dv">1503</span>                <span class="dv">64</span>      <span class="dv">45</span>       <span class="dv">-7</span>       <span class="dv">-1</span></span>
<span id="cb119-11"><a href="dplyr.html#cb119-11"></a> <span class="dv">7</span>    <span class="dv">1359</span>    <span class="dv">1509</span>                <span class="dv">70</span>      <span class="dv">43</span>       <span class="dv">-1</span>       <span class="dv">-1</span></span>
<span id="cb119-12"><a href="dplyr.html#cb119-12"></a> <span class="dv">8</span>    <span class="dv">1355</span>    <span class="dv">1454</span>                <span class="dv">59</span>      <span class="dv">40</span>      <span class="dv">-16</span>       <span class="dv">-5</span></span>
<span id="cb119-13"><a href="dplyr.html#cb119-13"></a> <span class="dv">9</span>    <span class="dv">1443</span>    <span class="dv">1554</span>                <span class="dv">71</span>      <span class="dv">41</span>       <span class="dv">44</span>       <span class="dv">43</span></span>
<span id="cb119-14"><a href="dplyr.html#cb119-14"></a><span class="dv">10</span>    <span class="dv">1443</span>    <span class="dv">1553</span>                <span class="dv">70</span>      <span class="dv">45</span>       <span class="dv">43</span>       <span class="dv">43</span></span>
<span id="cb119-15"><a href="dplyr.html#cb119-15"></a><span class="co"># … with 227,486 more rows</span></span></code></pre></div></li>
<li><p>Ajouter une variable <code>ActualGroundTime</code> qui correspond à <code>ActualElapsedTime</code> moins <code>AirTime</code>.</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="dplyr.html#cb120-1"></a><span class="op">&gt;</span><span class="st"> </span>hflights2 &lt;-<span class="st"> </span>hflights1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">ActualGroundTime=</span>ActualElapsedTime<span class="op">-</span>AirTime)</span>
<span id="cb120-2"><a href="dplyr.html#cb120-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(hflights2)</span>
<span id="cb120-3"><a href="dplyr.html#cb120-3"></a><span class="co"># A tibble: 6 x 22</span></span>
<span id="cb120-4"><a href="dplyr.html#cb120-4"></a>   Year Month DayofMonth DayOfWeek DepTime ArrTime UniqueCarrier FlightNum</span>
<span id="cb120-5"><a href="dplyr.html#cb120-5"></a>  <span class="op">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">      </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">             </span><span class="er">&lt;</span>int<span class="op">&gt;</span></span>
<span id="cb120-6"><a href="dplyr.html#cb120-6"></a><span class="dv">1</span>  <span class="dv">2011</span>     <span class="dv">1</span>          <span class="dv">1</span>         <span class="dv">6</span>    <span class="dv">1400</span>    <span class="dv">1500</span> American            <span class="dv">428</span></span>
<span id="cb120-7"><a href="dplyr.html#cb120-7"></a><span class="dv">2</span>  <span class="dv">2011</span>     <span class="dv">1</span>          <span class="dv">2</span>         <span class="dv">7</span>    <span class="dv">1401</span>    <span class="dv">1501</span> American            <span class="dv">428</span></span>
<span id="cb120-8"><a href="dplyr.html#cb120-8"></a><span class="dv">3</span>  <span class="dv">2011</span>     <span class="dv">1</span>          <span class="dv">3</span>         <span class="dv">1</span>    <span class="dv">1352</span>    <span class="dv">1502</span> American            <span class="dv">428</span></span>
<span id="cb120-9"><a href="dplyr.html#cb120-9"></a><span class="dv">4</span>  <span class="dv">2011</span>     <span class="dv">1</span>          <span class="dv">4</span>         <span class="dv">2</span>    <span class="dv">1403</span>    <span class="dv">1513</span> American            <span class="dv">428</span></span>
<span id="cb120-10"><a href="dplyr.html#cb120-10"></a><span class="dv">5</span>  <span class="dv">2011</span>     <span class="dv">1</span>          <span class="dv">5</span>         <span class="dv">3</span>    <span class="dv">1405</span>    <span class="dv">1507</span> American            <span class="dv">428</span></span>
<span id="cb120-11"><a href="dplyr.html#cb120-11"></a><span class="dv">6</span>  <span class="dv">2011</span>     <span class="dv">1</span>          <span class="dv">6</span>         <span class="dv">4</span>    <span class="dv">1359</span>    <span class="dv">1503</span> American            <span class="dv">428</span></span>
<span id="cb120-12"><a href="dplyr.html#cb120-12"></a><span class="co"># … with 14 more variables: TailNum &lt;chr&gt;, ActualElapsedTime &lt;int&gt;,</span></span>
<span id="cb120-13"><a href="dplyr.html#cb120-13"></a><span class="co">#   AirTime &lt;int&gt;, ArrDelay &lt;int&gt;, DepDelay &lt;int&gt;, Origin &lt;chr&gt;, Dest &lt;chr&gt;,</span></span>
<span id="cb120-14"><a href="dplyr.html#cb120-14"></a><span class="co">#   Distance &lt;int&gt;, TaxiIn &lt;int&gt;, TaxiOut &lt;int&gt;, Cancelled &lt;int&gt;,</span></span>
<span id="cb120-15"><a href="dplyr.html#cb120-15"></a><span class="co">#   CancellationCode &lt;chr&gt;, Diverted &lt;int&gt;, ActualGroundTime &lt;int&gt;</span></span></code></pre></div></li>
<li><p>Ajouter la variable <code>AverageSpeed</code> (<code>=Distance/AirTime</code>) et ordonner la table selon les valeurs décroissantes de cette variable.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="dplyr.html#cb121-1"></a><span class="op">&gt;</span><span class="st"> </span>hflights3 &lt;-<span class="st"> </span>hflights2 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb121-2"><a href="dplyr.html#cb121-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">mutate</span>(<span class="dt">AverageSpeed=</span>Distance<span class="op">/</span>AirTime) <span class="op">%&gt;%</span></span>
<span id="cb121-3"><a href="dplyr.html#cb121-3"></a><span class="op">+</span><span class="st">   </span><span class="kw">arrange</span>(<span class="kw">desc</span>(AverageSpeed))</span></code></pre></div></li>
<li><p>Sélectionner les vols à destination de <code>JFK</code>.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="dplyr.html#cb122-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">filter</span>(hflights3,Dest<span class="op">==</span><span class="st">&quot;JFK&quot;</span>)</span>
<span id="cb122-2"><a href="dplyr.html#cb122-2"></a><span class="co"># A tibble: 695 x 23</span></span>
<span id="cb122-3"><a href="dplyr.html#cb122-3"></a>    Year Month DayofMonth DayOfWeek DepTime ArrTime UniqueCarrier FlightNum</span>
<span id="cb122-4"><a href="dplyr.html#cb122-4"></a>   <span class="op">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">      </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">             </span><span class="er">&lt;</span>int<span class="op">&gt;</span></span>
<span id="cb122-5"><a href="dplyr.html#cb122-5"></a><span class="st"> </span><span class="dv">1</span>  <span class="dv">2011</span>     <span class="dv">2</span>          <span class="dv">7</span>         <span class="dv">1</span>     <span class="dv">659</span>    <span class="dv">1045</span> JetBlue             <span class="dv">620</span></span>
<span id="cb122-6"><a href="dplyr.html#cb122-6"></a> <span class="dv">2</span>  <span class="dv">2011</span>     <span class="dv">2</span>          <span class="dv">6</span>         <span class="dv">7</span>     <span class="dv">700</span>    <span class="dv">1045</span> JetBlue             <span class="dv">620</span></span>
<span id="cb122-7"><a href="dplyr.html#cb122-7"></a> <span class="dv">3</span>  <span class="dv">2011</span>     <span class="dv">2</span>          <span class="dv">5</span>         <span class="dv">6</span>     <span class="dv">700</span>    <span class="dv">1113</span> JetBlue             <span class="dv">620</span></span>
<span id="cb122-8"><a href="dplyr.html#cb122-8"></a> <span class="dv">4</span>  <span class="dv">2011</span>     <span class="dv">2</span>          <span class="dv">6</span>         <span class="dv">7</span>    <span class="dv">1529</span>    <span class="dv">1917</span> JetBlue             <span class="dv">624</span></span>
<span id="cb122-9"><a href="dplyr.html#cb122-9"></a> <span class="dv">5</span>  <span class="dv">2011</span>     <span class="dv">1</span>         <span class="dv">24</span>         <span class="dv">1</span>     <span class="dv">707</span>    <span class="dv">1059</span> JetBlue             <span class="dv">620</span></span>
<span id="cb122-10"><a href="dplyr.html#cb122-10"></a> <span class="dv">6</span>  <span class="dv">2011</span>     <span class="dv">1</span>         <span class="dv">24</span>         <span class="dv">1</span>    <span class="dv">1532</span>    <span class="dv">1923</span> JetBlue             <span class="dv">624</span></span>
<span id="cb122-11"><a href="dplyr.html#cb122-11"></a> <span class="dv">7</span>  <span class="dv">2011</span>     <span class="dv">2</span>         <span class="dv">12</span>         <span class="dv">6</span>     <span class="dv">659</span>    <span class="dv">1105</span> JetBlue             <span class="dv">620</span></span>
<span id="cb122-12"><a href="dplyr.html#cb122-12"></a> <span class="dv">8</span>  <span class="dv">2011</span>    <span class="dv">10</span>         <span class="dv">19</span>         <span class="dv">3</span>     <span class="dv">644</span>    <span class="dv">1043</span> JetBlue             <span class="dv">620</span></span>
<span id="cb122-13"><a href="dplyr.html#cb122-13"></a> <span class="dv">9</span>  <span class="dv">2011</span>    <span class="dv">11</span>         <span class="dv">10</span>         <span class="dv">4</span>    <span class="dv">1629</span>    <span class="dv">2027</span> JetBlue             <span class="dv">622</span></span>
<span id="cb122-14"><a href="dplyr.html#cb122-14"></a><span class="dv">10</span>  <span class="dv">2011</span>     <span class="dv">2</span>          <span class="dv">8</span>         <span class="dv">2</span>     <span class="dv">654</span>    <span class="dv">1049</span> JetBlue             <span class="dv">620</span></span>
<span id="cb122-15"><a href="dplyr.html#cb122-15"></a><span class="co"># … with 685 more rows, and 15 more variables: TailNum &lt;chr&gt;,</span></span>
<span id="cb122-16"><a href="dplyr.html#cb122-16"></a><span class="co">#   ActualElapsedTime &lt;int&gt;, AirTime &lt;int&gt;, ArrDelay &lt;int&gt;, DepDelay &lt;int&gt;,</span></span>
<span id="cb122-17"><a href="dplyr.html#cb122-17"></a><span class="co">#   Origin &lt;chr&gt;, Dest &lt;chr&gt;, Distance &lt;int&gt;, TaxiIn &lt;int&gt;, TaxiOut &lt;int&gt;,</span></span>
<span id="cb122-18"><a href="dplyr.html#cb122-18"></a><span class="co">#   Cancelled &lt;int&gt;, CancellationCode &lt;chr&gt;, Diverted &lt;int&gt;,</span></span>
<span id="cb122-19"><a href="dplyr.html#cb122-19"></a><span class="co">#   ActualGroundTime &lt;int&gt;, AverageSpeed &lt;dbl&gt;</span></span></code></pre></div></li>
<li><p>Calculer le nombre de vols à destination de <code>JFK</code>.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="dplyr.html#cb123-1"></a><span class="op">&gt;</span><span class="st"> </span>hflights3 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Dest<span class="op">==</span><span class="st">&quot;JFK&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="dt">numb_to_JFK=</span><span class="kw">n</span>())</span>
<span id="cb123-2"><a href="dplyr.html#cb123-2"></a><span class="co"># A tibble: 1 x 1</span></span>
<span id="cb123-3"><a href="dplyr.html#cb123-3"></a>  numb_to_JFK</span>
<span id="cb123-4"><a href="dplyr.html#cb123-4"></a>        <span class="op">&lt;</span>int<span class="op">&gt;</span></span>
<span id="cb123-5"><a href="dplyr.html#cb123-5"></a><span class="dv">1</span>         <span class="dv">695</span></span></code></pre></div></li>
<li><p>Créer un résumé de <code>hflights1</code> qui contient :</p>
<ul>
<li><code>n</code> : le nombre total de vols ;</li>
<li><code>n_dest</code>: le nombre total de destinations ;</li>
<li><code>n_carrier</code> : le nombre total de compagnies.</li>
</ul>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="dplyr.html#cb124-1"></a><span class="op">&gt;</span><span class="st"> </span>hflights1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">n_flights=</span><span class="kw">n</span>(),<span class="dt">n_dest=</span><span class="kw">n_distinct</span>(Dest),<span class="dt">n_carrier=</span><span class="kw">n_distinct</span>(UniqueCarrier))</span>
<span id="cb124-2"><a href="dplyr.html#cb124-2"></a><span class="co"># A tibble: 1 x 3</span></span>
<span id="cb124-3"><a href="dplyr.html#cb124-3"></a>  n_flights n_dest n_carrier</span>
<span id="cb124-4"><a href="dplyr.html#cb124-4"></a>      <span class="op">&lt;</span>int<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>int<span class="op">&gt;</span></span>
<span id="cb124-5"><a href="dplyr.html#cb124-5"></a><span class="dv">1</span>    <span class="dv">227496</span>    <span class="dv">116</span>        <span class="dv">15</span></span></code></pre></div></li>
<li><p>Créer un résumé de <code>hflights1</code> qui contient, pour les vols de la compagnie <code>American</code>,</p>
<ul>
<li>le nombre total de vols ;</li>
<li>le nombre total de vols annulés ;</li>
<li>la valeur moyenne de <code>ArrDelay</code> (attention à la gestion des <code>NA</code>…).</li>
</ul>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="dplyr.html#cb125-1"></a><span class="op">&gt;</span><span class="st"> </span>hflights1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(UniqueCarrier<span class="op">==</span><span class="st">&quot;American&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb125-2"><a href="dplyr.html#cb125-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">summarize</span>(<span class="dt">n_fligths_Am=</span><span class="kw">n</span>(),<span class="dt">n_can_Am=</span><span class="kw">sum</span>(Cancelled),</span>
<span id="cb125-3"><a href="dplyr.html#cb125-3"></a><span class="op">+</span><span class="st">         </span><span class="dt">mean_ArrDelay_am=</span><span class="kw">mean</span>(ArrDelay,<span class="dt">na.rm=</span><span class="ot">TRUE</span>))</span>
<span id="cb125-4"><a href="dplyr.html#cb125-4"></a><span class="co"># A tibble: 1 x 3</span></span>
<span id="cb125-5"><a href="dplyr.html#cb125-5"></a>  n_fligths_Am n_can_Am mean_ArrDelay_am</span>
<span id="cb125-6"><a href="dplyr.html#cb125-6"></a>         <span class="op">&lt;</span>int<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">            </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb125-7"><a href="dplyr.html#cb125-7"></a><span class="dv">1</span>         <span class="dv">3244</span>       <span class="dv">60</span>            <span class="fl">0.892</span></span></code></pre></div></li>
<li><p>Calculer pour chaque compagnie :</p>
<ul>
<li>le nombre total de vols ;</li>
<li>La valeur moyenne de <code>AirTime</code>.</li>
</ul>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="dplyr.html#cb126-1"></a><span class="op">&gt;</span><span class="st"> </span>hflights1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(UniqueCarrier) <span class="op">%&gt;%</span></span>
<span id="cb126-2"><a href="dplyr.html#cb126-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">summarise</span>(<span class="dt">n_flights=</span><span class="kw">n</span>(),<span class="dt">mean_AirTime=</span><span class="kw">mean</span>(AirTime,<span class="dt">na.rm=</span><span class="ot">TRUE</span>))</span>
<span id="cb126-3"><a href="dplyr.html#cb126-3"></a><span class="co"># A tibble: 15 x 3</span></span>
<span id="cb126-4"><a href="dplyr.html#cb126-4"></a>   UniqueCarrier      n_flights mean_AirTime</span>
<span id="cb126-5"><a href="dplyr.html#cb126-5"></a>   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">                  </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">        </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb126-6"><a href="dplyr.html#cb126-6"></a><span class="st"> </span><span class="dv">1</span> AirTran                 <span class="dv">2139</span>         <span class="fl">92.7</span></span>
<span id="cb126-7"><a href="dplyr.html#cb126-7"></a> <span class="dv">2</span> Alaska                   <span class="dv">365</span>        <span class="fl">254.</span> </span>
<span id="cb126-8"><a href="dplyr.html#cb126-8"></a> <span class="dv">3</span> American                <span class="dv">3244</span>         <span class="fl">69.7</span></span>
<span id="cb126-9"><a href="dplyr.html#cb126-9"></a> <span class="dv">4</span> American_Eagle          <span class="dv">4648</span>         <span class="fl">93.8</span></span>
<span id="cb126-10"><a href="dplyr.html#cb126-10"></a> <span class="dv">5</span> Atlantic_Southeast      <span class="dv">2204</span>        <span class="fl">104.</span> </span>
<span id="cb126-11"><a href="dplyr.html#cb126-11"></a> <span class="dv">6</span> Continental            <span class="dv">70032</span>        <span class="fl">145.</span> </span>
<span id="cb126-12"><a href="dplyr.html#cb126-12"></a> <span class="dv">7</span> Delta                   <span class="dv">2641</span>         <span class="fl">97.8</span></span>
<span id="cb126-13"><a href="dplyr.html#cb126-13"></a> <span class="dv">8</span> ExpressJet             <span class="dv">73053</span>         <span class="fl">83.2</span></span>
<span id="cb126-14"><a href="dplyr.html#cb126-14"></a> <span class="dv">9</span> Frontier                 <span class="dv">838</span>        <span class="fl">125.</span> </span>
<span id="cb126-15"><a href="dplyr.html#cb126-15"></a><span class="dv">10</span> JetBlue                  <span class="dv">695</span>        <span class="fl">184.</span> </span>
<span id="cb126-16"><a href="dplyr.html#cb126-16"></a><span class="dv">11</span> Mesa                      <span class="dv">79</span>        <span class="fl">122.</span> </span>
<span id="cb126-17"><a href="dplyr.html#cb126-17"></a><span class="dv">12</span> SkyWest                <span class="dv">16061</span>        <span class="fl">113.</span> </span>
<span id="cb126-18"><a href="dplyr.html#cb126-18"></a><span class="dv">13</span> Southwest              <span class="dv">45343</span>         <span class="fl">86.7</span></span>
<span id="cb126-19"><a href="dplyr.html#cb126-19"></a><span class="dv">14</span> United                  <span class="dv">2072</span>        <span class="fl">157.</span> </span>
<span id="cb126-20"><a href="dplyr.html#cb126-20"></a><span class="dv">15</span> US_Airways              <span class="dv">4082</span>        <span class="fl">134.</span> </span></code></pre></div></li>
<li><p>Ordonner les compagnies en fonction des retards moyens au départ.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="dplyr.html#cb127-1"></a><span class="op">&gt;</span><span class="st"> </span>hflights1 <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb127-2"><a href="dplyr.html#cb127-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">group_by</span>(UniqueCarrier) <span class="op">%&gt;%</span></span>
<span id="cb127-3"><a href="dplyr.html#cb127-3"></a><span class="op">+</span><span class="st">   </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(DepDelay) <span class="op">&amp;</span><span class="st"> </span>DepDelay<span class="op">&gt;</span><span class="dv">0</span>) <span class="op">%&gt;%</span></span>
<span id="cb127-4"><a href="dplyr.html#cb127-4"></a><span class="op">+</span><span class="st">   </span><span class="kw">summarise</span>(<span class="dt">meanDepDelay =</span> <span class="kw">mean</span>(DepDelay)) <span class="op">%&gt;%</span></span>
<span id="cb127-5"><a href="dplyr.html#cb127-5"></a><span class="op">+</span><span class="st">   </span><span class="kw">arrange</span>(meanDepDelay)</span>
<span id="cb127-6"><a href="dplyr.html#cb127-6"></a><span class="co"># A tibble: 15 x 2</span></span>
<span id="cb127-7"><a href="dplyr.html#cb127-7"></a>   UniqueCarrier      meanDepDelay</span>
<span id="cb127-8"><a href="dplyr.html#cb127-8"></a>   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">                     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb127-9"><a href="dplyr.html#cb127-9"></a><span class="st"> </span><span class="dv">1</span> Continental                <span class="fl">17.9</span></span>
<span id="cb127-10"><a href="dplyr.html#cb127-10"></a> <span class="dv">2</span> Alaska                     <span class="fl">20.8</span></span>
<span id="cb127-11"><a href="dplyr.html#cb127-11"></a> <span class="dv">3</span> Southwest                  <span class="fl">21.9</span></span>
<span id="cb127-12"><a href="dplyr.html#cb127-12"></a> <span class="dv">4</span> Frontier                   <span class="fl">22.7</span></span>
<span id="cb127-13"><a href="dplyr.html#cb127-13"></a> <span class="dv">5</span> Mesa                       <span class="fl">24.5</span></span>
<span id="cb127-14"><a href="dplyr.html#cb127-14"></a> <span class="dv">6</span> SkyWest                    <span class="fl">24.6</span></span>
<span id="cb127-15"><a href="dplyr.html#cb127-15"></a> <span class="dv">7</span> American                   <span class="fl">24.7</span></span>
<span id="cb127-16"><a href="dplyr.html#cb127-16"></a> <span class="dv">8</span> US_Airways                 <span class="fl">26.5</span></span>
<span id="cb127-17"><a href="dplyr.html#cb127-17"></a> <span class="dv">9</span> ExpressJet                 <span class="fl">26.9</span></span>
<span id="cb127-18"><a href="dplyr.html#cb127-18"></a><span class="dv">10</span> United                     <span class="fl">28.8</span></span>
<span id="cb127-19"><a href="dplyr.html#cb127-19"></a><span class="dv">11</span> Delta                      <span class="fl">32.4</span></span>
<span id="cb127-20"><a href="dplyr.html#cb127-20"></a><span class="dv">12</span> AirTran                    <span class="fl">33.4</span></span>
<span id="cb127-21"><a href="dplyr.html#cb127-21"></a><span class="dv">13</span> American_Eagle             <span class="fl">37.9</span></span>
<span id="cb127-22"><a href="dplyr.html#cb127-22"></a><span class="dv">14</span> JetBlue                    <span class="fl">43.5</span></span>
<span id="cb127-23"><a href="dplyr.html#cb127-23"></a><span class="dv">15</span> Atlantic_Southeast         <span class="fl">49.3</span></span></code></pre></div></li>
</ol>

<div class="exercise">
<span id="exr:exo-dplyr-tennis" class="exercise"><strong>Exercice 3.5  (Tournois du grand chelemn au tennis)  </strong></span>
</div>

<p>On considère le données sur les résultats de tennis dans les tournois du grand chelem en 2013. Les données, ainsi que le descriptif des variables, se trouvent à l’adresse <a href="https://archive.ics.uci.edu/ml/datasets/Tennis+Major+Tournament+Match+Statistics">https://archive.ics.uci.edu/ml/datasets/Tennis+Major+Tournament+Match+Statistics</a>.</p>
<p>On s’intéresse d’abord au tournoi masculin de Roland Garros. On répondra aux questions à l’aide des verbes <strong>dplyr</strong>.</p>
<ol style="list-style-type: decimal">
<li><p>Importer les données.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="dplyr.html#cb128-1"></a><span class="op">&gt;</span><span class="st"> </span>FrenchOpen_men_<span class="dv">2013</span> &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/FrenchOpen-men-2013.csv&quot;</span>)</span>
<span id="cb128-2"><a href="dplyr.html#cb128-2"></a><span class="op">&gt;</span><span class="st"> </span>RG2013 &lt;-<span class="st"> </span>FrenchOpen_men_<span class="dv">2013</span></span>
<span id="cb128-3"><a href="dplyr.html#cb128-3"></a><span class="op">&gt;</span><span class="st"> </span>RG2013</span>
<span id="cb128-4"><a href="dplyr.html#cb128-4"></a><span class="co"># A tibble: 125 x 42</span></span>
<span id="cb128-5"><a href="dplyr.html#cb128-5"></a>   Player1 Player2 Round Result FNL<span class="fl">.1</span> FNL<span class="fl">.2</span> FSP<span class="fl">.1</span> FSW<span class="fl">.1</span> SSP<span class="fl">.1</span> SSW<span class="fl">.1</span> ACE<span class="fl">.1</span> DBF<span class="fl">.1</span></span>
<span id="cb128-6"><a href="dplyr.html#cb128-6"></a>   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb128-7"><a href="dplyr.html#cb128-7"></a><span class="st"> </span><span class="dv">1</span> Pablo … Roger …     <span class="dv">1</span>      <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>    <span class="dv">62</span>    <span class="dv">27</span>    <span class="dv">38</span>    <span class="dv">11</span>     <span class="dv">1</span>     <span class="dv">3</span></span>
<span id="cb128-8"><a href="dplyr.html#cb128-8"></a> <span class="dv">2</span> Somdev… Daniel…     <span class="dv">1</span>      <span class="dv">1</span>     <span class="dv">3</span>     <span class="dv">0</span>    <span class="dv">62</span>    <span class="dv">54</span>    <span class="dv">38</span>    <span class="dv">22</span>     <span class="dv">7</span>     <span class="dv">3</span></span>
<span id="cb128-9"><a href="dplyr.html#cb128-9"></a> <span class="dv">3</span> Tobias… Paolo …     <span class="dv">1</span>      <span class="dv">1</span>     <span class="dv">3</span>     <span class="dv">2</span>    <span class="dv">62</span>    <span class="dv">53</span>    <span class="dv">38</span>    <span class="dv">15</span>     <span class="dv">4</span>     <span class="dv">6</span></span>
<span id="cb128-10"><a href="dplyr.html#cb128-10"></a> <span class="dv">4</span> Julien… Ricard…     <span class="dv">1</span>      <span class="dv">1</span>     <span class="dv">3</span>     <span class="dv">1</span>    <span class="dv">72</span>    <span class="dv">87</span>    <span class="dv">28</span>    <span class="dv">19</span>    <span class="dv">14</span>     <span class="dv">2</span></span>
<span id="cb128-11"><a href="dplyr.html#cb128-11"></a> <span class="dv">5</span> Lukas … Sam Qu…     <span class="dv">1</span>      <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>    <span class="dv">52</span>    <span class="dv">31</span>    <span class="dv">48</span>    <span class="dv">22</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb128-12"><a href="dplyr.html#cb128-12"></a> <span class="dv">6</span> Jan Ha… Denis …     <span class="dv">1</span>      <span class="dv">1</span>     <span class="dv">3</span>     <span class="dv">1</span>    <span class="dv">70</span>    <span class="dv">58</span>    <span class="dv">30</span>    <span class="dv">18</span>     <span class="dv">4</span>     <span class="dv">4</span></span>
<span id="cb128-13"><a href="dplyr.html#cb128-13"></a> <span class="dv">7</span> Adrian… Pablo …     <span class="dv">1</span>      <span class="dv">0</span>     <span class="dv">2</span>     <span class="dv">3</span>    <span class="dv">63</span>    <span class="dv">71</span>    <span class="dv">37</span>    <span class="dv">38</span>     <span class="dv">5</span>     <span class="dv">5</span></span>
<span id="cb128-14"><a href="dplyr.html#cb128-14"></a> <span class="dv">8</span> Gilles… Lleyto…     <span class="dv">1</span>      <span class="dv">1</span>     <span class="dv">3</span>     <span class="dv">2</span>    <span class="dv">59</span>    <span class="dv">42</span>    <span class="dv">41</span>    <span class="dv">25</span>     <span class="dv">7</span>     <span class="dv">2</span></span>
<span id="cb128-15"><a href="dplyr.html#cb128-15"></a> <span class="dv">9</span> Philip… Marin …     <span class="dv">1</span>      <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>    <span class="dv">56</span>    <span class="dv">27</span>    <span class="dv">44</span>    <span class="dv">13</span>     <span class="dv">0</span>     <span class="dv">6</span></span>
<span id="cb128-16"><a href="dplyr.html#cb128-16"></a><span class="dv">10</span> Radek … Nick K…     <span class="dv">1</span>      <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>    <span class="dv">63</span>    <span class="dv">62</span>    <span class="dv">37</span>    <span class="dv">29</span>     <span class="dv">5</span>     <span class="dv">4</span></span>
<span id="cb128-17"><a href="dplyr.html#cb128-17"></a><span class="co"># … with 115 more rows, and 30 more variables: WNR.1 &lt;dbl&gt;, UFE.1 &lt;dbl&gt;,</span></span>
<span id="cb128-18"><a href="dplyr.html#cb128-18"></a><span class="co">#   BPC.1 &lt;dbl&gt;, BPW.1 &lt;dbl&gt;, NPA.1 &lt;dbl&gt;, NPW.1 &lt;dbl&gt;, TPW.1 &lt;dbl&gt;,</span></span>
<span id="cb128-19"><a href="dplyr.html#cb128-19"></a><span class="co">#   ST1.1 &lt;dbl&gt;, ST2.1 &lt;dbl&gt;, ST3.1 &lt;dbl&gt;, ST4.1 &lt;dbl&gt;, ST5.1 &lt;dbl&gt;,</span></span>
<span id="cb128-20"><a href="dplyr.html#cb128-20"></a><span class="co">#   FSP.2 &lt;dbl&gt;, FSW.2 &lt;dbl&gt;, SSP.2 &lt;dbl&gt;, SSW.2 &lt;dbl&gt;, ACE.2 &lt;dbl&gt;,</span></span>
<span id="cb128-21"><a href="dplyr.html#cb128-21"></a><span class="co">#   DBF.2 &lt;dbl&gt;, WNR.2 &lt;dbl&gt;, UFE.2 &lt;dbl&gt;, BPC.2 &lt;dbl&gt;, BPW.2 &lt;dbl&gt;,</span></span>
<span id="cb128-22"><a href="dplyr.html#cb128-22"></a><span class="co">#   NPA.2 &lt;dbl&gt;, NPW.2 &lt;dbl&gt;, TPW.2 &lt;dbl&gt;, ST1.2 &lt;dbl&gt;, ST2.2 &lt;dbl&gt;,</span></span>
<span id="cb128-23"><a href="dplyr.html#cb128-23"></a><span class="co">#   ST3.2 &lt;dbl&gt;, ST4.2 &lt;dbl&gt;, ST5.2 &lt;dbl&gt;</span></span></code></pre></div></li>
<li><p>Afficher le nom des adversaires de <code>Roger Federer</code>.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="dplyr.html#cb129-1"></a><span class="op">&gt;</span><span class="st"> </span>RG2013 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Player1<span class="op">==</span><span class="st">&quot;Roger Federer&quot;</span> <span class="op">|</span><span class="st"> </span>Player2<span class="op">==</span><span class="st">&quot;Roger Federer&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb129-2"><a href="dplyr.html#cb129-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">select</span>(Player1,Player2)</span>
<span id="cb129-3"><a href="dplyr.html#cb129-3"></a><span class="co"># A tibble: 5 x 2</span></span>
<span id="cb129-4"><a href="dplyr.html#cb129-4"></a>  Player1             Player2      </span>
<span id="cb129-5"><a href="dplyr.html#cb129-5"></a>  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">               </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">        </span></span>
<span id="cb129-6"><a href="dplyr.html#cb129-6"></a><span class="dv">1</span> Pablo Carreno<span class="op">-</span>Busta Roger Federer</span>
<span id="cb129-7"><a href="dplyr.html#cb129-7"></a><span class="dv">2</span> Somdev Devvarman    Roger Federer</span>
<span id="cb129-8"><a href="dplyr.html#cb129-8"></a><span class="dv">3</span> Julien Benneteau    Roger Federer</span>
<span id="cb129-9"><a href="dplyr.html#cb129-9"></a><span class="dv">4</span> Gilles Simon        Roger Federer</span>
<span id="cb129-10"><a href="dplyr.html#cb129-10"></a><span class="dv">5</span> Jo<span class="op">-</span>Wilfried Tsonga  Roger Federer</span></code></pre></div></li>
<li><p>Afficher le nom des demi-finalistes (ceux qui ont atteint le 6ème tour).</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="dplyr.html#cb130-1"></a><span class="op">&gt;</span><span class="st"> </span>RG2013 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Round<span class="op">==</span><span class="dv">6</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(Player1,Player2)</span>
<span id="cb130-2"><a href="dplyr.html#cb130-2"></a><span class="co"># A tibble: 2 x 2</span></span>
<span id="cb130-3"><a href="dplyr.html#cb130-3"></a>  Player1        Player2           </span>
<span id="cb130-4"><a href="dplyr.html#cb130-4"></a>  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">          </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">             </span></span>
<span id="cb130-5"><a href="dplyr.html#cb130-5"></a><span class="dv">1</span> David Ferrer   Jo<span class="op">-</span>Wilfried Tsonga</span>
<span id="cb130-6"><a href="dplyr.html#cb130-6"></a><span class="dv">2</span> Novak Djokovic Rafael Nadal      </span></code></pre></div></li>
<li><p>Combien y a t-il eu de points disputés en moyenne par match ? Il faudra penser à ajouter dans la table une variable correspondant au nombre de points de chaque match (verbe <code>mutate</code>).</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="dplyr.html#cb131-1"></a><span class="op">&gt;</span><span class="st"> </span>RG2013 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">nb_points=</span>TPW<span class="fl">.1</span><span class="op">+</span>TPW<span class="fl">.2</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(nb_points) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize_all</span>(mean)</span>
<span id="cb131-2"><a href="dplyr.html#cb131-2"></a><span class="co"># A tibble: 1 x 1</span></span>
<span id="cb131-3"><a href="dplyr.html#cb131-3"></a>  nb_points</span>
<span id="cb131-4"><a href="dplyr.html#cb131-4"></a>      <span class="op">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb131-5"><a href="dplyr.html#cb131-5"></a><span class="dv">1</span>      <span class="fl">219.</span></span></code></pre></div></li>
<li><p>Combien y a t-il eu d’aces par match en moyenne ?</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="dplyr.html#cb132-1"></a><span class="op">&gt;</span><span class="st"> </span>RG2013 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">nb_aces=</span>ACE<span class="fl">.1</span><span class="op">+</span>ACE<span class="fl">.2</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">mean_aces=</span><span class="kw">mean</span>(nb_aces))</span>
<span id="cb132-2"><a href="dplyr.html#cb132-2"></a><span class="co"># A tibble: 1 x 1</span></span>
<span id="cb132-3"><a href="dplyr.html#cb132-3"></a>  mean_aces</span>
<span id="cb132-4"><a href="dplyr.html#cb132-4"></a>      <span class="op">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb132-5"><a href="dplyr.html#cb132-5"></a><span class="dv">1</span>      <span class="fl">12.7</span></span></code></pre></div></li>
<li><p>Combien y a t-il eu d’aces par match en moyenne à chaque tour ?</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="dplyr.html#cb133-1"></a><span class="op">&gt;</span><span class="st"> </span>RG2013 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(Round) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">nb_aces=</span>ACE<span class="fl">.1</span><span class="op">+</span>ACE<span class="fl">.2</span>) <span class="op">%&gt;%</span></span>
<span id="cb133-2"><a href="dplyr.html#cb133-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">summarize</span>(<span class="dt">mean_aces=</span><span class="kw">mean</span>(nb_aces))</span>
<span id="cb133-3"><a href="dplyr.html#cb133-3"></a><span class="co"># A tibble: 7 x 2</span></span>
<span id="cb133-4"><a href="dplyr.html#cb133-4"></a>  Round mean_aces</span>
<span id="cb133-5"><a href="dplyr.html#cb133-5"></a>  <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb133-6"><a href="dplyr.html#cb133-6"></a><span class="dv">1</span>     <span class="dv">1</span>     <span class="fl">13.5</span> </span>
<span id="cb133-7"><a href="dplyr.html#cb133-7"></a><span class="dv">2</span>     <span class="dv">2</span>     <span class="fl">13.2</span> </span>
<span id="cb133-8"><a href="dplyr.html#cb133-8"></a><span class="dv">3</span>     <span class="dv">3</span>     <span class="fl">12.6</span> </span>
<span id="cb133-9"><a href="dplyr.html#cb133-9"></a><span class="dv">4</span>     <span class="dv">4</span>      <span class="fl">9.12</span></span>
<span id="cb133-10"><a href="dplyr.html#cb133-10"></a><span class="dv">5</span>     <span class="dv">5</span>      <span class="dv">7</span>   </span>
<span id="cb133-11"><a href="dplyr.html#cb133-11"></a><span class="dv">6</span>     <span class="dv">6</span>     <span class="dv">10</span>   </span>
<span id="cb133-12"><a href="dplyr.html#cb133-12"></a><span class="dv">7</span>     <span class="dv">7</span>      <span class="dv">6</span>   </span></code></pre></div></li>
<li><p>Combien y a t-il eu de doubles fautes au total dans le tournoi (attention aux données manquantes, taper <strong>help(sum)</strong> pour voir comment les gérer) ?</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="dplyr.html#cb134-1"></a><span class="op">&gt;</span><span class="st"> </span>RG2013 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">nb_df=</span>DBF<span class="fl">.1</span><span class="op">+</span>DBF<span class="fl">.2</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb134-2"><a href="dplyr.html#cb134-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">summarize</span>(<span class="dt">nb_dbfaults=</span><span class="kw">sum</span>(nb_df,<span class="dt">na.rm=</span><span class="ot">TRUE</span>))</span>
<span id="cb134-3"><a href="dplyr.html#cb134-3"></a><span class="co"># A tibble: 1 x 1</span></span>
<span id="cb134-4"><a href="dplyr.html#cb134-4"></a>  nb_dbfaults</span>
<span id="cb134-5"><a href="dplyr.html#cb134-5"></a>        <span class="op">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb134-6"><a href="dplyr.html#cb134-6"></a><span class="dv">1</span>         <span class="dv">812</span></span></code></pre></div></li>
<li><p>Importer les données pour le tournoi masculin de Wimbledon 2013.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="dplyr.html#cb135-1"></a><span class="op">&gt;</span><span class="st"> </span>WIMB2013 &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/Wimbledon-men-2013.csv&quot;</span>)</span>
<span id="cb135-2"><a href="dplyr.html#cb135-2"></a><span class="op">&gt;</span><span class="st"> </span>WIMB2013</span>
<span id="cb135-3"><a href="dplyr.html#cb135-3"></a><span class="co"># A tibble: 114 x 42</span></span>
<span id="cb135-4"><a href="dplyr.html#cb135-4"></a>   Player1 Player2 Round Result FNL<span class="fl">.1</span> FNL<span class="fl">.2</span> FSP<span class="fl">.1</span> FSW<span class="fl">.1</span> SSP<span class="fl">.1</span> SSW<span class="fl">.1</span> ACE<span class="fl">.1</span> DBF<span class="fl">.1</span></span>
<span id="cb135-5"><a href="dplyr.html#cb135-5"></a>   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb135-6"><a href="dplyr.html#cb135-6"></a><span class="st"> </span><span class="dv">1</span> B.Beck… A.Murr…     <span class="dv">1</span>      <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>    <span class="dv">59</span>    <span class="dv">29</span>    <span class="dv">41</span>    <span class="dv">14</span>     <span class="dv">5</span>     <span class="dv">1</span></span>
<span id="cb135-7"><a href="dplyr.html#cb135-7"></a> <span class="dv">2</span> J.Ward  Y<span class="op">-</span>H.Lu      <span class="dv">1</span>      <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">3</span>    <span class="dv">62</span>    <span class="dv">77</span>    <span class="dv">38</span>    <span class="dv">35</span>    <span class="dv">18</span>     <span class="dv">4</span></span>
<span id="cb135-8"><a href="dplyr.html#cb135-8"></a> <span class="dv">3</span> N.Mahut J.Hajek     <span class="dv">1</span>      <span class="dv">1</span>     <span class="dv">3</span>     <span class="dv">0</span>    <span class="dv">72</span>    <span class="dv">44</span>    <span class="dv">28</span>    <span class="dv">10</span>    <span class="dv">17</span>     <span class="dv">3</span></span>
<span id="cb135-9"><a href="dplyr.html#cb135-9"></a> <span class="dv">4</span> T.Robr… A.Bogo…     <span class="dv">1</span>      <span class="dv">1</span>     <span class="dv">3</span>     <span class="dv">0</span>    <span class="dv">77</span>    <span class="dv">40</span>    <span class="dv">23</span>    <span class="dv">12</span>     <span class="dv">6</span>     <span class="dv">0</span></span>
<span id="cb135-10"><a href="dplyr.html#cb135-10"></a> <span class="dv">5</span> R.Haase M.Youz…     <span class="dv">1</span>      <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>    <span class="dv">68</span>    <span class="dv">61</span>    <span class="dv">32</span>    <span class="dv">15</span>     <span class="dv">7</span>     <span class="dv">2</span></span>
<span id="cb135-11"><a href="dplyr.html#cb135-11"></a> <span class="dv">6</span> M.Gicq… V.Posp…     <span class="dv">1</span>      <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>    <span class="dv">59</span>    <span class="dv">41</span>    <span class="dv">41</span>    <span class="dv">27</span>     <span class="dv">7</span>     <span class="dv">6</span></span>
<span id="cb135-12"><a href="dplyr.html#cb135-12"></a> <span class="dv">7</span> A.Kuzn… A.Mont…     <span class="dv">1</span>      <span class="dv">1</span>     <span class="dv">3</span>     <span class="dv">1</span>    <span class="dv">63</span>    <span class="dv">56</span>    <span class="dv">37</span>    <span class="dv">21</span>    <span class="dv">21</span>     <span class="dv">3</span></span>
<span id="cb135-13"><a href="dplyr.html#cb135-13"></a> <span class="dv">8</span> J.Tips… V.Troi…     <span class="dv">1</span>      <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>    <span class="dv">61</span>    <span class="dv">47</span>    <span class="dv">39</span>    <span class="dv">21</span>     <span class="dv">3</span>     <span class="dv">1</span></span>
<span id="cb135-14"><a href="dplyr.html#cb135-14"></a> <span class="dv">9</span> M.Bagh… M.Cilic     <span class="dv">1</span>      <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>    <span class="dv">61</span>    <span class="dv">31</span>    <span class="dv">39</span>    <span class="dv">16</span>     <span class="dv">4</span>     <span class="dv">5</span></span>
<span id="cb135-15"><a href="dplyr.html#cb135-15"></a><span class="dv">10</span> K.De S… P.Lore…     <span class="dv">1</span>      <span class="dv">1</span>     <span class="dv">3</span>     <span class="dv">0</span>    <span class="dv">67</span>    <span class="dv">56</span>    <span class="dv">33</span>    <span class="dv">21</span>    <span class="dv">22</span>     <span class="dv">6</span></span>
<span id="cb135-16"><a href="dplyr.html#cb135-16"></a><span class="co"># … with 104 more rows, and 30 more variables: WNR.1 &lt;dbl&gt;, UFE.1 &lt;dbl&gt;,</span></span>
<span id="cb135-17"><a href="dplyr.html#cb135-17"></a><span class="co">#   BPC.1 &lt;dbl&gt;, BPW.1 &lt;dbl&gt;, NPA.1 &lt;dbl&gt;, NPW.1 &lt;dbl&gt;, TPW.1 &lt;lgl&gt;,</span></span>
<span id="cb135-18"><a href="dplyr.html#cb135-18"></a><span class="co">#   ST1.1 &lt;dbl&gt;, ST2.1 &lt;dbl&gt;, ST3.1 &lt;dbl&gt;, ST4.1 &lt;dbl&gt;, ST5.1 &lt;dbl&gt;,</span></span>
<span id="cb135-19"><a href="dplyr.html#cb135-19"></a><span class="co">#   FSP.2 &lt;dbl&gt;, FSW.2 &lt;dbl&gt;, SSP.2 &lt;dbl&gt;, SSW.2 &lt;dbl&gt;, ACE.2 &lt;dbl&gt;,</span></span>
<span id="cb135-20"><a href="dplyr.html#cb135-20"></a><span class="co">#   DBF.2 &lt;dbl&gt;, WNR.2 &lt;dbl&gt;, UFE.2 &lt;dbl&gt;, BPC.2 &lt;dbl&gt;, BPW.2 &lt;dbl&gt;,</span></span>
<span id="cb135-21"><a href="dplyr.html#cb135-21"></a><span class="co">#   NPA.2 &lt;dbl&gt;, NPW.2 &lt;dbl&gt;, TPW.2 &lt;lgl&gt;, ST1.2 &lt;dbl&gt;, ST2.2 &lt;dbl&gt;,</span></span>
<span id="cb135-22"><a href="dplyr.html#cb135-22"></a><span class="co">#   ST3.2 &lt;dbl&gt;, ST4.2 &lt;dbl&gt;, ST5.2 &lt;dbl&gt;</span></span></code></pre></div></li>
<li><p>Concaténer les tables en ajoutant une variable permettant d’identifier le tournoi. On pourra utiliser <strong>bind_rows</strong> abev l’option <strong>.id</strong>.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="dplyr.html#cb136-1"></a><span class="op">&gt;</span><span class="st"> </span>RG_WIMB2013 &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(<span class="st">&quot;RG&quot;</span>=RG2013,<span class="st">&quot;WIMB&quot;</span>=WIMB2013,<span class="dt">.id=</span><span class="st">&quot;Tournament&quot;</span>)</span></code></pre></div></li>
<li><p>Afficher les matchs de Federer pour chaque tournoi.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="dplyr.html#cb137-1"></a><span class="op">&gt;</span><span class="st"> </span>RG_WIMB2013  <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Player1<span class="op">==</span><span class="st">&quot;Roger Federer&quot;</span> <span class="op">|</span><span class="st"> </span></span>
<span id="cb137-2"><a href="dplyr.html#cb137-2"></a><span class="op">+</span><span class="st">                       </span>Player2<span class="op">==</span><span class="st">&quot;Roger Federer&quot;</span> <span class="op">|</span></span>
<span id="cb137-3"><a href="dplyr.html#cb137-3"></a><span class="op">+</span><span class="st">                       </span>Player1<span class="op">==</span><span class="st">&quot;R.Federer&quot;</span> <span class="op">|</span><span class="st"> </span></span>
<span id="cb137-4"><a href="dplyr.html#cb137-4"></a><span class="op">+</span><span class="st">                       </span>Player2<span class="op">==</span><span class="st">&quot;R.Federer&quot;</span>) </span>
<span id="cb137-5"><a href="dplyr.html#cb137-5"></a><span class="co"># A tibble: 7 x 43</span></span>
<span id="cb137-6"><a href="dplyr.html#cb137-6"></a>  Tournament Player1 Player2 Round Result FNL<span class="fl">.1</span> FNL<span class="fl">.2</span> FSP<span class="fl">.1</span> FSW<span class="fl">.1</span> SSP<span class="fl">.1</span> SSW<span class="fl">.1</span></span>
<span id="cb137-7"><a href="dplyr.html#cb137-7"></a>  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">      </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb137-8"><a href="dplyr.html#cb137-8"></a><span class="dv">1</span> RG         Pablo … Roger …     <span class="dv">1</span>      <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>    <span class="dv">62</span>    <span class="dv">27</span>    <span class="dv">38</span>    <span class="dv">11</span></span>
<span id="cb137-9"><a href="dplyr.html#cb137-9"></a><span class="dv">2</span> RG         Somdev… Roger …     <span class="dv">2</span>      <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>    <span class="dv">61</span>    <span class="dv">19</span>    <span class="dv">39</span>    <span class="dv">16</span></span>
<span id="cb137-10"><a href="dplyr.html#cb137-10"></a><span class="dv">3</span> RG         Julien… Roger …     <span class="dv">3</span>      <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>    <span class="dv">82</span>    <span class="dv">41</span>    <span class="dv">18</span>     <span class="dv">8</span></span>
<span id="cb137-11"><a href="dplyr.html#cb137-11"></a><span class="dv">4</span> RG         Gilles… Roger …     <span class="dv">4</span>      <span class="dv">0</span>     <span class="dv">2</span>     <span class="dv">3</span>    <span class="dv">61</span>    <span class="dv">65</span>    <span class="dv">39</span>    <span class="dv">28</span></span>
<span id="cb137-12"><a href="dplyr.html#cb137-12"></a><span class="dv">5</span> RG         Jo<span class="op">-</span>Wil… Roger …     <span class="dv">5</span>      <span class="dv">1</span>     <span class="dv">3</span>     <span class="dv">0</span>    <span class="dv">75</span>    <span class="dv">46</span>    <span class="dv">25</span>    <span class="dv">10</span></span>
<span id="cb137-13"><a href="dplyr.html#cb137-13"></a><span class="dv">6</span> WIMB       V.Hane… R.Fede…     <span class="dv">1</span>      <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>    <span class="dv">85</span>    <span class="dv">26</span>    <span class="dv">15</span>     <span class="dv">3</span></span>
<span id="cb137-14"><a href="dplyr.html#cb137-14"></a><span class="dv">7</span> WIMB       S.Stak… R.Fede…     <span class="dv">2</span>      <span class="dv">1</span>     <span class="dv">3</span>     <span class="dv">1</span>    <span class="dv">66</span>    <span class="dv">83</span>    <span class="dv">34</span>    <span class="dv">36</span></span>
<span id="cb137-15"><a href="dplyr.html#cb137-15"></a><span class="co"># … with 32 more variables: ACE.1 &lt;dbl&gt;, DBF.1 &lt;dbl&gt;, WNR.1 &lt;dbl&gt;, UFE.1 &lt;dbl&gt;,</span></span>
<span id="cb137-16"><a href="dplyr.html#cb137-16"></a><span class="co">#   BPC.1 &lt;dbl&gt;, BPW.1 &lt;dbl&gt;, NPA.1 &lt;dbl&gt;, NPW.1 &lt;dbl&gt;, TPW.1 &lt;dbl&gt;,</span></span>
<span id="cb137-17"><a href="dplyr.html#cb137-17"></a><span class="co">#   ST1.1 &lt;dbl&gt;, ST2.1 &lt;dbl&gt;, ST3.1 &lt;dbl&gt;, ST4.1 &lt;dbl&gt;, ST5.1 &lt;dbl&gt;,</span></span>
<span id="cb137-18"><a href="dplyr.html#cb137-18"></a><span class="co">#   FSP.2 &lt;dbl&gt;, FSW.2 &lt;dbl&gt;, SSP.2 &lt;dbl&gt;, SSW.2 &lt;dbl&gt;, ACE.2 &lt;dbl&gt;,</span></span>
<span id="cb137-19"><a href="dplyr.html#cb137-19"></a><span class="co">#   DBF.2 &lt;dbl&gt;, WNR.2 &lt;dbl&gt;, UFE.2 &lt;dbl&gt;, BPC.2 &lt;dbl&gt;, BPW.2 &lt;dbl&gt;,</span></span>
<span id="cb137-20"><a href="dplyr.html#cb137-20"></a><span class="co">#   NPA.2 &lt;dbl&gt;, NPW.2 &lt;dbl&gt;, TPW.2 &lt;dbl&gt;, ST1.2 &lt;dbl&gt;, ST2.2 &lt;dbl&gt;,</span></span>
<span id="cb137-21"><a href="dplyr.html#cb137-21"></a><span class="co">#   ST3.2 &lt;dbl&gt;, ST4.2 &lt;dbl&gt;, ST5.2 &lt;dbl&gt;</span></span></code></pre></div>
<p>ou</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="dplyr.html#cb138-1"></a><span class="op">&gt;</span><span class="st"> </span>RG_WIMB2013  <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="kw">grepl</span>(<span class="st">&quot;Federer&quot;</span>,Player2) <span class="op">|</span><span class="st"> </span><span class="kw">grepl</span>(<span class="st">&quot;Federer&quot;</span>,Player2))</span>
<span id="cb138-2"><a href="dplyr.html#cb138-2"></a><span class="co"># A tibble: 7 x 43</span></span>
<span id="cb138-3"><a href="dplyr.html#cb138-3"></a>  Tournament Player1 Player2 Round Result FNL<span class="fl">.1</span> FNL<span class="fl">.2</span> FSP<span class="fl">.1</span> FSW<span class="fl">.1</span> SSP<span class="fl">.1</span> SSW<span class="fl">.1</span></span>
<span id="cb138-4"><a href="dplyr.html#cb138-4"></a>  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">      </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb138-5"><a href="dplyr.html#cb138-5"></a><span class="dv">1</span> RG         Pablo … Roger …     <span class="dv">1</span>      <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>    <span class="dv">62</span>    <span class="dv">27</span>    <span class="dv">38</span>    <span class="dv">11</span></span>
<span id="cb138-6"><a href="dplyr.html#cb138-6"></a><span class="dv">2</span> RG         Somdev… Roger …     <span class="dv">2</span>      <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>    <span class="dv">61</span>    <span class="dv">19</span>    <span class="dv">39</span>    <span class="dv">16</span></span>
<span id="cb138-7"><a href="dplyr.html#cb138-7"></a><span class="dv">3</span> RG         Julien… Roger …     <span class="dv">3</span>      <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>    <span class="dv">82</span>    <span class="dv">41</span>    <span class="dv">18</span>     <span class="dv">8</span></span>
<span id="cb138-8"><a href="dplyr.html#cb138-8"></a><span class="dv">4</span> RG         Gilles… Roger …     <span class="dv">4</span>      <span class="dv">0</span>     <span class="dv">2</span>     <span class="dv">3</span>    <span class="dv">61</span>    <span class="dv">65</span>    <span class="dv">39</span>    <span class="dv">28</span></span>
<span id="cb138-9"><a href="dplyr.html#cb138-9"></a><span class="dv">5</span> RG         Jo<span class="op">-</span>Wil… Roger …     <span class="dv">5</span>      <span class="dv">1</span>     <span class="dv">3</span>     <span class="dv">0</span>    <span class="dv">75</span>    <span class="dv">46</span>    <span class="dv">25</span>    <span class="dv">10</span></span>
<span id="cb138-10"><a href="dplyr.html#cb138-10"></a><span class="dv">6</span> WIMB       V.Hane… R.Fede…     <span class="dv">1</span>      <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">3</span>    <span class="dv">85</span>    <span class="dv">26</span>    <span class="dv">15</span>     <span class="dv">3</span></span>
<span id="cb138-11"><a href="dplyr.html#cb138-11"></a><span class="dv">7</span> WIMB       S.Stak… R.Fede…     <span class="dv">2</span>      <span class="dv">1</span>     <span class="dv">3</span>     <span class="dv">1</span>    <span class="dv">66</span>    <span class="dv">83</span>    <span class="dv">34</span>    <span class="dv">36</span></span>
<span id="cb138-12"><a href="dplyr.html#cb138-12"></a><span class="co"># … with 32 more variables: ACE.1 &lt;dbl&gt;, DBF.1 &lt;dbl&gt;, WNR.1 &lt;dbl&gt;, UFE.1 &lt;dbl&gt;,</span></span>
<span id="cb138-13"><a href="dplyr.html#cb138-13"></a><span class="co">#   BPC.1 &lt;dbl&gt;, BPW.1 &lt;dbl&gt;, NPA.1 &lt;dbl&gt;, NPW.1 &lt;dbl&gt;, TPW.1 &lt;dbl&gt;,</span></span>
<span id="cb138-14"><a href="dplyr.html#cb138-14"></a><span class="co">#   ST1.1 &lt;dbl&gt;, ST2.1 &lt;dbl&gt;, ST3.1 &lt;dbl&gt;, ST4.1 &lt;dbl&gt;, ST5.1 &lt;dbl&gt;,</span></span>
<span id="cb138-15"><a href="dplyr.html#cb138-15"></a><span class="co">#   FSP.2 &lt;dbl&gt;, FSW.2 &lt;dbl&gt;, SSP.2 &lt;dbl&gt;, SSW.2 &lt;dbl&gt;, ACE.2 &lt;dbl&gt;,</span></span>
<span id="cb138-16"><a href="dplyr.html#cb138-16"></a><span class="co">#   DBF.2 &lt;dbl&gt;, WNR.2 &lt;dbl&gt;, UFE.2 &lt;dbl&gt;, BPC.2 &lt;dbl&gt;, BPW.2 &lt;dbl&gt;,</span></span>
<span id="cb138-17"><a href="dplyr.html#cb138-17"></a><span class="co">#   NPA.2 &lt;dbl&gt;, NPW.2 &lt;dbl&gt;, TPW.2 &lt;dbl&gt;, ST1.2 &lt;dbl&gt;, ST2.2 &lt;dbl&gt;,</span></span>
<span id="cb138-18"><a href="dplyr.html#cb138-18"></a><span class="co">#   ST3.2 &lt;dbl&gt;, ST4.2 &lt;dbl&gt;, ST5.2 &lt;dbl&gt;</span></span></code></pre></div></li>
<li><p>Comparer les nombres d’aces par matchs à chaque tours pour les tournois de Roland Garros et Wimbledon.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="dplyr.html#cb139-1"></a><span class="op">&gt;</span><span class="st"> </span>RG_WIMB2013 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(Tournament,Round) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb139-2"><a href="dplyr.html#cb139-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">mutate</span>(<span class="dt">nb_aces=</span>ACE<span class="fl">.1</span><span class="op">+</span>ACE<span class="fl">.2</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">mean_ace=</span><span class="kw">mean</span>(nb_aces))</span>
<span id="cb139-3"><a href="dplyr.html#cb139-3"></a><span class="co"># A tibble: 14 x 3</span></span>
<span id="cb139-4"><a href="dplyr.html#cb139-4"></a><span class="co"># Groups:   Tournament [2]</span></span>
<span id="cb139-5"><a href="dplyr.html#cb139-5"></a>   Tournament Round mean_ace</span>
<span id="cb139-6"><a href="dplyr.html#cb139-6"></a>   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">      </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb139-7"><a href="dplyr.html#cb139-7"></a><span class="st"> </span><span class="dv">1</span> RG             <span class="dv">1</span>    <span class="fl">13.5</span> </span>
<span id="cb139-8"><a href="dplyr.html#cb139-8"></a> <span class="dv">2</span> RG             <span class="dv">2</span>    <span class="fl">13.2</span> </span>
<span id="cb139-9"><a href="dplyr.html#cb139-9"></a> <span class="dv">3</span> RG             <span class="dv">3</span>    <span class="fl">12.6</span> </span>
<span id="cb139-10"><a href="dplyr.html#cb139-10"></a> <span class="dv">4</span> RG             <span class="dv">4</span>     <span class="fl">9.12</span></span>
<span id="cb139-11"><a href="dplyr.html#cb139-11"></a> <span class="dv">5</span> RG             <span class="dv">5</span>     <span class="dv">7</span>   </span>
<span id="cb139-12"><a href="dplyr.html#cb139-12"></a> <span class="dv">6</span> RG             <span class="dv">6</span>    <span class="dv">10</span>   </span>
<span id="cb139-13"><a href="dplyr.html#cb139-13"></a> <span class="dv">7</span> RG             <span class="dv">7</span>     <span class="dv">6</span>   </span>
<span id="cb139-14"><a href="dplyr.html#cb139-14"></a> <span class="dv">8</span> WIMB           <span class="dv">1</span>    <span class="fl">21.1</span> </span>
<span id="cb139-15"><a href="dplyr.html#cb139-15"></a> <span class="dv">9</span> WIMB           <span class="dv">2</span>    <span class="fl">23.9</span> </span>
<span id="cb139-16"><a href="dplyr.html#cb139-16"></a><span class="dv">10</span> WIMB           <span class="dv">3</span>    <span class="dv">24</span>   </span>
<span id="cb139-17"><a href="dplyr.html#cb139-17"></a><span class="dv">11</span> WIMB           <span class="dv">4</span>    <span class="fl">24.4</span> </span>
<span id="cb139-18"><a href="dplyr.html#cb139-18"></a><span class="dv">12</span> WIMB           <span class="dv">5</span>    <span class="fl">26.5</span> </span>
<span id="cb139-19"><a href="dplyr.html#cb139-19"></a><span class="dv">13</span> WIMB           <span class="dv">6</span>    <span class="fl">27.5</span> </span>
<span id="cb139-20"><a href="dplyr.html#cb139-20"></a><span class="dv">14</span> WIMB           <span class="dv">7</span>    <span class="dv">13</span>   </span></code></pre></div>
<p>ou pour une présentation plus synthétique</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="dplyr.html#cb140-1"></a><span class="op">&gt;</span><span class="st"> </span>RG_WIMB2013 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(Tournament,Round) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb140-2"><a href="dplyr.html#cb140-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">mutate</span>(<span class="dt">nb_aces=</span>ACE<span class="fl">.1</span><span class="op">+</span>ACE<span class="fl">.2</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb140-3"><a href="dplyr.html#cb140-3"></a><span class="op">+</span><span class="st">   </span><span class="kw">summarize</span>(<span class="dt">mean_ace=</span><span class="kw">mean</span>(nb_aces)) <span class="op">%&gt;%</span></span>
<span id="cb140-4"><a href="dplyr.html#cb140-4"></a><span class="op">+</span><span class="st">   </span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> <span class="st">&quot;Round&quot;</span>,<span class="dt">values_from =</span> <span class="st">&quot;mean_ace&quot;</span>)</span>
<span id="cb140-5"><a href="dplyr.html#cb140-5"></a><span class="co"># A tibble: 2 x 8</span></span>
<span id="cb140-6"><a href="dplyr.html#cb140-6"></a><span class="co"># Groups:   Tournament [2]</span></span>
<span id="cb140-7"><a href="dplyr.html#cb140-7"></a>  Tournament   <span class="st">`</span><span class="dt">1</span><span class="st">`</span>   <span class="st">`</span><span class="dt">2</span><span class="st">`</span>   <span class="st">`</span><span class="dt">3</span><span class="st">`</span>   <span class="st">`</span><span class="dt">4</span><span class="st">`</span>   <span class="st">`</span><span class="dt">5</span><span class="st">`</span>   <span class="st">`</span><span class="dt">6</span><span class="st">`</span>   <span class="st">`</span><span class="dt">7</span><span class="st">`</span></span>
<span id="cb140-8"><a href="dplyr.html#cb140-8"></a>  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">      </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb140-9"><a href="dplyr.html#cb140-9"></a><span class="dv">1</span> RG          <span class="fl">13.5</span>  <span class="fl">13.2</span>  <span class="fl">12.6</span>  <span class="fl">9.12</span>   <span class="dv">7</span>    <span class="dv">10</span>       <span class="dv">6</span></span>
<span id="cb140-10"><a href="dplyr.html#cb140-10"></a><span class="dv">2</span> WIMB        <span class="fl">21.1</span>  <span class="fl">23.9</span>  <span class="dv">24</span>   <span class="fl">24.4</span>   <span class="fl">26.5</span>  <span class="fl">27.5</span>    <span class="dv">13</span></span></code></pre></div></li>
</ol>
</div>
<div id="compléments-tidy-data-avec-tidyr" class="section level3">
<h3><span class="header-section-number">3.2.5</span> Compléments : Tidy data avec tidyr</h3>
<p>L’utilisation de <strong>dplyr</strong> et de <strong>ggplot</strong> (que nous verrons dans la partie suivante) suppose que les données sont présentées sous un format adéquat : une ligne est un individu et une colonne une variable, on parle alors de <strong>tidy data</strong>. Cela n’est pas toujours le cas en pratique, considérons par exemple le tableau suivant qui presente les taux de chômage des départements français en 2002, 2006, 2011</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="dplyr.html#cb141-1"></a><span class="op">&gt;</span><span class="st"> </span>df &lt;-<span class="st"> </span><span class="kw">read_delim</span>(<span class="st">&quot;data/tauxchomage.csv&quot;</span>,<span class="dt">delim=</span><span class="st">&quot;;&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb141-2"><a href="dplyr.html#cb141-2"></a><span class="op">&gt;</span><span class="st"> </span>df</span>
<span id="cb141-3"><a href="dplyr.html#cb141-3"></a><span class="co"># A tibble: 96 x 4</span></span>
<span id="cb141-4"><a href="dplyr.html#cb141-4"></a>   NOM_DPT                 TCHOMB1T01 TCHOMB1T06 TCHOMB1T11</span>
<span id="cb141-5"><a href="dplyr.html#cb141-5"></a>   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">                        </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">      </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">      </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb141-6"><a href="dplyr.html#cb141-6"></a><span class="st"> </span><span class="dv">1</span> Ain                            <span class="fl">3.9</span>        <span class="fl">5.9</span>        <span class="fl">6.6</span></span>
<span id="cb141-7"><a href="dplyr.html#cb141-7"></a> <span class="dv">2</span> Aisne                         <span class="fl">10.6</span>       <span class="dv">12</span>         <span class="fl">13.2</span></span>
<span id="cb141-8"><a href="dplyr.html#cb141-8"></a> <span class="dv">3</span> Allier                         <span class="dv">9</span>          <span class="fl">9.2</span>        <span class="fl">9.7</span></span>
<span id="cb141-9"><a href="dplyr.html#cb141-9"></a> <span class="dv">4</span> Alpes<span class="op">-</span>de<span class="op">-</span>Haute<span class="op">-</span>Provence        <span class="fl">9.5</span>        <span class="fl">9.7</span>       <span class="fl">10.3</span></span>
<span id="cb141-10"><a href="dplyr.html#cb141-10"></a> <span class="dv">5</span> Hautes<span class="op">-</span>Alpes                   <span class="fl">7.1</span>        <span class="fl">7.7</span>        <span class="fl">8.3</span></span>
<span id="cb141-11"><a href="dplyr.html#cb141-11"></a> <span class="dv">6</span> Alpes<span class="op">-</span>Maritimes                <span class="fl">9.1</span>        <span class="fl">8.9</span>        <span class="fl">9.2</span></span>
<span id="cb141-12"><a href="dplyr.html#cb141-12"></a> <span class="dv">7</span> Ardèche                        <span class="fl">8.1</span>        <span class="fl">9.6</span>        <span class="fl">9.7</span></span>
<span id="cb141-13"><a href="dplyr.html#cb141-13"></a> <span class="dv">8</span> Ardennes                      <span class="fl">11.5</span>       <span class="fl">12.8</span>       <span class="fl">10.9</span></span>
<span id="cb141-14"><a href="dplyr.html#cb141-14"></a> <span class="dv">9</span> Ariège                         <span class="fl">9.2</span>       <span class="fl">10.1</span>       <span class="fl">10.6</span></span>
<span id="cb141-15"><a href="dplyr.html#cb141-15"></a><span class="dv">10</span> Aube                           <span class="fl">8.2</span>       <span class="dv">10</span>         <span class="dv">10</span>  </span>
<span id="cb141-16"><a href="dplyr.html#cb141-16"></a><span class="co"># … with 86 more rows</span></span></code></pre></div>
<p>Ce tableau n’est pas <strong>tidy</strong> dans le sens où les variables mesurées sont</p>
<ul>
<li>le département</li>
<li>l’année</li>
<li>le taux de chômage</li>
</ul>
<p>Nous verrons qu’il n’est par exemple pas possible de faire un <strong>boxplot</strong> permettant de visualiser la distribution du taux de chômage en fonction de l’année à l’aide de <strong>ggplot2</strong>. Pour passer au format <strong>tidy</strong> il faut assembler les 3 colonnes correspondant aux taux de chômage en une seule colonne et ajouter une colonne qui permette d’identifier l’année. La fonction <strong>pivot_longer</strong> du package <strong>tidyr</strong> permet de faire cela :</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="dplyr.html#cb142-1"></a><span class="op">&gt;</span><span class="st"> </span>df1 &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pivot_longer</span>(<span class="op">-</span>NOM_DPT,<span class="dt">names_to=</span><span class="st">&quot;Année&quot;</span>,<span class="dt">values_to=</span><span class="st">&quot;TCHOM&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb142-2"><a href="dplyr.html#cb142-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">mutate</span>(Anné<span class="dt">e=</span><span class="kw">fct_recode</span>(Année,<span class="st">&quot;2001&quot;</span>=<span class="st">&quot;TCHOMB1T01&quot;</span>,<span class="st">&quot;2006&quot;</span>=<span class="st">&quot;TCHOMB1T06&quot;</span>,<span class="st">&quot;2011&quot;</span>=<span class="st">&quot;TCHOMB1T11&quot;</span>))</span>
<span id="cb142-3"><a href="dplyr.html#cb142-3"></a><span class="op">&gt;</span><span class="st"> </span>df1</span>
<span id="cb142-4"><a href="dplyr.html#cb142-4"></a><span class="co"># A tibble: 288 x 3</span></span>
<span id="cb142-5"><a href="dplyr.html#cb142-5"></a>   NOM_DPT                 Année TCHOM</span>
<span id="cb142-6"><a href="dplyr.html#cb142-6"></a>   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">                   </span><span class="er">&lt;</span>fct<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb142-7"><a href="dplyr.html#cb142-7"></a><span class="st"> </span><span class="dv">1</span> Ain                     <span class="dv">2001</span>    <span class="fl">3.9</span></span>
<span id="cb142-8"><a href="dplyr.html#cb142-8"></a> <span class="dv">2</span> Ain                     <span class="dv">2006</span>    <span class="fl">5.9</span></span>
<span id="cb142-9"><a href="dplyr.html#cb142-9"></a> <span class="dv">3</span> Ain                     <span class="dv">2011</span>    <span class="fl">6.6</span></span>
<span id="cb142-10"><a href="dplyr.html#cb142-10"></a> <span class="dv">4</span> Aisne                   <span class="dv">2001</span>   <span class="fl">10.6</span></span>
<span id="cb142-11"><a href="dplyr.html#cb142-11"></a> <span class="dv">5</span> Aisne                   <span class="dv">2006</span>   <span class="dv">12</span>  </span>
<span id="cb142-12"><a href="dplyr.html#cb142-12"></a> <span class="dv">6</span> Aisne                   <span class="dv">2011</span>   <span class="fl">13.2</span></span>
<span id="cb142-13"><a href="dplyr.html#cb142-13"></a> <span class="dv">7</span> Allier                  <span class="dv">2001</span>    <span class="dv">9</span>  </span>
<span id="cb142-14"><a href="dplyr.html#cb142-14"></a> <span class="dv">8</span> Allier                  <span class="dv">2006</span>    <span class="fl">9.2</span></span>
<span id="cb142-15"><a href="dplyr.html#cb142-15"></a> <span class="dv">9</span> Allier                  <span class="dv">2011</span>    <span class="fl">9.7</span></span>
<span id="cb142-16"><a href="dplyr.html#cb142-16"></a><span class="dv">10</span> Alpes<span class="op">-</span>de<span class="op">-</span>Haute<span class="op">-</span>Provence <span class="dv">2001</span>    <span class="fl">9.5</span></span>
<span id="cb142-17"><a href="dplyr.html#cb142-17"></a><span class="co"># … with 278 more rows</span></span></code></pre></div>
<p>Il sera alors aisé de faire le boxplot souhaité avec</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="dplyr.html#cb143-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">ggplot</span>(df1)<span class="op">+</span><span class="kw">aes</span>(<span class="dt">x=</span>Année,<span class="dt">y=</span>TCHOM)<span class="op">+</span><span class="kw">geom_boxplot</span>()</span></code></pre></div>
<p><img src="TUTO_R_files/figure-html/unnamed-chunk-134-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>L’opération inverse peut être effectuée avec <strong>pivot_wider</strong> :</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="dplyr.html#cb144-1"></a><span class="op">&gt;</span><span class="st"> </span>df1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pivot_wider</span>(<span class="dt">names_from=</span><span class="st">&quot;Année&quot;</span>,<span class="dt">values_from=</span><span class="st">&quot;TCHOM&quot;</span>)</span>
<span id="cb144-2"><a href="dplyr.html#cb144-2"></a><span class="co"># A tibble: 96 x 4</span></span>
<span id="cb144-3"><a href="dplyr.html#cb144-3"></a>   NOM_DPT                 <span class="st">`</span><span class="dt">2001</span><span class="st">`</span> <span class="st">`</span><span class="dt">2006</span><span class="st">`</span> <span class="st">`</span><span class="dt">2011</span><span class="st">`</span></span>
<span id="cb144-4"><a href="dplyr.html#cb144-4"></a>   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">                    </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb144-5"><a href="dplyr.html#cb144-5"></a><span class="st"> </span><span class="dv">1</span> Ain                        <span class="fl">3.9</span>    <span class="fl">5.9</span>    <span class="fl">6.6</span></span>
<span id="cb144-6"><a href="dplyr.html#cb144-6"></a> <span class="dv">2</span> Aisne                     <span class="fl">10.6</span>   <span class="dv">12</span>     <span class="fl">13.2</span></span>
<span id="cb144-7"><a href="dplyr.html#cb144-7"></a> <span class="dv">3</span> Allier                     <span class="dv">9</span>      <span class="fl">9.2</span>    <span class="fl">9.7</span></span>
<span id="cb144-8"><a href="dplyr.html#cb144-8"></a> <span class="dv">4</span> Alpes<span class="op">-</span>de<span class="op">-</span>Haute<span class="op">-</span>Provence    <span class="fl">9.5</span>    <span class="fl">9.7</span>   <span class="fl">10.3</span></span>
<span id="cb144-9"><a href="dplyr.html#cb144-9"></a> <span class="dv">5</span> Hautes<span class="op">-</span>Alpes               <span class="fl">7.1</span>    <span class="fl">7.7</span>    <span class="fl">8.3</span></span>
<span id="cb144-10"><a href="dplyr.html#cb144-10"></a> <span class="dv">6</span> Alpes<span class="op">-</span>Maritimes            <span class="fl">9.1</span>    <span class="fl">8.9</span>    <span class="fl">9.2</span></span>
<span id="cb144-11"><a href="dplyr.html#cb144-11"></a> <span class="dv">7</span> Ardèche                    <span class="fl">8.1</span>    <span class="fl">9.6</span>    <span class="fl">9.7</span></span>
<span id="cb144-12"><a href="dplyr.html#cb144-12"></a> <span class="dv">8</span> Ardennes                  <span class="fl">11.5</span>   <span class="fl">12.8</span>   <span class="fl">10.9</span></span>
<span id="cb144-13"><a href="dplyr.html#cb144-13"></a> <span class="dv">9</span> Ariège                     <span class="fl">9.2</span>   <span class="fl">10.1</span>   <span class="fl">10.6</span></span>
<span id="cb144-14"><a href="dplyr.html#cb144-14"></a><span class="dv">10</span> Aube                       <span class="fl">8.2</span>   <span class="dv">10</span>     <span class="dv">10</span>  </span>
<span id="cb144-15"><a href="dplyr.html#cb144-15"></a><span class="co"># … with 86 more rows</span></span></code></pre></div>
<p>Le package <strong>tidyr</strong> possède plusieurs autres verbes qui pourront aider l’utilisateur à mettre la table sous le meilleur format pour les analyses. Citons par exemple le verbe <strong>separate</strong> qui va séparer une colonne en plusieurs :</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="dplyr.html#cb145-1"></a><span class="op">&gt;</span><span class="st"> </span>df &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">date=</span><span class="kw">as.Date</span>(<span class="kw">c</span>(<span class="st">&quot;01/03/2015&quot;</span>,<span class="st">&quot;05/18/2017&quot;</span>,</span>
<span id="cb145-2"><a href="dplyr.html#cb145-2"></a><span class="op">+</span><span class="st">           &quot;09/14/2018&quot;</span>),<span class="st">&quot;%m/%d/%Y&quot;</span>),<span class="dt">temp=</span><span class="kw">c</span>(<span class="dv">18</span>,<span class="dv">21</span>,<span class="dv">15</span>))</span>
<span id="cb145-3"><a href="dplyr.html#cb145-3"></a><span class="op">&gt;</span><span class="st"> </span>df</span>
<span id="cb145-4"><a href="dplyr.html#cb145-4"></a><span class="co"># A tibble: 3 x 2</span></span>
<span id="cb145-5"><a href="dplyr.html#cb145-5"></a>  date        temp</span>
<span id="cb145-6"><a href="dplyr.html#cb145-6"></a>  <span class="op">&lt;</span>date<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb145-7"><a href="dplyr.html#cb145-7"></a><span class="dv">1</span> <span class="dv">2015-01-03</span>    <span class="dv">18</span></span>
<span id="cb145-8"><a href="dplyr.html#cb145-8"></a><span class="dv">2</span> <span class="dv">2017-05-18</span>    <span class="dv">21</span></span>
<span id="cb145-9"><a href="dplyr.html#cb145-9"></a><span class="dv">3</span> <span class="dv">2018-09-14</span>    <span class="dv">15</span></span>
<span id="cb145-10"><a href="dplyr.html#cb145-10"></a><span class="op">&gt;</span><span class="st"> </span>df1 &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">separate</span>(date,<span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&quot;year&quot;</span>,<span class="st">&quot;month&quot;</span>,<span class="st">&quot;day&quot;</span>))</span>
<span id="cb145-11"><a href="dplyr.html#cb145-11"></a><span class="op">&gt;</span><span class="st"> </span>df1</span>
<span id="cb145-12"><a href="dplyr.html#cb145-12"></a><span class="co"># A tibble: 3 x 4</span></span>
<span id="cb145-13"><a href="dplyr.html#cb145-13"></a>  year  month day    temp</span>
<span id="cb145-14"><a href="dplyr.html#cb145-14"></a>  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb145-15"><a href="dplyr.html#cb145-15"></a><span class="dv">1</span> <span class="dv">2015</span>  <span class="dv">01</span>    <span class="dv">03</span>       <span class="dv">18</span></span>
<span id="cb145-16"><a href="dplyr.html#cb145-16"></a><span class="dv">2</span> <span class="dv">2017</span>  <span class="dv">05</span>    <span class="dv">18</span>       <span class="dv">21</span></span>
<span id="cb145-17"><a href="dplyr.html#cb145-17"></a><span class="dv">3</span> <span class="dv">2018</span>  <span class="dv">09</span>    <span class="dv">14</span>       <span class="dv">15</span></span></code></pre></div>
<p>ou le verbe <strong>unite</strong> qui fera l’opération inverse</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="dplyr.html#cb146-1"></a><span class="op">&gt;</span><span class="st"> </span>df1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">unite</span>(date,year,month,day,<span class="dt">sep=</span><span class="st">&quot;/&quot;</span>)</span>
<span id="cb146-2"><a href="dplyr.html#cb146-2"></a><span class="co"># A tibble: 3 x 2</span></span>
<span id="cb146-3"><a href="dplyr.html#cb146-3"></a>  date        temp</span>
<span id="cb146-4"><a href="dplyr.html#cb146-4"></a>  <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">      </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></span>
<span id="cb146-5"><a href="dplyr.html#cb146-5"></a><span class="dv">1</span> <span class="dv">2015</span><span class="op">/</span><span class="dv">01</span><span class="op">/</span><span class="dv">03</span>    <span class="dv">18</span></span>
<span id="cb146-6"><a href="dplyr.html#cb146-6"></a><span class="dv">2</span> <span class="dv">2017</span><span class="op">/</span><span class="dv">05</span><span class="op">/</span><span class="dv">18</span>    <span class="dv">21</span></span>
<span id="cb146-7"><a href="dplyr.html#cb146-7"></a><span class="dv">3</span> <span class="dv">2018</span><span class="op">/</span><span class="dv">09</span><span class="op">/</span><span class="dv">14</span>    <span class="dv">15</span></span></code></pre></div>
<p>Citons enfin les verbes :</p>
<ul>
<li><strong>separate_rows</strong> qui permettra de séparer des informations en plusieurs lignes ;</li>
<li><strong>extract</strong> pour créer de nouvelles colonnes ;</li>
<li><strong>complete</strong></li>
</ul>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="objetsR.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ggplot2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "sepia",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["TUTO_R.pdf", "TUTO_R.epub"],
"toc": {
"collapse": "subsection",
"sharing": {
"facebook": true,
"github": true,
"twitter": true
}
},
"highlight": "tango"
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
